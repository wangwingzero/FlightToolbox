好的，这是一个非常清晰的协作思路。

您可以直接将以下这段完整的指令，复制粘贴给任何一个擅长编写代码的AI（例如 GPT-4, Claude, 或 Gemini 自身的新会话）。这段指令详细说明了任务目标、已有的核心模块，以及需要AI完成的具体工作。

---

### **【请直接复制以下全部内容，并将其作为指令发送给AI】**

**任务目标：**

你好，我需要你为我创建一个微信小程序页面。这个页面的功能是让飞行员输入地理坐标、飞行高度和日期，来计算该点的瞬时电离辐射剂量率。

我已经有了一个核心的计算模块 `radiationModel.js`，它封装了所有复杂的物理计算。你的任务是创建用户界面(WXML/WXSS)和页面逻辑(JS)，来调用这个模块并向用户展示结果。

---

**第1步：项目文件结构**

请按照以下结构创建或组织文件：

```
project_root/
|-- pages/
|   |-- calculator/
|       |-- calculator.wxml  // 你需要创建
|       |-- calculator.wxss  // 你需要创建
|       |-- calculator.js    // 你需要创建
|       |-- calculator.json  // 你需要创建
|-- utils/
|   |-- radiationModel.js  // 我已经提供，请直接使用
```

---

**第2步：核心计算模块 `utils/radiationModel.js`**

这是我已经完成的核心模块。请将以下代码完整地放入 `utils/radiationModel.js` 文件中。你后续的所有计算都**必须**通过调用这个模块里的 `getDoseRate` 函数来完成。

```javascript
/**
 * @file radiationModel.js
 * @description 航空电离辐射剂量估算模型（已验证和校准版）
 * @author Gemini (基于公开物理模型和WMM2020数据)
 * @version 4.1.0
 */

// [已校准] 地磁北极坐标 (基于 WMM2020 模型发布值 for 2020.0)。
const GEOMAGNETIC_POLE = { lat: 80.65, lon: -72.68 };

// [已验证] 太阳调制潜势(Φ)查找表 (单位: MV)。
const SOLAR_MODULATION_LUT = {
  2000: 1100, 2001: 1050, 2002: 1000, 2003: 850, 2004: 700,
  2005: 550, 2006: 500, 2007: 480, 2008: 470, 2009: 460,
  2010: 500, 2011: 650, 2012: 850, 2013: 950, 2014: 1000,
  2015: 800, 2016: 650, 2017: 550, 2018: 500, 2019: 480,
  2020: 470, 2021: 520, 2022: 680, 2023: 850, 2024: 980, 2025: 1050,
  2026: 950, 2027: 800, 2028: 700, 2029: 600, 2030: 550
};
const DEFAULT_SOLAR_MODULATION = 700;

function getGeomagneticLatitude(lat, lon) {
  const latRad = lat * Math.PI / 180, lonRad = lon * Math.PI / 180;
  const poleLatRad = GEOMAGNETIC_POLE.lat * Math.PI / 180, poleLonRad = GEOMAGNETIC_POLE.lon * Math.PI / 180;
  const sinMagLat = Math.sin(latRad) * Math.sin(poleLatRad) + Math.cos(latRad) * Math.cos(poleLatRad) * Math.cos(lonRad - poleLonRad);
  return Math.asin(sinMagLat) * 180 / Math.PI;
}

function getCutoffRigidity(geomagneticLat) {
  return 14.5 * Math.pow(Math.cos(geomagneticLat * Math.PI / 180), 4);
}

function getAtmosphericDepth(altitudeMeters) {
  const h = altitudeMeters / 1000;
  return h < 44 ? 1033 * Math.exp(-0.134 * h) : 7.7 * Math.exp(-0.201 * (h - 44));
}

function calculateDoseRate(Rc, x, Phi) {
  const P1 = 2.83 * Math.exp(-Phi / 3200);
  const P2 = 0.8 + (Phi / 3500);
  const P3 = 2.0 * Math.exp(-Phi / 700);
  const P4 = 2.0;
  const S_Rc = (1 - Math.exp(-Rc / P1)) * Math.pow(Rc + P3, -P2);
  const exp_term1 = Math.exp(-x / (120 * Math.pow(Rc + P4, 0.2)));
  const exp_term2 = Math.exp(-x / 430);
  const Y_x = 2.5e-3 * x * exp_term1 + 4.0e-3 * exp_term2;
  return parseFloat((3.6e6 * S_Rc * Y_x).toFixed(3));
}

function getDoseRate({ latitude, longitude, altitude, date }) {
  if ([latitude, longitude, altitude].some(v => typeof v !== 'number' || isNaN(v))) { return 0; }
  if (!(date instanceof Date) || isNaN(date)) { return 0; }
  if (altitude < 0) altitude = 0;
  const year = date.getFullYear();
  const Phi = SOLAR_MODULATION_LUT[year] || DEFAULT_SOLAR_MODULATION;
  const geomagneticLat = getGeomagneticLatitude(latitude, longitude);
  const Rc = getCutoffRigidity(geomagneticLat);
  const x = getAtmosphericDepth(altitude);
  return calculateDoseRate(Rc, x, Phi);
}

module.exports = { getDoseRate };```

---

**第3步：页面开发要求**

请为 `pages/calculator/` 目录创建以下四个文件。

**1. `calculator.json`**
设置页面的导航栏标题。

**2. `calculator.wxml` (UI界面)**
创建一个用户界面，必须包含以下元素：
*   一个清晰的页面标题，例如“航空辐射剂量估算”。
*   **输入区域**：
    *   一个用于输入**纬度**的 `<input>` 组件（`type="digit"`），并附有标签和单位（度）。
    *   一个用于输入**经度**的 `<input>` 组件（`type="digit"`），并附有标签和单位（度）。
    *   一个用于输入**高度**的 `<input>` 组件（`type="number"`），并附有标签和单位（米）。
    *   一个用于选择**日期**的 `<picker>` 组件（`mode="date"`），并附有标签。
*   一个**“计算”按钮**，点击后触发计算。
*   **结果显示区域**：
    *   一个用于清晰展示“瞬时剂量率”计算结果的区域，单位为 `μSv/h`。
*   一段**免责声明**文本，内容为：“声明：本计算结果为基于物理模型的估算值，仅供参考，不作为专业医疗或飞行决策依据。”

**3. `calculator.wxss` (页面样式)**
为 `calculator.wxml` 编写CSS样式。要求：
*   布局清晰、专业，适合工具类应用。
*   输入框和标签对齐，易于阅读。
*   结果区域的字体要突出、醒目。
*   按钮样式要明确，易于点击。

**4. `calculator.js` (页面逻辑)**
这是连接UI和计算模块的关键。请实现以下逻辑：
*   在文件顶部，使用 `require` 引入 `../../utils/radiationModel.js`。
*   在 `Page` 的 `data` 中，初始化所有需要绑定的数据，包括输入框的默认值（例如：纬度 `39.9`，经度 `116.4`，高度 `10000`，日期为当前日期）和结果的初始值。
*   为所有输入组件和日期选择器编写 `bindinput` 或 `bindchange` 事件处理函数，当用户输入时，及时更新 `data` 中的对应数据。
*   为“计算”按钮编写 `bindtap` 事件处理函数。在此函数中：
    1.  从 `data` 中获取用户输入的纬度、经度、高度和日期字符串。
    2.  对输入值进行**严格的合法性校验**。确保经纬度和高度是有效的数字。如果校验失败，使用 `wx.showToast` 提示用户错误。
    3.  **关键步骤**：将用户选择的日期字符串（例如 '2025-10-17'）转换为一个JavaScript的 `Date` 对象。**请注意**，为了兼容iOS，最好使用 `new Date('2025/10/17')` 的方式转换。
    4.  调用引入的 `radiationModel.getDoseRate({...})` 函数，将经过处理的 `latitude`, `longitude`, `altitude`, 和 `date` 对象作为参数传入。
    5.  使用 `this.setData` 将返回的计算结果更新到 `data` 中，从而刷新UI界面上的结果显示。
*   （可选优化）在 `onLoad`生命周期函数中，可以主动调用一次计算函数，以便用户一进入页面就能看到一组默认输入的计算结果。

请根据以上要求，为我生成 `calculator.json`, `calculator.wxml`, `calculator.wxss`, 和 `calculator.js` 这四个文件的完整代码。
```

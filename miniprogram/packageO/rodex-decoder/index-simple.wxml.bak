<view class="container">
  <!-- 页面标题 -->
  <view class="page-header">
    <view class="header-title">
      <text class="title-icon">🛬</text>
      <text class="title-text">RODEX 跑道状态解码器</text>
    </view>
    <view class="header-subtitle">专业飞行员工具 - 分步引导式RODEX代码生成</view>
  </view>

  <!-- 调试信息 -->
  <view style="background: #fff; margin: 20rpx; padding: 20rpx; border-radius: 10rpx;">
    <text>当前步骤: {{ currentStep }}</text>
    <text>\n跑道代码: {{ rodex.runwayDesignator }}</text>
  </view>

  <!-- 强制显示第一步 -->
  <view class="step-content">
    <view class="step-card">
      <view class="step-title">
        <text class="step-icon">🛬</text>
        <text>第一步：选择跑道</text>
      </view>
      <view class="step-description">输入跑道代码或选择常用选项</view>
      
      <!-- 输入框 -->
      <view class="runway-input-section">
        <input
          class="runway-input"
          value="{{ rodex.runwayDesignator }}"
          placeholder="输入跑道代码 (如: 27, 14L, 99)"
          bindinput="onRunwayInput"
        />
      </view>

      <!-- 数字键盘区域 -->
      <view class="number-keyboard">
        <view class="keyboard-row">
          <view class="key-button" bind:tap="inputRunwayNumber" data-value="0">0</view>
          <view class="key-button" bind:tap="inputRunwayNumber" data-value="1">1</view>
          <view class="key-button" bind:tap="inputRunwayNumber" data-value="2">2</view>
        </view>
        <view class="keyboard-row">
          <view class="key-button" bind:tap="inputRunwayNumber" data-value="3">3</view>
          <view class="key-button" bind:tap="inputRunwayNumber" data-value="4">4</view>
          <view class="key-button" bind:tap="inputRunwayNumber" data-value="5">5</view>
        </view>
        <view class="keyboard-row">
          <view class="key-button" bind:tap="inputRunwayNumber" data-value="6">6</view>
          <view class="key-button" bind:tap="inputRunwayNumber" data-value="7">7</view>
          <view class="key-button" bind:tap="inputRunwayNumber" data-value="8">8</view>
        </view>
        <view class="keyboard-row">
          <view class="key-button" bind:tap="inputRunwayNumber" data-value="9">9</view>
          <view class="key-button special" bind:tap="clearRunwayInput">清除</view>
          <view class="key-button special" bind:tap="deleteRunwayChar">删除</view>
        </view>
      </view>

      <!-- 特殊选项 -->
      <view class="special-options">
        <view class="option-row">
          <view class="option-button" bind:tap="selectRunwayOption" data-value="L">L (左)</view>
          <view class="option-button" bind:tap="selectRunwayOption" data-value="R">R (右)</view>
          <view class="option-button" bind:tap="selectRunwayOption" data-value="C">C (中)</view>
        </view>
        <view class="option-row">
          <view class="option-button wide" bind:tap="selectRunwayOption" data-value="99">99 (重复报告)</view>
          <view class="option-button wide" bind:tap="selectRunwayOption" data-value="88">88 (所有跑道)</view>
        </view>
      </view>

      <!-- 显示已选择的跑道 -->
      <view class="selected-display" wx:if="{{ rodex.runwayDesignator }}">
        <view class="selected-label">已选择：</view>
        <view class="selected-value">R{{ rodex.runwayDesignator }}</view>
      </view>
    </view>
  </view>

  <!-- 测试按钮 -->
  <view style="margin: 20rpx; padding: 20rpx;">
    <button bind:tap="testFunction" style="background: #007aff; color: white; padding: 20rpx;">测试按钮</button>
  </view>
</view>
<view class="container">
  <!-- 飞机动画背景 -->
  <view class="animated-bg">
    <view class="plane-path"></view>
    <view class="cloud cloud1"></view>
    <view class="cloud cloud2"></view>
    <view class="cloud cloud3"></view>
  </view>

  <!-- 页面头部 -->
  <view class="hero-section">
    <view class="hero-content">
      <view class="hero-icon">✈️</view>
      <view class="hero-title">梯度计算器</view>
      <view class="hero-subtitle">飞行梯度、升降率智能换算</view>
      <view class="hero-features">
        <view class="feature-item">
          <view class="feature-icon">🎯</view>
          <text>智能计算</text>
        </view>
        <view class="feature-item">
          <view class="feature-icon">⚡</view>
          <text>快捷预设</text>
        </view>
        <view class="feature-item">
          <view class="feature-icon">🔍</view>
          <text>冲突检测</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 主要内容区域 -->
  <view class="main-content">
    <!-- 快速预设卡片 -->
    <view class="presets-card">
      <view class="card-header">
        <view class="card-title">⚡ 快速预设</view>
        <view class="card-desc">选择常用场景，快速计算</view>
      </view>
      <view class="preset-grid">
        <view class="preset-item" bind:tap="setPreset" data-preset="standard">
          <view class="preset-icon">📐</view>
          <view class="preset-title">标准下降</view>
          <view class="preset-value">3°</view>
        </view>
        <view class="preset-item" bind:tap="setPreset" data-preset="steep">
          <view class="preset-icon">⬇️</view>
          <view class="preset-title">陡峪下降</view>
          <view class="preset-value">6°</view>
        </view>
        <view class="preset-item" bind:tap="setPreset" data-preset="climb">
          <view class="preset-icon">⬆️</view>
          <view class="preset-title">标准爬升</view>
          <view class="preset-value">5%</view>
        </view>
      </view>
    </view>

    <!-- 参数输入卡片 -->
    <view class="input-card">
      <view class="card-header">
        <view class="card-title">📊 参数输入</view>
        <view class="card-desc">输入任意两个参数进行计算</view>
      </view>
      <view class="input-grid">
        <view class="input-item">
          <view class="input-header">
            <view class="input-icon gradient-icon">📐</view>
            <view class="input-info">
              <text class="input-label">梯度</text>
              <text class="input-unit">百分比 (%)</text>
            </view>
          </view>
          <van-field
            value="{{ gradient.gradientInput }}"
            placeholder="例如：3.5"
            type="text"
            confirm-type="done"
            bind:input="onNumberInput"
            bind:change="onGradientInputChange"
            bind:focus="onInputFocus"
            data-field="gradient"
            input-align="center"
            class="custom-input"
          />
        </view>
        
        <view class="input-item">
          <view class="input-header">
            <view class="input-icon speed-icon">🌬️</view>
            <view class="input-info">
              <text class="input-label">地速</text>
              <text class="input-unit">节 (knot)</text>
            </view>
          </view>
          <van-field
            value="{{ gradient.groundSpeedInput }}"
            placeholder="例如：150"
            type="digit"
            bind:change="onGroundSpeedInputChange"
            bind:focus="onInputFocus"
            data-field="groundSpeed"
            input-align="center"
            class="custom-input"
          />
        </view>
        
        <view class="input-item">
          <view class="input-header">
            <view class="input-icon vertical-icon">⬆️</view>
            <view class="input-info">
              <text class="input-label">升降率</text>
              <text class="input-unit">ft/min</text>
            </view>
          </view>
          <van-field
            value="{{ gradient.verticalSpeedInput }}"
            placeholder="例如：500"
            type="text"
            confirm-type="done"
            bind:input="onNumberInput"
            bind:change="onVerticalSpeedInputChange"
            bind:focus="onInputFocus"
            data-field="verticalSpeed"
            input-align="center"
            class="custom-input"
          />
        </view>
        
        <view class="input-item">
          <view class="input-header">
            <view class="input-icon angle-icon">📐</view>
            <view class="input-info">
              <text class="input-label">角度</text>
              <text class="input-unit">度 (°)</text>
            </view>
          </view>
          <van-field
            value="{{ gradient.angleInput }}"
            placeholder="例如：3.0"
            type="text"
            confirm-type="done"
            bind:input="onNumberInput"
            bind:change="onAngleInputChange"
            bind:focus="onInputFocus"
            data-field="angle"
            input-align="center"
            class="custom-input"
          />
        </view>
      </view>
    </view>

    <!-- 操作按钮 -->
    <view class="action-section">
      <view class="primary-action" bind:tap="convertGradient">
        <view class="action-icon">🚀</view>
        <view class="action-text">智能计算</view>
      </view>
      <view class="secondary-action" bind:tap="clearGradient">
        <view class="action-icon">🗑️</view>
        <view class="action-text">清空重置</view>
      </view>
    </view>

    <!-- 计算结果卡片 -->
    <view wx:if="{{ gradient.gradientResult || gradient.verticalSpeedResult || gradient.angleResult }}" class="result-card">
      <view class="card-header">
        <view class="card-title">🎯 计算结果</view>
        <view class="card-desc">基于输入参数自动计算</view>
      </view>
      <view class="result-grid">
        <view wx:if="{{ gradient.gradientResult }}" class="result-item">
          <view class="result-header">
            <view class="result-icon gradient-result">📐</view>
            <view class="result-label">梯度</view>
            <view class="result-badge">计算值</view>
          </view>
          <view class="result-value">{{ gradient.gradientResult }}%</view>
        </view>
        <view wx:if="{{ gradient.verticalSpeedResult }}" class="result-item">
          <view class="result-header">
            <view class="result-icon vertical-result">⬆️</view>
            <view class="result-label">升降率</view>
            <view class="result-badge">计算值</view>
          </view>
          <view class="result-value">{{ gradient.verticalSpeedResult }} ft/min</view>
        </view>
        <view wx:if="{{ gradient.angleResult }}" class="result-item">
          <view class="result-header">
            <view class="result-icon angle-result">📐</view>
            <view class="result-label">角度</view>
            <view class="result-badge">计算值</view>
          </view>
          <view class="result-value">{{ gradient.angleResult }}°</view>
        </view>
      </view>
    </view>
  </view>
</view>
<view class="container">
  <view class="calculation-module">
    <view class="input-section">
      <view class="input-group">
        <view class="input-label">📏 当前高度</view>
        <van-field
          value="{{ descent.currentAltitude }}"
          placeholder="请输入当前高度"
          type="digit"
          bind:change="onCurrentAltitudeChange"
        >
          <view slot="right-icon" class="unit-label">英尺</view>
        </van-field>
      </view>

      <view class="input-group">
        <view class="input-label">🎯 目标高度</view>
        <van-field
          value="{{ descent.targetAltitude }}"
          placeholder="请输入目标高度"
          type="digit"
          bind:change="onTargetAltitudeChange"
        >
          <view slot="right-icon" class="unit-label">英尺</view>
        </van-field>
      </view>

      <view class="input-group">
        <view class="input-label">📍 相距距离</view>
        <van-field
          value="{{ descent.distanceNM }}"
          placeholder="请输入距离"
          type="digit"
          bind:change="onDistanceNMChange"
        >
          <view slot="right-icon" class="unit-label">海里</view>
        </van-field>
      </view>

      <view class="input-group">
        <view class="input-label">⚡ 当前地速</view>
        <van-field
          value="{{ descent.currentGroundSpeed }}"
          placeholder="请输入地速"
          type="digit"
          bind:change="onCurrentGroundSpeedChange"
        >
          <view slot="right-icon" class="unit-label">节</view>
        </van-field>
      </view>
    </view>

    <view class="action-buttons">
      <van-button type="primary" bind:click="calculateDescentRate" block>
        🚀 计算下降率
      </van-button>
      <van-button type="default" bind:click="clearDescentRate" block>
        🗑️ 清空数据
      </van-button>
    </view>

    <view wx:if="{{ descent.descentRate }}" class="result-section" id="result-section">
      <view class="result-title">📊 计算结果</view>
      <view class="result-grid">
        <view class="result-item">
          <view class="result-label">所需下降率</view>
          <view class="result-value">{{ descent.descentRate }} 英尺/分钟</view>
        </view>
        <view class="result-item">
          <view class="result-label">下降角度</view>
          <view class="result-value">{{ descent.descentAngle }}°</view>
        </view>
        <view class="result-item">
          <view class="result-label">下降时间</view>
          <view class="result-value">{{ descent.timeToDescend }} 分钟</view>
        </view>
        <view class="result-item">
          <view class="result-label">下降梯度</view>
          <view class="result-value">{{ descent.descentGradient }}%</view>
        </view>
      </view>
    </view>
  </view>

  <!-- 横幅广告 -->
  <view wx:if="{{ !isAdFree }}" class="ad-banner-container">
    <ad unit-id="adunit-4e68875624a88762" ad-type="banner" ad-intervals="30"></ad>
  </view>

</view>
<!--通信失效处理程序页面-->
<view class="container">
  <!-- 搜索栏 -->
  <view class="search-container">
    <view class="search-box">
      <text class="search-icon">🔍</text>
      <input
        class="search-input"
        type="text"
        placeholder="搜索国家或地区..."
        placeholder-class="search-placeholder"
        value="{{searchText}}"
        bindinput="onSearchInput"
        confirm-type="search"
      />
      <text class="clear-icon" wx:if="{{searchText}}" bindtap="clearSearch">✕</text>
    </view>
  </view>

  <!-- 搜索结果提示 -->
  <view class="search-result-tip" wx:if="{{searchText}}">
    <text>找到 {{filteredRegions.length}} 个匹配结果</text>
  </view>

  <!-- 空状态提示 -->
  <view class="empty-state" wx:if="{{searchText && filteredRegions.length === 0}}">
    <text class="empty-icon">🔍</text>
    <text class="empty-text">未找到匹配的地区</text>
    <text class="empty-hint">请尝试其他关键词</text>
  </view>

  <!-- 卡片容器 -->
  <view class="cards-container">
    <!-- 动态渲染地区卡片 -->
    <block wx:for="{{filteredRegions}}" wx:key="type">
      <view class="procedure-card {{item.className}}" data-type="{{item.type}}" bindtap="selectProcedure">
        <text class="card-icon">{{item.icon}}</text>
        <text class="card-title">{{item.title}}</text>
        <text class="card-subtitle">{{item.titleEn}}</text>
        <view class="card-details">
          <view class="detail-item">
            <text class="detail-label">适用范围:</text>
            <text class="detail-value">{{item.scope}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">程序类型:</text>
            <text class="detail-value">{{item.procedureType}}</text>
          </view>
        </view>
        <text class="card-arrow">›</text>
      </view>
    </block>
  </view>

  <!-- 底部横版广告 -->
  <view wx:if="{{ !isAdFree }}" class="ad-banner-container">
    <ad unit-id="adunit-3a1bf3800fa937a2" ad-type="banner" ad-intervals="30"></ad>
  </view>
</view>
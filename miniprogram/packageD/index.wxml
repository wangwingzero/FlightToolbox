<view class="container page-content">
  <!-- ä¼˜é›…æœç´¢åŒºåŸŸ -->
  <view class="elegant-search-container">
    <!-- èƒŒæ™¯è£…é¥° -->
    <view class="search-bg-decoration">
      <view class="decoration-circle circle-1"></view>
      <view class="decoration-circle circle-2"></view>
      <view class="decoration-circle circle-3"></view>
    </view>
    
    <!-- ä¸»æœç´¢æ¡† -->
    <view class="main-search-wrapper">
      <view class="search-title">
        <text class="title-icon">ğŸ“–</text>
        <text class="title-text">æƒå¨å®šä¹‰</text>
      </view>
      
      <view class="premium-search-box {{ searchFocused ? 'focused' : '' }}">
        <view class="search-icon-wrapper">
          <van-icon name="search" size="20px" color="#6366f1" />
        </view>
        
        <input 
          class="premium-search-input"
          value="{{ searchValue }}"
          placeholder="æœç´¢æœ¯è¯­åç§°ã€å®šä¹‰å†…å®¹æˆ–æ¥æº"
          placeholder-class="premium-search-placeholder"
          bindinput="onSearchInput"
          bindfocus="onSearchFocus"
          bindblur="onSearchBlur"
          confirm-type="search"
          bindconfirm="onSearchConfirm"
        />
        
        <view wx:if="{{ searchValue }}" class="search-clear-btn" bind:tap="onSearchClear">
          <van-icon name="clear" size="18px" color="#9ca3af" />
        </view>
      </view>
      
      <!-- æœç´¢ç»“æœç»Ÿè®¡ -->
      <view wx:if="{{ filteredCount !== totalCount }}" class="search-stats">
        <view class="stats-content">
          <text class="stats-icon">âœ…</text>
          <text class="stats-text">æ‰¾åˆ° {{ filteredCount }} æ¡ç»“æœ</text>
        </view>
      </view>
    </view>
  </view>


  <!-- å®šä¹‰åˆ—è¡¨ -->
  <view class="definitions-container">
    <!-- ç©ºçŠ¶æ€ -->
    <van-empty 
      wx:if="{{ displayedDefinitions.length === 0 }}"
      image="search"
      description="æœªæ‰¾åˆ°ç›¸å…³å®šä¹‰"
    />
    
    <!-- å®šä¹‰åˆ—è¡¨ -->
    <view wx:else class="definitions-list">
      <block wx:for="{{ displayedDefinitions }}" wx:key="id" wx:for-index="idx">
        <view 
          class="definition-card" 
          bind:tap="onDefinitionTap"
          data-definition="{{ item }}"
        >
          <!-- å¡ç‰‡å¤´éƒ¨ -->
          <view class="card-header">
            <view class="card-title">{{ item.chinese_name }}</view>
            <view class="source-tag">{{ item.source }}</view>
          </view>
          
          <!-- è‹±æ–‡åç§° -->
          <view class="english-name">{{ item.english_name }}</view>
          
          <!-- å®šä¹‰å†…å®¹åŒºåŸŸ -->
          <view class="definition-box">
            <view class="definition-text">{{ item.definition }}</view>
          </view>
          
          <!-- æ“ä½œæç¤º -->
          <view class="action-hint">
            <view class="hint-icon">ğŸ‘†</view>
            <view class="hint-text">ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†å†…å®¹</view>
          </view>
        </view>
      </block>
      
      <!-- åŠ è½½æ›´å¤š -->
      <view wx:if="{{ hasMore }}" class="load-more-container">
        <view class="load-more-btn" bind:tap="onLoadMore">
          <van-loading type="spinner" size="16px" />
          <text class="load-more-text">åŠ è½½æ›´å¤š</text>
        </view>
      </view>
      
      <!-- å·²åŠ è½½å…¨éƒ¨ -->
      <view wx:else class="load-complete">
        <view class="load-complete-text">å·²æ˜¾ç¤ºå…¨éƒ¨ {{ filteredCount }} æ¡å®šä¹‰</view>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½è¯´æ˜ -->
  <view class="tips-section">
    <view class="tips-title">ğŸ’¡ ä½¿ç”¨è¯´æ˜</view>
    <view class="tips-content">
      <view class="tip-item">â€¢ æä¾›èˆªç©ºä¸“ä¸šæœ¯è¯­çš„æƒå¨å®šä¹‰æŸ¥è¯¢</view>
      <view class="tip-item">â€¢ æ”¯æŒä¸­è‹±æ–‡æœ¯è¯­åç§°å’Œå®šä¹‰å†…å®¹æœç´¢</view>
      <view class="tip-item">â€¢ ç‚¹å‡»ä»»æ„å®šä¹‰å¯å¤åˆ¶å®Œæ•´å†…å®¹åˆ°å‰ªè´´æ¿</view>
      <view class="tip-item">â€¢ æ”¯æŒç¦»çº¿ä½¿ç”¨ï¼Œæ— éœ€ç½‘ç»œè¿æ¥</view>
      <view class="tip-item">â€¢ æ‰€æœ‰å®šä¹‰å‡æ¥è‡ªå®˜æ–¹æƒå¨æ–‡ä»¶</view>
    </view>
  </view>

</view>

<!-- ç²¾ç¾ä¼˜é›…æµ®çª— -->
<view wx:if="{{ showModal }}" class="modal-overlay" bind:tap="onModalClose">
  <view class="modal-container" catch:tap="stopPropagation">
    <!-- æµ®çª—å¤´éƒ¨ -->
    <view class="modal-header">
      <view class="modal-title-section">
        <view class="modal-title">{{ selectedDefinition.chinese_name }}</view>
        <view class="modal-source-tag">{{ selectedDefinition.source }}</view>
      </view>
      <view class="modal-close-btn" bind:tap="onModalClose">
        <view class="close-icon">Ã—</view>
      </view>
    </view>
    
    <!-- è‹±æ–‡åç§° -->
    <view wx:if="{{ selectedDefinition.english_name }}" class="modal-english-name">
      {{ selectedDefinition.english_name }}
    </view>
    
    <!-- æµ®çª—å†…å®¹ -->
    <scroll-view class="modal-content" scroll-y="true">
      <view class="modal-definition-text">{{ selectedDefinition.definition }}</view>
    </scroll-view>
    
    <!-- æµ®çª—åº•éƒ¨æ“ä½œ -->
    <view class="modal-footer">
      <view class="modal-copy-btn" bind:tap="onCopyDefinition">
        <view class="copy-icon">ğŸ“‹</view>
        <view class="copy-text">å¤åˆ¶å®šä¹‰</view>
      </view>
    </view>
  </view>
</view>

<van-toast id="van-toast" />
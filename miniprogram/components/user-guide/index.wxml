<!-- FlightToolbox æ™ºèƒ½ç”¨æˆ·å¼•å¯¼ v2.0 -->
<view class="smart-guide" wx:if="{{ show && currentStepInfo }}">
  <!-- ç°ä»£åŒ–é®ç½©å±‚ -->
  <view class="guide-overlay-modern" bind:tap="skipGuide">
    <!-- èšå…‰ç¯æ•ˆæœ -->
    <view wx:if="{{ arrowPosition.show }}" 
          class="guide-spotlight" 
          style="top: {{ arrowPosition.top - 60 }}px; left: {{ arrowPosition.left - 60 }}px;">
    </view>
  </view>
  
  <!-- æŒ‡å‘ç®­å¤´ï¼ˆå‡çº§ç‰ˆï¼‰ -->
  <view wx:if="{{ arrowPosition.show }}"
        class="guide-arrow-modern"
        style="top: {{ arrowPosition.top }}px; left: {{ arrowPosition.left }}px;">
    <view class="arrow-pulse">ğŸ‘†</view>
    <view class="arrow-ripple"></view>
  </view>
  
  <!-- ç°ä»£åŒ–å¼•å¯¼å¡ç‰‡ -->
  <view class="guide-content-card" style="animation-delay: 0.1s;">
    <!-- é¡¶éƒ¨è¿›åº¦æŒ‡ç¤ºå™¨ -->
    <view class="guide-progress-bar">
      <view class="progress-track">
        <view class="progress-fill" 
              style="width: {{ (currentStep + 1) / totalSteps * 100 }}%;"></view>
      </view>
      <view class="progress-text">{{ currentStep + 1 }}/{{ totalSteps }}</view>
    </view>
    
    <!-- å…³é—­æŒ‰é’® -->
    <view class="guide-close-modern" bind:tap="skipGuide">
      <text class="close-icon">âœ•</text>
    </view>
    
    <!-- å¡ç‰‡å†…å®¹åŒºåŸŸ -->
    <view class="guide-card-content">
      <!-- å›¾æ ‡åŒºåŸŸ -->
      <view class="guide-icon-section">
        <view class="icon-container emotion-{{ currentStepInfo.emotion || 'default' }}">
          <text class="guide-icon-large">{{ currentStepInfo.icon }}</text>
          <view class="icon-glow"></view>
        </view>
      </view>
      
      <!-- æ ‡é¢˜å’Œå†…å®¹ -->
      <view class="guide-text-section">
        <view class="guide-title-modern">{{ currentStepInfo.title }}</view>
        <view class="guide-description-modern">{{ currentStepInfo.content }}</view>
        
        <!-- ç±»å‹æ ‡è¯† -->
        <view wx:if="{{ currentStepInfo.type }}" class="guide-type-badge type-{{ currentStepInfo.type }}">
          <text wx:if="{{ currentStepInfo.type === 'welcome' }}">æ¬¢è¿</text>
          <text wx:if="{{ currentStepInfo.type === 'feature' }}">åŠŸèƒ½ä»‹ç»</text>
          <text wx:if="{{ currentStepInfo.type === 'benefit' }}">æ ¸å¿ƒä¼˜åŠ¿</text>
          <text wx:if="{{ currentStepInfo.type === 'discovery' }}">åŠŸèƒ½å‘ç°</text>
          <text wx:if="{{ currentStepInfo.type === 'advanced' }}">é«˜çº§åŠŸèƒ½</text>
        </view>
      </view>
    </view>
    
    <!-- åº•éƒ¨æ“ä½œåŒºåŸŸ -->
    <view class="guide-actions-modern">
      <!-- è·³è¿‡æŒ‰é’® -->
      <view class="guide-btn-secondary" bind:tap="skipGuide">
        <text class="btn-text">è·³è¿‡å¼•å¯¼</text>
      </view>
      
      <!-- ä¸»è¦æ“ä½œæŒ‰é’® -->
      <view class="guide-btn-primary" bind:tap="nextStep">
        <text class="btn-text">
          {{ currentStep >= totalSteps - 1 ? 'å¼€å§‹ä½¿ç”¨' : 'ä¸‹ä¸€æ­¥' }}
        </text>
        <text class="btn-icon">{{ currentStep >= totalSteps - 1 ? 'ğŸš€' : 'â†’' }}</text>
      </view>
    </view>
    
    <!-- åº•éƒ¨è£…é¥°çº¿ -->
    <view class="guide-decoration-line"></view>
  </view>
  
  <!-- èƒŒæ™¯è£…é¥°å…ƒç´  -->
  <view class="guide-bg-decoration">
    <view class="decoration-circle circle-1"></view>
    <view class="decoration-circle circle-2"></view>
    <view class="decoration-circle circle-3"></view>
  </view>
</view>
<view class="modern-container">
  <!-- ç°ä»£åŒ–é¡µé¢å¤´éƒ¨ -->
  <view class="modern-header">
    <!-- é¢åŒ…å±‘å¯¼èˆª -->
    <view class="modern-breadcrumb">
      <view class="modern-breadcrumb-item">CCARè§„ç« </view>
      <view class="modern-breadcrumb-separator">></view>
      <view class="modern-breadcrumb-item">è§„èŒƒæ€§æ–‡ä»¶</view>
      <view class="modern-breadcrumb-separator">></view>
      <view class="modern-breadcrumb-item modern-breadcrumb-current">
        {{ regulationTitle || docNumber }}
      </view>
    </view>
    
    <!-- å¤´éƒ¨å†…å®¹ -->
    <view class="modern-header-content">
      <view class="modern-header-left">
        <view class="modern-header-title">è§„èŒƒæ€§æ–‡ä»¶</view>
        <view class="modern-header-subtitle">{{ regulationTitle || docNumber }}</view>
      </view>
      
      <!-- æœ‰æ•ˆæ€§ç­›é€‰æ§ä»¶ -->
      <view class="modern-filter-controls">
        <view 
          class="modern-filter-button {{ validityFilter === 'all' ? 'active' : '' }}"
          bind:tap="onFilterChange"
          data-filter="all"
        >
          å…¨éƒ¨
        </view>
        <view 
          class="modern-filter-button success {{ validityFilter === 'valid' ? 'active' : '' }}"
          bind:tap="onFilterChange"
          data-filter="valid"
        >
          æœ‰æ•ˆ
        </view>
        <view 
          class="modern-filter-button error {{ validityFilter === 'invalid' ? 'active' : '' }}"
          bind:tap="onFilterChange"
          data-filter="invalid"
        >
          å¤±æ•ˆ
        </view>
      </view>
    </view>
  </view>

  <!-- ç°ä»£åŒ–æœç´¢åŒºåŸŸ -->
  <view class="modern-search-section">
    <view class="modern-search-container">
      <van-search
        value="{{ searchKeyword }}"
        placeholder="æœç´¢æ–‡ä»¶åç§°ã€ç¼–å·æˆ–å‘å¸ƒæ—¥æœŸ"
        use-action-slot
        bind:change="onSearchInput"
        bind:search="onSearchInput"
        class="modern-search-input"
      >
        <view slot="action" class="search-action">æœç´¢</view>
      </van-search>
    </view>
  </view>

  <!-- ç°ä»£åŒ–è§„èŒƒæ€§æ–‡ä»¶åˆ—è¡¨ -->
  <view class="modern-card-container">
    <view wx:if="{{ filteredNormatives.length === 0 && !loading }}" class="modern-empty-state fade-in">
      <view class="modern-empty-icon">ğŸ“„</view>
      <view class="modern-empty-text">æš‚æ— ç›¸å…³è§„èŒƒæ€§æ–‡ä»¶</view>
      <view class="modern-empty-hint">è¯¥è§„ç« å¯èƒ½è¿˜æ²¡æœ‰é…å¥—çš„è§„èŒƒæ€§æ–‡ä»¶ï¼Œæˆ–å°è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶</view>
    </view>

    <view wx:else class="modern-card-list fade-in">
      <view 
        wx:for="{{ filteredNormatives }}" 
        wx:key="id"
        class="modern-card-item hover-lift bounce-click"
      >
        <!-- æœ‰æ•ˆæ€§å¾½ç«  - å³ä¸Šè§’ä½ç½® -->
        <view class="modern-validity-badge {{ item.validity === 'æœ‰æ•ˆ' ? 'valid' : 'invalid' }}">
          {{ item.validity }}
        </view>
        
        <view class="modern-card-main" bind:tap="onFileDetail" data-normative="{{ item }}">
          <!-- å¡ç‰‡å¤´éƒ¨ -->
          <view class="modern-card-header">
            <view class="modern-card-number success">{{ item.doc_number }}</view>
          </view>
          
          <!-- æ–‡ä»¶æ ‡é¢˜ -->
          <view class="modern-card-title">{{ item.title }}</view>
          
          <!-- å¡ç‰‡å…ƒä¿¡æ¯ -->
          <view class="modern-card-meta">
            <view class="modern-card-meta-item">{{ item.publish_date }}</view>
          </view>
          
          <!-- å¡ç‰‡åº•éƒ¨ä¿¡æ¯ -->
          <view class="modern-card-footer">{{ item.office_unit }}</view>
        </view>
        
        <!-- å¡ç‰‡æ“ä½œåŒºåŸŸ -->
        <view class="modern-card-actions">
          <view 
            class="modern-action-button primary bounce-click"
            bind:tap="onCopyLink"
            data-normative="{{ item }}"
          >
            <van-icon name="link" size="16" />
            <text style="margin-left: 4rpx;">å¤åˆ¶</text>
          </view>
          <view 
            class="modern-action-button success bounce-click"
            bind:tap="onFileDetail"
            data-normative="{{ item }}"
          >
            <van-icon name="info-o" size="16" />
            <text style="margin-left: 4rpx;">è¯¦æƒ…</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç°ä»£åŒ–ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="modern-stats-footer">
    <view class="modern-stats-text">
      å½“å‰æ˜¾ç¤º {{ filteredNormatives.length }} / {{ normatives.length }} ä¸ªè§„èŒƒæ€§æ–‡ä»¶
      <text wx:if="{{ validityFilter !== 'all' }}">
        ï¼ˆ{{ validityFilter === 'valid' ? 'æœ‰æ•ˆ' : 'å¤±æ•ˆ' }}æ–‡ä»¶ï¼‰
      </text>
    </view>
  </view>
</view>

<van-toast id="van-toast" />
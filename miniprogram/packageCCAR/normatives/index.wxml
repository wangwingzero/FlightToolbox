<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-title">è§„èŒƒæ€§æ–‡ä»¶</view>
    <view class="header-subtitle">{{ regulationTitle || docNumber }}</view>
  </view>

  <!-- æœç´¢æ  -->
  <view class="search-section">
    <van-search
      value="{{ searchKeyword }}"
      placeholder="æœç´¢æ–‡ä»¶åç§°ã€ç¼–å·æˆ–å‘å¸ƒæ—¥æœŸ"
      use-action-slot
      bind:change="onSearchInput"
      bind:search="onSearchInput"
    >
      <view slot="action" class="search-action">æœç´¢</view>
    </van-search>
  </view>

  <!-- è§„èŒƒæ€§æ–‡ä»¶åˆ—è¡¨ -->
  <view class="normatives-content">
    <view wx:if="{{ filteredNormatives.length === 0 && !loading }}" class="empty-state">
      <view class="empty-icon">ğŸ“„</view>
      <view class="empty-text">æš‚æ— ç›¸å…³è§„èŒƒæ€§æ–‡ä»¶</view>
      <view class="empty-hint">è¯¥è§„ç« å¯èƒ½è¿˜æ²¡æœ‰é…å¥—çš„è§„èŒƒæ€§æ–‡ä»¶</view>
    </view>

    <view wx:else class="normatives-list">
      <view 
        wx:for="{{ filteredNormatives }}" 
        wx:key="id"
        class="normative-item"
      >
        <view class="normative-main" bind:tap="onFileDetail" data-normative="{{ item }}">
          <view class="normative-title">{{ item.title }}</view>
          <view class="normative-meta">
            <view class="normative-number">{{ item.doc_number }}</view>
            <view class="normative-date">{{ item.publish_date }}</view>
          </view>
          <view class="normative-info">
            <view class="normative-office">{{ item.office_unit }}</view>
            <view class="normative-status {{ item.validity === 'æœ‰æ•ˆ' ? 'status-valid' : 'status-invalid' }}">
              {{ item.validity }}
            </view>
          </view>
        </view>
        <view class="normative-actions">
          <view 
            class="copy-button"
            bind:tap="onCopyLink"
            data-normative="{{ item }}"
          >
            <van-icon name="link" size="18" />
            <text>å¤åˆ¶é“¾æ¥</text>
          </view>
          <view 
            class="detail-button"
            bind:tap="onFileDetail"
            data-normative="{{ item }}"
          >
            <van-icon name="info-o" size="18" />
            <text>è¯¦æƒ…</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-footer">
    <view class="stats-text">
      å½“å‰æ˜¾ç¤º {{ filteredNormatives.length }} / {{ normatives.length }} ä¸ªè§„èŒƒæ€§æ–‡ä»¶
    </view>
  </view>
</view>

<van-toast id="van-toast" />
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-title">{{ subcategory || 'è§„ç« åˆ—è¡¨' }}</view>
    <view class="header-subtitle">{{ category }}</view>
  </view>

  <!-- æœç´¢æ  -->
  <view class="search-section">
    <van-search
      value="{{ searchKeyword }}"
      placeholder="æœç´¢è§„ç« ç¼–å·ã€æ ‡é¢˜æˆ–è´Ÿè´£å¸å±€"
      use-action-slot
      bind:change="onSearchInput"
      bind:search="onSearchInput"
    >
      <view slot="action" class="search-action">æœç´¢</view>
    </van-search>
  </view>

  <!-- è§„ç« åˆ—è¡¨ -->
  <view class="regulations-content">
    <view wx:if="{{ filteredRegulations.length === 0 && !loading }}" class="empty-state">
      <view class="empty-icon">ğŸ“‹</view>
      <view class="empty-text">æš‚æ— ç›¸å…³è§„ç« </view>
      <view class="empty-hint">å°è¯•æ›´æ¢æœç´¢å…³é”®è¯</view>
    </view>

    <view wx:else class="regulations-list">
      <view 
        wx:for="{{ filteredRegulations }}" 
        wx:key="doc_number"
        class="regulation-item" 
        bind:tap="onRegulationClick"
        data-regulation="{{ item }}"
      >
        <view class="regulation-main">
          <view class="regulation-number">{{ item.doc_number }}</view>
          <view class="regulation-title">{{ item.title }}</view>
          <view class="regulation-meta">
            <view class="regulation-office">{{ item.office_unit }}</view>
            <view class="regulation-status {{ item.validity === 'æœ‰æ•ˆ' ? 'status-valid' : 'status-invalid' }}">
              {{ item.validity }}
            </view>
          </view>
        </view>
        <view class="regulation-actions">
          <view 
            class="copy-button"
            bind:tap="onCopyLink"
            data-regulation="{{ item }}"
          >
            <van-icon name="link" size="18" />
            <text>å¤åˆ¶é“¾æ¥</text>
          </view>
          <view class="arrow-icon">
            <van-icon name="arrow" />
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-footer">
    <view class="stats-text">
      å½“å‰æ˜¾ç¤º {{ filteredRegulations.length }} / {{ regulations.length }} ä¸ªè§„ç« 
    </view>
  </view>
</view>

<van-toast id="van-toast" />
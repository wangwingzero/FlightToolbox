<!-- éª¨æ¶å± - 100mså†…æ˜¾ç¤ºï¼Œæ•°æ®åŠ è½½å®Œæˆåéšè— -->
<skeleton-screen type="grid" loading="{{pageLoading}}" grid-count="{{8}}" />

<view class="container page-content" wx:if="{{!pageLoading}}">
  <!-- ç»éªŒå€¼å¥–åŠ±å¡ç‰‡ - ä»…åœ¨æ”¯æŒæ¿€åŠ±è§†é¢‘å¹¿å‘Šçš„è®¾å¤‡ä¸Šæ˜¾ç¤º -->
  <view wx:if="{{ rewardedVideoAdSupported && !hasWatchedToday }}" class="exp-reward-card">
    <!-- ä¸»ä½“å†…å®¹åŒº -->
    <view class="exp-reward-main">
      <view class="exp-reward-icon">ğŸ¯</view>
      <view class="exp-reward-info">
        <view class="exp-reward-title">{{ adCopyTitle }}</view>
        <view class="exp-reward-desc">{{ adCopyDesc }}</view>
      </view>
    </view>
    
    <!-- æ“ä½œåŒº -->
    <view class="exp-reward-footer">
      <button
        wx:if="{{ rewardedVideoAdLoaded }}"
        class="exp-reward-button"
        bind:tap="showRewardedVideoAd"
        hover-class="none">
        <text class="button-icon">â–¶</text>
        <text class="button-text">çœ‹è§†é¢‘é¢†ç»éªŒ</text>
      </button>
      <view wx:else class="loading-hint">
        <view class="loading-dot"></view>
        <view class="loading-dot"></view>
        <view class="loading-dot"></view>
        <text class="loading-text">åŠ è½½ä¸­</text>
      </view>
    </view>
  </view>

  <!-- å·²é¢†å–ç»éªŒå€¼çŠ¶æ€ -->
  <view wx:if="{{ rewardedVideoAdSupported && hasWatchedToday }}" class="exp-reward-card exp-claimed">
    <view class="exp-claimed-content">
      <view class="exp-claimed-icon">{{ adCopyIcon }}</view>
      <view class="exp-claimed-info">
        <view class="exp-claimed-title">{{ adCopyTitle }}</view>
        <view class="exp-claimed-desc">æ˜å¤©è¿˜å¯ä»¥ç»§ç»­é¢†å–å“¦~</view>
      </view>
    </view>
  </view>

  <!-- èµ„æ–™æŸ¥è¯¢å¡ç‰‡ç½‘æ ¼ - æŒ‰ä½¿ç”¨é¢‘ç‡è‡ªåŠ¨æ’åº -->
  <view class="categories-grid">
    <block wx:for="{{ displayCategories }}" wx:key="id">
      <!-- æ­£å¸¸å¡ç‰‡ -->
      <view
        class="category-card theme-{{ item.themeColor }}"
        bind:tap="onCategoryClick"
        data-category="{{ item }}"
      >
        <view class="category-icon">{{ item.icon }}</view>
        <view class="category-content">
          <view class="category-title">{{ item.title }}</view>
          <view class="category-desc">{{ item.description }}</view>
        </view>
        <!-- ç§¯åˆ†æ ‡ç­¾ï¼ˆå³ä¸Šè§’ï¼‰ -->
        <view class="category-points" wx:if="{{ item.pointsText }}">
          <van-tag type="{{ item.pointsType }}" size="mini">{{ item.pointsText }}</van-tag>
        </view>
        <!-- æ•°æ®é‡æ ‡ç­¾ï¼ˆåº•éƒ¨ï¼‰ -->
        <view class="category-count">
          <van-tag type="{{ item.countType || 'primary' }}" size="medium">{{ item.count }}</van-tag>
        </view>
      </view>
    </block>
  </view>
</view>

<van-toast id="van-toast" />
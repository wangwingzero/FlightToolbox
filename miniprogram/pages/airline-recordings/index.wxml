<view class="container">
  <!-- é¡¶éƒ¨å¼•å¯¼åŒºåŸŸ -->
  <view class="guide-section">
    <view class="guide-header">
      <text class="guide-emoji" aria-label="è€³æœºå›¾æ ‡">ğŸ§</text>
      <text class="guide-title">èˆªçº¿å½•éŸ³å­¦ä¹ </text>
    </view>
    <text class="guide-subtitle">é€‰æ‹©å›½å®¶åœ°åŒºï¼Œè†å¬çœŸå®é™†ç©ºé€šè¯</text>
    <view class="stats-row" role="region" aria-label="ç»Ÿè®¡æ•°æ®">
      <view class="stat-item">
        <text class="stat-number">338</text>
        <text class="stat-label">æ®µå½•éŸ³</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-number">15</text>
        <text class="stat-label">ä¸ªå›½å®¶</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-number">5</text>
        <text class="stat-label">å¤§æ´²</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢æ  -->
  <view class="search-section">
    <view class="search-input-wrapper">
      <text class="search-icon" aria-label="æœç´¢å›¾æ ‡">ğŸ”</text>
      <input
        class="search-input"
        type="text"
        placeholder="æœç´¢å›½å®¶ã€åœ°åŒºæˆ–æœºåœº"
        value="{{ searchKeyword }}"
        bindinput="onSearchInput"
        confirm-type="search"
        bindconfirm="onSearchConfirm"
        aria-label="æœç´¢è¾“å…¥æ¡†"
      />
      <text wx:if="{{ searchKeyword }}" class="clear-icon" bind:tap="clearSearch" aria-label="æ¸…é™¤æœç´¢">âœ•</text>
    </view>

    <!-- æœç´¢ç»“æœæç¤º -->
    <view wx:if="{{ searchKeyword && filteredRegionsCount >= 0 }}" class="search-result-tip" role="status" aria-live="polite">
      <text class="result-icon" aria-label="æˆåŠŸå›¾æ ‡">âœ“</text>
      <text class="result-text">æ‰¾åˆ° {{ filteredRegionsCount }} ä¸ªç»“æœ</text>
    </view>
  </view>

  <!-- å›½å®¶/åœ°åŒºé€‰æ‹© -->
  <view class="regions-wrapper">
    <view wx:for="{{ displayedRegions }}" wx:key="id" class="continent-section">
      <!-- å¤§æ´²æ ‡é¢˜å¡ç‰‡ - å¯ç‚¹å‡»å±•å¼€/æŠ˜å  -->
      <view class="continent-card" bind:tap="toggleContinent" data-continent-id="{{item.id}}" role="button" aria-label="{{item.name}}ï¼Œ{{item.regionCount}}ä¸ªå›½å®¶ï¼Œ{{item.totalCount}}æ®µå½•éŸ³ï¼Œç‚¹å‡»{{expandedContinents[item.id] ? 'æ”¶èµ·' : 'å±•å¼€'}}">
        <view class="continent-header">
          <view class="continent-icon-wrapper">
            <text class="continent-emoji" aria-label="{{item.name}}å›¾æ ‡">{{item.icon}}</text>
          </view>
          <view class="continent-info">
            <text class="continent-title">{{item.name}}</text>
            <text class="continent-meta">{{item.regionCount}} ä¸ªå›½å®¶ â€¢ {{item.totalCount}} æ®µå½•éŸ³</text>
          </view>
        </view>
        <!-- å±•å¼€/æŠ˜å æŒ‡ç¤ºå™¨ -->
        <view class="expand-indicator {{ expandedContinents[item.id] ? 'expanded' : 'collapsed' }}">
          <text class="expand-text">{{ expandedContinents[item.id] ? 'æ”¶èµ·' : 'å±•å¼€' }}</text>
          <text class="expand-arrow" aria-hidden="true">â–¼</text>
        </view>
      </view>
      
      <!-- å›½å®¶å¡ç‰‡åˆ—è¡¨ - æ ¹æ®å±•å¼€çŠ¶æ€æ˜¾ç¤º/éšè— -->
      <view wx:if="{{ expandedContinents[item.id] }}" class="country-list" role="list">
        <view wx:for="{{item.regions}}" wx:for-item="region" wx:key="id"
          class="country-card {{region.hasRealRecordings ? 'available' : 'unavailable'}}"
          bind:tap="{{region.hasRealRecordings ? 'selectRegion' : 'showComingSoon'}}"
          data-region="{{region.id}}"
          role="listitem"
          aria-label="{{region.name}}ï¼Œ{{region.airport}}ï¼Œ{{region.count}}æ®µå½•éŸ³ï¼Œ{{region.hasRealRecordings ? 'å¯ç”¨ï¼Œç‚¹å‡»è¿›å…¥' : 'å³å°†ä¸Šçº¿'}}">

          <view class="country-main">
            <!-- å›½æ——å›¾æ ‡ -->
            <view class="flag-container">
              <text class="country-flag" aria-label="{{region.name}}å›½æ——">{{region.flag}}</text>
              <view wx:if="{{region.hasRealRecordings}}" class="ready-badge">
                <text class="badge-text">å¯ç”¨</text>
              </view>
            </view>

            <!-- å›½å®¶ä¿¡æ¯ -->
            <view class="country-details">
              <text class="country-name">{{region.name}}</text>
              <view class="country-meta">
                <text class="meta-icon" aria-hidden="true">âœˆï¸</text>
                <text class="meta-text">{{region.airport}}</text>
              </view>
              <view class="country-stats">
                <text class="stats-text">{{region.count}} æ®µå½•éŸ³</text>
              </view>
            </view>
          </view>

          <!-- æ“ä½œæŒ‰é’® -->
          <view class="action-button {{region.hasRealRecordings ? 'active' : 'disabled'}}" aria-label="{{region.hasRealRecordings ? 'æ’­æ”¾' : 'å·²é”å®š'}}">
            <text class="button-icon" aria-hidden="true">{{region.hasRealRecordings ? 'â–¶' : 'ğŸ”’'}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨å¹¿å‘Š -->
  <view wx:if="{{ !isAdFree }}" class="ad-section">
    <ad unit-id="adunit-4e68875624a88762" ad-intervals="30"></ad>
  </view>
  
  <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
  <view class="safe-area-bottom"></view>
</view>
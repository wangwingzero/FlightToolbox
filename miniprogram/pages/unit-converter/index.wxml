<points-header 
  page-type="unit-converter"
  bind:points-consumed="onPointsConsumed"
  bind:points-insufficient="onPointsInsufficient"
  bind:signin-success="onSignInSuccess"
  bind:ad-reward="onAdReward"
/>

<view class="container">
  <van-tabs active="{{ activeTab }}" bind:change="onTabChange" color="#ff4444" line-width="40px">
    <!-- 距离换算 -->
    <van-tab title="距离" name="distance">
      <van-cell-group title="距离换算">
        <van-field
          value="{{ distanceValues.meter }}"
          label="米 (m)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onDistanceInput"
          data-unit="meter"
          input-align="right"
        />
        <van-field
          value="{{ distanceValues.kilometer }}"
          label="千米 (km)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onDistanceInput"
          data-unit="kilometer"
          input-align="right"
        />
        <van-field
          value="{{ distanceValues.nauticalMile }}"
          label="海里 (nm)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onDistanceInput"
          data-unit="nauticalMile"
          input-align="right"
        />
        <van-field
          value="{{ distanceValues.mile }}"
          label="英里 (mi)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onDistanceInput"
          data-unit="mile"
          input-align="right"
        />
        <van-field
          value="{{ distanceValues.foot }}"
          label="英尺 (ft)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onDistanceInput"
          data-unit="foot"
          input-align="right"
        />
        <van-field
          value="{{ distanceValues.inch }}"
          label="英寸 (in)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onDistanceInput"
          data-unit="inch"
          input-align="right"
        />
        <van-cell class="button-cell">
          <van-button type="primary" block bind:click="convertDistance">换算</van-button>
        </van-cell>
        <van-cell class="button-cell">
          <van-button type="default" block bind:click="clearDistance">清空</van-button>
        </van-cell>
      </van-cell-group>
    </van-tab>



    <!-- QFE计算 -->
    <van-tab title="QFE" name="qfe">
      <van-cell-group title="基础参数">
        <van-field
          value="{{ elevationInput }}"
          label="机场标高"
          placeholder="请输入机场标高"
          type="digit"
          bind:change="onElevationInputChange"
        >
          <view slot="right-icon">英尺</view>
        </van-field>
      </van-cell-group>

      <van-cell-group title="QNH → QFE">
        <van-field
          value="{{ qnhInput }}"
          label="QNH"
          placeholder="请输入QNH"
          type="digit"
          bind:change="onQNHInputChange"
        >
          <view slot="right-icon">hPa</view>
        </van-field>
        
        <van-cell class="button-cell">
          <van-button type="primary" bind:click="convertQNHtoQFE" block>
            计算QFE
          </van-button>
        </van-cell>
        
        <van-cell wx:if="{{ qfeResult }}" title="QFE" value="{{ qfeResult }} hPa" />
      </van-cell-group>
      
      <van-cell-group title="QFE → QNH">
        <van-field
          value="{{ qfeInput }}"
          label="QFE"
          placeholder="请输入QFE"
          type="digit"
          bind:change="onQFEInputChange"
        >
          <view slot="right-icon">hPa</view>
        </van-field>
        
        <van-cell class="button-cell">
          <van-button type="primary" bind:click="convertQFEtoQNH" block>
            计算QNH
          </van-button>
        </van-cell>
        
        <van-cell wx:if="{{ qnhResult }}" title="QNH" value="{{ qnhResult }} hPa" />
      </van-cell-group>

      <van-cell-group title="操作">
        <van-cell class="button-cell">
          <van-button type="default" block bind:click="clearQFE">
            清空QFE数据
          </van-button>
        </van-cell>
      </van-cell-group>
    </van-tab>

    <!-- 速度换算 -->
    <van-tab title="速度" name="speed">
      <van-cell-group title="速度换算">
        <van-field
          value="{{ speedValues.meterPerSecond }}"
          label="米/秒 (m/s)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onSpeedInput"
          data-unit="meterPerSecond"
          input-align="right"
        />
        <van-field
          value="{{ speedValues.kilometerPerHour }}"
          label="千米/时 (km/h)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onSpeedInput"
          data-unit="kilometerPerHour"
          input-align="right"
        />
        <van-field
          value="{{ speedValues.knot }}"
          label="海里/时 (kn)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onSpeedInput"
          data-unit="knot"
          input-align="right"
        />
        <van-cell class="button-cell">
          <van-button type="primary" block bind:click="convertSpeed">换算</van-button>
        </van-cell>
        <van-cell class="button-cell">
          <van-button type="default" block bind:click="clearSpeed">清空</van-button>
        </van-cell>
      </van-cell-group>
    </van-tab>



    <!-- ISA计算 -->
    <van-tab title="ISA" name="isa">
      <van-cell-group title="ISA标准大气温度计算">
        <van-field
          value="{{ isaAltitude }}"
          label="高度"
          placeholder="请输入高度"
          type="digit"
          bind:change="onIsaAltitudeChange"
        >
          <view slot="right-icon">英尺</view>
        </van-field>
        
        <van-field
          value="{{ isaOAT }}"
          label="外界空气温度"
          placeholder="支持负数，如-15（可选）"
          type="text"
          bind:input="onTemperatureNumberInput"
          bind:change="onIsaOATChange"
        >
          <view slot="right-icon">°C</view>
        </van-field>
        
        <van-cell class="button-cell">
          <van-button type="primary" bind:click="calculateISA" block>
            计算ISA温度
          </van-button>
        </van-cell>
        
        <van-cell wx:if="{{ isaStandardTemp }}" title="ISA标准温度" value="{{ isaStandardTemp }}°C" />
        <van-cell wx:if="{{ isaDeviation }}" title="温度偏差" value="{{ isaDeviation }}" />
      </van-cell-group>
    </van-tab>

    <!-- 温度换算 -->
    <van-tab title="温度" name="temperature">
      <van-cell-group title="温度换算">
        <van-field
          value="{{ temperatureValues.celsius }}"
          label="摄氏度 (°C)"
          placeholder="支持负数，如-10"
          type="text"
          bind:input="onTemperatureNumberInput"
          bind:change="onTemperatureInput"
          data-unit="celsius"
          input-align="right"
        />
        <van-field
          value="{{ temperatureValues.fahrenheit }}"
          label="华氏度 (°F)"
          placeholder="支持负数，如-5"
          type="text"
          bind:input="onTemperatureNumberInput"
          bind:change="onTemperatureInput"
          data-unit="fahrenheit"
          input-align="right"
        />
        <van-field
          value="{{ temperatureValues.kelvin }}"
          label="开尔文 (K)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onTemperatureInput"
          data-unit="kelvin"
          input-align="right"
        />
        <van-cell class="button-cell">
          <van-button type="primary" block bind:click="convertTemperature">换算</van-button>
        </van-cell>
        <van-cell class="button-cell">
          <van-button type="default" block bind:click="clearTemperature">清空</van-button>
        </van-cell>
      </van-cell-group>
    </van-tab>

    <!-- 重量换算 -->
    <van-tab title="重量" name="weight">
      <van-cell-group title="重量换算">
        <van-field
          value="{{ weightValues.gram }}"
          label="克 (g)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onWeightInput"
          data-unit="gram"
          input-align="right"
        />
        <van-field
          value="{{ weightValues.kilogram }}"
          label="千克 (kg)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onWeightInput"
          data-unit="kilogram"
          input-align="right"
        />
        <van-field
          value="{{ weightValues.pound }}"
          label="磅 (lb)"
          placeholder="请输入数值"
          type="digit"
          bind:change="onWeightInput"
          data-unit="pound"
          input-align="right"
        />
        <van-cell class="button-cell">
          <van-button type="primary" block bind:click="convertWeight">换算</van-button>
        </van-cell>
        <van-cell class="button-cell">
          <van-button type="default" block bind:click="clearWeight">清空</van-button>
        </van-cell>
      </van-cell-group>
    </van-tab>
  </van-tabs>
</view>

<van-toast id="van-toast" /> 
<!-- 万能查询通用详情页面 -->
<view class="container">
  <!-- 分享按钮 -->
  <view class="share-button-container">
    <view class="share-button" bindtap="onShare">
      <van-icon name="share" size="20px" />
      <text class="share-text">分享</text>
    </view>
  </view>

  <!-- 加载状态 -->
  <view class="loading-container" wx:if="{{ loading }}">
    <van-loading type="spinner" color="#6366f1" size="24px" />
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 缩写详情内容 -->
  <view class="detail-content" wx:if="{{ !loading && type === 'abbreviation' && item }}">
    <view class="content-card">
      <view class="detail-section">
        <view class="detail-label">简缩字</view>
        <view class="detail-value abbreviation-value">{{ item.abbreviation }}</view>
      </view>
      
      <view class="detail-section english-content">
        <view class="detail-label">英文全称</view>
        <view class="detail-value">{{ item.english_full }}</view>
      </view>
      
      <view class="detail-section">
        <view class="detail-label">中文翻译</view>
        <view class="detail-value">{{ item.chinese_translation }}</view>
      </view>
      
      <view wx:if="{{ item.is_icao }}" class="detail-section icao-content">
        <view class="detail-label">标准类型</view>
        <view class="detail-badges">
          <van-tag type="primary" size="medium">ICAO标准</van-tag>
        </view>
      </view>

      <view class="detail-section">
        <view class="detail-label">来源</view>
        <view class="detail-value">{{ item.is_icao ? 'ICAO国际民航组织' : '机型手册' }}</view>
      </view>
    </view>
  </view>

  <!-- 定义详情内容 -->
  <view class="detail-content" wx:if="{{ !loading && type === 'definition' && item }}">
    <view class="content-card">
      <view class="detail-section">
        <view class="detail-label">中文名称</view>
        <view class="detail-value definition-name">{{ item.chinese_name }}</view>
      </view>
      
      <view class="detail-section english-content">
        <view class="detail-label">英文名称</view>
        <view class="detail-value">{{ item.english_name }}</view>
      </view>
      
      <view wx:if="{{ item.definition }}" class="detail-section definition-content">
        <view class="detail-label">定义</view>
        <view class="detail-value definition-text">{{ item.definition }}</view>
      </view>
      
      <view class="detail-section">
        <view class="detail-label">来源</view>
        <view class="detail-value">{{ item.source }}</view>
      </view>

    </view>
  </view>

  <!-- 机场详情内容 -->
  <view class="detail-content" wx:if="{{ !loading && type === 'airport' && item }}">
    <view class="content-card">
      <view class="detail-section">
        <view class="detail-label">机场名称</view>
        <view class="detail-value airport-name">{{ item.ShortName }}</view>
      </view>
      
      <view class="detail-section english-content">
        <view class="detail-label">英文名称</view>
        <view class="detail-value">{{ item.EnglishName }}</view>
      </view>
      
      <view class="detail-section icao-content">
        <view class="detail-label">ICAO代码</view>
        <view class="detail-value code-value">{{ item.ICAOCode }}</view>
      </view>
      
      <view class="detail-section iata-content">
        <view class="detail-label">IATA代码</view>
        <view class="detail-value code-value">{{ item.IATACode }}</view>
      </view>
      
      <view class="detail-section">
        <view class="detail-label">所在地区</view>
        <view class="detail-value">{{ item.CountryName }}</view>
      </view>

      <view class="detail-section">
        <view class="detail-label">机场类型</view>
        <view class="detail-badges">
          <van-tag type="success" size="medium">国际机场</van-tag>
        </view>
      </view>
    </view>
  </view>

  <!-- 通信详情内容 -->
  <view class="detail-content" wx:if="{{ !loading && type === 'communication' && item }}">
    <view class="content-card">
      <view class="detail-section english-content">
        <view class="detail-label">英语用语</view>
        <view class="detail-value communication-english">{{ item.english }}</view>
      </view>
      
      <view class="detail-section">
        <view class="detail-label">中文含义</view>
        <view class="detail-value">{{ item.chinese }}</view>
      </view>
      
      <view class="detail-section">
        <view class="detail-label">所属章节</view>
        <view class="detail-value">{{ item.chapter }}</view>
      </view>
      
      <view class="detail-section">
        <view class="detail-label">分类</view>
        <view class="detail-value">{{ item.section }}</view>
      </view>

      <view class="detail-section">
        <view class="detail-label">用语类型</view>
        <view class="detail-badges">
          <van-tag 
            type="{{ item.section === '特情常用词汇' ? 'danger' : 'primary' }}" 
            size="medium"
          >
            {{ item.section === '特情常用词汇' ? '特情用语' : 'ICAO标准' }}
          </van-tag>
        </view>
      </view>

      <view class="detail-section">
        <view class="detail-label">来源</view>
        <view class="detail-value">{{ item.section === '特情常用词汇' ? '常用特情词汇整理' : 'ICAO英语900句' }}</view>
      </view>
    </view>
  </view>

  <!-- 规章详情内容 -->
  <view class="detail-content" wx:if="{{ !loading && type === 'regulation' && item }}">
    <view class="content-card">
      <!-- CCAR规章特殊样式 -->
      <view wx:if="{{ item.type === 'ccar' }}" class="ccar-regulation-header">
        <van-icon name="medal" size="24px" class="ccar-icon" />
        <view class="ccar-title">{{ item.title || item.doc_number }}</view>
        <view class="ccar-subtitle">中国民用航空规章第{{ item.doc_number.split('-')[1] }}部</view>
      </view>

      <view class="detail-section">
        <view class="detail-label">文档编号</view>
        <view class="detail-value regulation-number">{{ item.doc_number }}</view>
      </view>
      
      <view class="detail-section">
        <view class="detail-label">文档标题</view>
        <view class="detail-value">{{ item.title || (item.doc_number + ' - 未知标题') }}</view>
      </view>

      <view class="detail-section">
        <view class="detail-label">有效状态</view>
        <view class="detail-badges">
          <van-tag 
            type="{{ item.is_effective ? 'success' : 'default' }}" 
            size="medium"
          >
            {{ item.is_effective ? '有效' : '已失效' }}
          </van-tag>
        </view>
      </view>
      
      <view wx:if="{{ item.office_unit }}" class="detail-section">
        <view class="detail-label">办文单位</view>
        <view class="detail-value">{{ item.office_unit }}</view>
      </view>
      
      <view wx:if="{{ item.sign_date }}" class="detail-section">
        <view class="detail-label">成文日期</view>
        <view class="detail-value">{{ item.sign_date }}</view>
      </view>
      
      <view wx:if="{{ item.publish_date }}" class="detail-section">
        <view class="detail-label">发文日期</view>
        <view class="detail-value">{{ item.publish_date }}</view>
      </view>

      <view wx:if="{{ item.file_number }}" class="detail-section">
        <view class="detail-label">文件字号</view>
        <view class="detail-value">{{ item.file_number }}</view>
      </view>

      <view class="detail-section">
        <view class="detail-label">主题分类</view>
        <view class="detail-value">规范性文件</view>
      </view>

      <!-- 操作按钮 -->
      <view class="action-section">
        <van-button 
          type="primary" 
          size="normal" 
          class="copy-link-button"
          bind:tap="onCopyRegulationLink"
          data-url="{{ item.url }}"
          data-title="{{ item.title || (item.doc_number + ' - 未知标题') }}"
          data-doc-number="{{ item.doc_number }}"
        >
          <van-icon name="link-o" size="16px" />
          复制规章链接
        </van-button>
      </view>
    </view>
  </view>

  <!-- 无数据状态 -->
  <view class="empty-container" wx:if="{{ !loading && !item }}">
    <van-empty description="未找到相关信息" />
    <van-button 
      type="primary" 
      size="normal" 
      class="back-button-empty"
      bind:tap="onBack"
    >
      返回查询
    </van-button>
  </view>
</view>
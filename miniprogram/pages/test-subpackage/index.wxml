<!--åˆ†åŒ…ä¿®å¤æµ‹è¯•é¡µé¢-->
<view class="container">
  <view class="header">
    <text class="title">ğŸ§ª åˆ†åŒ…ä¿®å¤æµ‹è¯•</text>
    <text class="subtitle">éªŒè¯è·¨åˆ†åŒ…requireä¿®å¤æ•ˆæœ</text>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{isLoading}}" class="loading">
    <text>ğŸ” æ­£åœ¨æµ‹è¯•åˆ†åŒ…åŠ è½½...</text>
  </view>

  <!-- æµ‹è¯•æ‘˜è¦ -->
  <view wx:else class="summary">
    <view class="summary-item">
      <text class="label">æ€»åˆ†åŒ…æ•°:</text>
      <text class="value">{{summary.total}}</text>
    </view>
    <view class="summary-item">
      <text class="label">æˆåŠŸåŠ è½½:</text>
      <text class="value success">{{summary.success}}</text>
    </view>
    <view class="summary-item">
      <text class="label">åŠ è½½å¤±è´¥:</text>
      <text class="value {{summary.failed > 0 ? 'error' : 'success'}}">{{summary.failed}}</text>
    </view>
  </view>

  <!-- æµ‹è¯•ç»“æœåˆ—è¡¨ -->
  <view wx:if="{{!isLoading}}" class="results">
    <view class="section-title">ğŸ“‹ è¯¦ç»†ç»“æœ</view>
    
    <view 
      wx:for="{{testResults}}" 
      wx:key="packageName" 
      class="result-item {{item.exists ? 'success' : 'error'}}"
      bindtap="onViewDetail"
      data-index="{{index}}"
    >
      <view class="result-header">
        <text class="package-name">{{item.packageName}}</text>
        <text class="status">{{item.exists ? 'âœ…' : 'âŒ'}}</text>
      </view>
      
      <view class="result-details">
        <text class="data-file">{{item.dataFile}}</text>
        <text wx:if="{{item.dataPreview && item.dataPreview.length}}" class="data-count">
          {{item.dataPreview.length}}æ¡æ•°æ®
        </text>
      </view>
      
      <view wx:if="{{item.error}}" class="error-message">
        <text>{{item.error}}</text>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="actions">
    <button 
      class="retry-btn" 
      bindtap="onRetryTest"
      disabled="{{isLoading}}"
    >
      ğŸ”„ é‡æ–°æµ‹è¯•
    </button>
  </view>

  <!-- è¯´æ˜ä¿¡æ¯ -->
  <view class="info">
    <text class="info-title">ğŸ“ ä¿®å¤è¯´æ˜</text>
    <text class="info-text">
      æœ¬æ¬¡ä¿®å¤å°†subpackage-debug.jsä¸­çš„åŒæ­¥requireæ”¹ä¸ºå¼‚æ­¥requireï¼Œ
      è§£å†³äº†"Requires without a callback may fail in production"è­¦å‘Šã€‚
    </text>
    <text class="info-text">
      å¦‚æœæ‰€æœ‰åˆ†åŒ…æ˜¾ç¤ºâœ…ï¼Œè¯´æ˜ä¿®å¤æˆåŠŸï¼Œè­¦å‘Šå·²æ¶ˆé™¤ã€‚
    </text>
  </view>
</view>
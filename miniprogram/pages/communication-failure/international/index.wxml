<view class="container" data-theme="{{ isDarkMode ? 'dark' : 'light' }}">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-title">ğŸŒ å›½é™…é€šä¿¡å¤±æ•ˆç¨‹åº</view>
    <view class="header-subtitle">{{ procedureData.document || 'Doc 4444 - ç©ºä¸­èˆªè¡ŒæœåŠ¡ç¨‹åº' }}</view>
  </view>

  <!-- å¿«é€Ÿæ“ä½œæ  -->
  <view class="quick-actions">
    <view class="action-btn" bind:tap="setTransponder">
      <text class="action-icon">ğŸ“¡</text>
      <text class="action-text">è®¾ç½®7600</text>
    </view>
    <view class="action-btn" bind:tap="copyProcedure">
      <text class="action-icon">ğŸ“‹</text>
      <text class="action-text">å¤åˆ¶ç¨‹åº</text>
    </view>
  </view>

  <!-- ä¸€èˆ¬ç¨‹åº -->
  <view class="section-card">
    <view class="section-title">
      <text class="section-icon">ğŸ“¡</text>
      <text class="section-text">ä¸€èˆ¬ç¨‹åº</text>
    </view>
    <view class="content-box">
      <view class="procedure-step">
        <view class="step-number">ğŸ“¡</view>
        <view class="step-content">
          <view class="step-title">åº”ç­”æœºç¼–ç </view>
          <view class="step-description">{{ procedureData.general_procedures.transponder_code }}</view>
        </view>
      </view>
      <view class="procedure-step">
        <view class="step-number">ğŸ“¶</view>
        <view class="step-content">
          <view class="step-title">ADS-B/ADS-C</view>
          <view class="step-description">{{ procedureData.general_procedures.ads_b_ads_c }}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç®¡åˆ¶éƒ¨é—¨è¡ŒåŠ¨ -->
  <view class="section-card">
    <view class="section-title">
      <text class="section-icon">ğŸ¢</text>
      <text class="section-text">ç®¡åˆ¶éƒ¨é—¨è¡ŒåŠ¨</text>
    </view>
    <view class="content-box">
      <view wx:for="{{ procedureData.action_by_atc }}" wx:key="index" class="atc-action-item">
        <view class="action-number">{{ index + 1 }}</view>
        <view class="action-content">{{ item }}</view>
      </view>
    </view>
  </view>

  <!-- èˆªç©ºå™¨è¡ŒåŠ¨ -->
  <view class="section-card">
    <view class="section-title">
      <text class="section-icon">âœˆï¸</text>
      <text class="section-text">èˆªç©ºå™¨è¡ŒåŠ¨</text>
    </view>
    <view class="content-box">
      <!-- æ°”è±¡æ¡ä»¶é€‰æ‹© -->
      <view class="weather-tabs">
        <view class="tab-item {{ selectedWeather === 'vmc' ? 'active' : '' }}" 
              bind:tap="selectWeather" data-type="vmc">
          <text class="tab-text">VMCæ¡ä»¶</text>
        </view>
        <view class="tab-item {{ selectedWeather === 'imc' ? 'active' : '' }}" 
              bind:tap="selectWeather" data-type="imc">
          <text class="tab-text">IMCæ¡ä»¶</text>
        </view>
      </view>

      <!-- VMCæ¡ä»¶ç¨‹åº -->
      <view wx:if="{{ selectedWeather === 'vmc' }}" class="weather-content">
        <view class="weather-title">{{ procedureData.action_by_aircraft.vfr_conditions.description }}</view>
        <view class="steps-list">
          <view wx:for="{{ procedureData.action_by_aircraft.vfr_conditions.steps }}" 
                wx:key="index" class="step-item">
            <view class="step-bullet">{{ index + 1 }}</view>
            <view class="step-text">{{ item }}</view>
          </view>
        </view>
      </view>

      <!-- IMCæ¡ä»¶ç¨‹åº -->
      <view wx:if="{{ selectedWeather === 'imc' }}" class="weather-content">
        <view class="weather-title">{{ procedureData.action_by_aircraft.imc_conditions.description }}</view>
        
        <!-- é€Ÿåº¦å’Œé«˜åº¦å±‚ -->
        <view class="imc-section">
          <view class="imc-subtitle">é€Ÿåº¦å’Œé«˜åº¦å±‚</view>
          <view class="separation-tabs">
            <view class="separation-tab {{ selectedSeparation === 'procedural' ? 'active' : '' }}" 
                  bind:tap="selectSeparation" data-type="procedural">
              <text class="tab-text">ç¨‹åºé—´éš”</text>
            </view>
            <view class="separation-tab {{ selectedSeparation === 'surveillance' ? 'active' : '' }}" 
                  bind:tap="selectSeparation" data-type="surveillance">
              <text class="tab-text">ATSç›‘è§†</text>
            </view>
          </view>
          
          <view wx:if="{{ selectedSeparation === 'procedural' }}" class="separation-content">
            <view class="separation-description">
              {{ procedureData.action_by_aircraft.imc_conditions.steps.speed_and_level.procedural_separation }}
            </view>
          </view>
          
          <view wx:if="{{ selectedSeparation === 'surveillance' }}" class="separation-content">
            <view class="separation-description">
              {{ procedureData.action_by_aircraft.imc_conditions.steps.speed_and_level.ats_surveillance }}
            </view>
          </view>
        </view>

        <!-- èˆªè·¯ -->
        <view class="imc-section">
          <view class="imc-subtitle">èˆªè·¯</view>
          <view class="imc-description">
            {{ procedureData.action_by_aircraft.imc_conditions.steps.route }}
          </view>
        </view>

        <!-- ä¸‹é™å’Œè¿›è¿‘ -->
        <view class="imc-section">
          <view class="imc-subtitle">ä¸‹é™å’Œè¿›è¿‘</view>
          <view class="imc-description">
            {{ procedureData.action_by_aircraft.imc_conditions.steps.descent_and_approach }}
          </view>
        </view>

        <!-- ç€é™† -->
        <view class="imc-section">
          <view class="imc-subtitle">ç€é™†</view>
          <view class="imc-description">
            {{ procedureData.action_by_aircraft.imc_conditions.steps.landing }}
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å…³é”®æé†’ -->
  <view class="key-reminders">
    <view class="reminder-title">ğŸ”” å…³é”®æé†’</view>
    <view class="reminder-list">
      <view class="reminder-item">
        <text class="reminder-icon">âš ï¸</text>
        <text class="reminder-text">ç«‹å³è®¾ç½®åº”ç­”æœºç¼–ç  Aæ¨¡å¼ 7600</text>
      </view>
      <view class="reminder-item">
        <text class="reminder-icon">ğŸ“¡</text>
        <text class="reminder-text">å°è¯•é€šè¿‡æ•°æ®é“¾ç­‰æ‰‹æ®µæ¢å¤é€šä¿¡</text>
      </view>
      <view class="reminder-item">
        <text class="reminder-icon">ğŸ•</text>
        <text class="reminder-text">IMCæ¡ä»¶ä¸‹æ³¨æ„æ—¶é—´è¦æ±‚ï¼ˆ7åˆ†é’Ÿæˆ–20åˆ†é’Ÿï¼‰</text>
      </view>
      <view class="reminder-item">
        <text class="reminder-icon">ğŸ›¬</text>
        <text class="reminder-text">åœ¨é¢„è®¡åˆ°è¾¾æ—¶é—´30åˆ†é’Ÿå†…ç€é™†</text>
      </view>
    </view>
  </view>

</view>
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-title">ğŸ•Œ ä¸­ä¸œåœ°åŒºé€šä¿¡å·®å¼‚</view>
    <view class="header-subtitle">Middle East Communication Failure Procedures</view>
  </view>

  <!-- æ¨ªå¹…å¹¿å‘Š -->
  <view class="ad-container">
    <ad unit-id="adunit-3a1bf3800fa937a2" ad-intervals="30" bindload="adLoad" binderror="adError" bindclose="adClose"></ad>
  </view>

  <!-- å›½å®¶é€‰æ‹© -->
  <view class="section-card">
    <view class="section-title">
      <text class="section-icon">ğŸŒ</text>
      <text class="section-text">{{ isEnglish ? 'Select Country Procedures' : 'é€‰æ‹©å…·ä½“å›½å®¶ç¨‹åº' }}</text>
    </view>
    <view class="content-box">
      <view class="country-tabs">
        <view wx:for="{{ countryList }}" 
              wx:key="key"
              wx:for-item="country"
              class="country-tab {{ selectedCountry === country.key ? 'active' : '' }}" 
              bind:tap="selectCountry" 
              data-country="{{ country.key }}">
          <text class="country-flag">{{ country.flag }}</text>
          <text class="country-name">{{ isEnglish ? country.region_name_en : country.region_name_cn }}</text>
        </view>
      </view>

      <!-- è¯­è¨€åˆ‡æ¢å™¨ -->
      <view class="language-switcher">
        <view class="lang-btn {{ !isEnglish ? 'active' : '' }}" bind:tap="selectChinese">ä¸­æ–‡</view>
        <view class="lang-btn {{ isEnglish ? 'active' : '' }}" bind:tap="selectEnglish">English</view>
      </view>

      <!-- é€‰ä¸­å›½å®¶çš„å…·ä½“ç¨‹åº -->
      <view wx:if="{{ selectedCountryData }}" class="country-procedures">
        <view class="country-header">
          <text class="country-flag-large">{{ selectedCountryData.flag }}</text>
          <view class="country-info">
            <text class="country-name-cn">{{ isEnglish ? selectedCountryData.region_name_en : selectedCountryData.region_name_cn }}</text>
            <text class="country-name-en">{{ isEnglish ? selectedCountryData.region_name_cn : selectedCountryData.region_name_en }}</text>
          </view>
        </view>

        <!-- ICAOå·®å¼‚ -->
        <view class="icao-differences">
          <view class="diff-section-title">{{ isEnglish ? 'ICAO Differences' : 'ICAOå·®å¼‚è¯´æ˜' }}</view>
          <view class="diff-text">{{ isEnglish ? selectedCountryData.icao_differences.en : selectedCountryData.icao_differences.cn }}</view>
        </view>

        <!-- å…·ä½“ç¨‹åºæ­¥éª¤ -->
        <view class="procedures-list">
          <view class="procedures-title">{{ isEnglish ? 'Procedures' : 'å…·ä½“æ‰§è¡Œç¨‹åº' }}</view>
          <view wx:for="{{ selectedCountryData.procedures }}" 
                wx:key="index"
                wx:for-item="procedure"
                class="procedure-step">
            <view class="step-number">{{ index + 1 }}</view>
            <view class="step-content">
              <view class="step-text">{{ isEnglish ? procedure.en : procedure.cn }}</view>
            </view>
          </view>
        </view>
      </view>

      <!-- æœªé€‰æ‹©å›½å®¶æ—¶çš„æç¤º -->
      <view wx:if="{{ !selectedCountry }}" class="select-prompt">
        <text class="prompt-icon">ğŸ‘†</text>
        <text class="prompt-text">{{ isEnglish ? 'Please select a country above to view procedures' : 'è¯·é€‰æ‹©ä¸Šæ–¹å›½å®¶æŸ¥çœ‹å…·ä½“ç¨‹åº' }}</text>
      </view>
    </view>
  </view>

</view>
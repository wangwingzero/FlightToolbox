<view class="container" data-theme="light">
  <!-- å›½å®¶æ ‡é¢˜ -->
  <view class="country-header">
    <view class="flag-section">
      <text class="country-flag">{{ countryData.flag }}</text>
      <view class="country-names">
        <text class="country-name-cn">{{ countryData.region_name_cn }}</text>
        <text class="country-name-en">{{ countryData.region_name_en }}</text>
      </view>
    </view>
    <view class="complexity-indicator complexity-{{ countryData.complexity }}">
      {{ countryData.complexityText }}
    </view>
  </view>

  <!-- å…³é”®å·®å¼‚ä¿¡æ¯ -->
  <view class="key-info-section">
    <view class="info-title">âš ï¸ å…³é”®é€šä¿¡å·®å¼‚</view>
    <view class="differences-card">
      <view class="diff-content">
        <view wx:if="{{ language === 'cn' }}">
          <text class="diff-text">{{ countryData.icao_differences.cn }}</text>
        </view>
        <view wx:else>
          <text class="diff-text">{{ countryData.icao_differences.en }}</text>
        </view>
      </view>
      
      <!-- è¯­è¨€åˆ‡æ¢ -->
      <view class="language-toggle">
        <view class="toggle-btn {{ language === 'cn' ? 'active' : '' }}" 
              bind:tap="switchLanguage" 
              data-lang="cn">ä¸­æ–‡</view>
        <view class="toggle-btn {{ language === 'en' ? 'active' : '' }}" 
              bind:tap="switchLanguage" 
              data-lang="en">English</view>
      </view>
    </view>
  </view>

  <!-- å…·ä½“ç¨‹åºæ­¥éª¤ -->
  <view class="procedures-section">
    <view class="procedures-title">ğŸ“‹ å…·ä½“æ‰§è¡Œç¨‹åº</view>
    
    <view wx:for="{{ countryData.procedures }}" 
          wx:key="index" 
          wx:for-item="procedure"
          class="procedure-card">
      
      <view class="procedure-header">
        <text class="procedure-number">{{ index + 1 }}</text>
        <text class="procedure-type">{{ procedure.type || 'é€šç”¨ç¨‹åº' }}</text>
      </view>
      
      <view class="procedure-content">
        <view wx:if="{{ language === 'cn' && procedure.cn }}">
          <text class="procedure-text">{{ procedure.cn }}</text>
        </view>
        <view wx:elif="{{ procedure.en }}">
          <text class="procedure-text">{{ procedure.en }}</text>
        </view>
        <view wx:else>
          <text class="procedure-text no-data">æš‚æ— è¯¥è¯­è¨€ç‰ˆæœ¬</text>
        </view>
      </view>

      <!-- å¦‚æœæœ‰å…·ä½“é¢‘ç‡æˆ–æ—¶é—´è¦æ±‚ -->
      <view wx:if="{{ procedure.frequency || procedure.time_requirement }}" class="procedure-details">
        <view wx:if="{{ procedure.frequency }}" class="detail-item">
          <text class="detail-label">ğŸ“¡ é¢‘ç‡ï¼š</text>
          <text class="detail-value">{{ procedure.frequency }}</text>
        </view>
        <view wx:if="{{ procedure.time_requirement }}" class="detail-item">
          <text class="detail-label">â±ï¸ æ—¶é—´ï¼š</text>
          <text class="detail-value">{{ procedure.time_requirement }}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ³¨æ„äº‹é¡¹ -->
  <view wx:if="{{ countryData.procedures && countryData.procedures.length > 0 }}" class="notes-section">
    <view class="notes-title">ğŸ’¡ é‡è¦æé†’</view>
    <view class="notes-content">
      <text class="notes-text">â€¢ ä»¥ä¸Šç¨‹åºä»…ä¾›å‚è€ƒï¼Œå®é™…æ“ä½œæ—¶è¯·éµå¾ªå½“åœ°ATCæŒ‡ä»¤</text>
      <text class="notes-text">â€¢ å»ºè®®åœ¨èˆªå‰å‡†å¤‡é˜¶æ®µä»”ç»†ç ”è¯»ç›¸å…³ç¨‹åº</text>
      <text class="notes-text">â€¢ å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»ç›¸å…³èˆªç©ºå½“å±€è·å–æœ€æ–°ä¿¡æ¯</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{ !countryData.region_name_cn }}" class="loading-wrapper">
    <text class="loading-text">æ­£åœ¨åŠ è½½å›½å®¶æ•°æ®...</text>
  </view>
</view>
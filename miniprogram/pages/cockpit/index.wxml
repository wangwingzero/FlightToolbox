<view class="cockpit-container">
  <!-- æ ‡é¢˜æ  -->
  <view class="cockpit-header">
    <view class="gps-status" wx:if="{{gpsStatus}}">
      <view class="gps-status-main">
        <text class="status-text {{gpsInterference || gpsSpoofing ? 'status-interference' : gpsStatusClass}}">
          GPS: {{gpsStatus || 'æ— ä¿¡å·'}}
        </text>
        <!-- GPSæ¬ºéª—ç›‘æ§å¼€å…³ -->
        <view class="gps-spoofing-switch">
          <text class="spoofing-switch-label">GPSæ¬ºéª—ç›‘æ§</text>
          <switch class="spoofing-switch-control" checked="{{spoofingDetectionEnabled}}" bindchange="onSpoofingDetectionToggle" color="#00ff88" />
        </view>
      </view>
      
      
      <!-- GPSæ¬ºéª—è­¦å‘Š -->
      <view wx:if="{{gpsSpoofing && spoofingDetectionEnabled}}" class="spoofing-warning">
        <van-icon name="warning-o" size="16px" color="#ff0000" />
        <text class="warning-text">æ£€æµ‹åˆ°GPSæ¬ºéª— {{firstSpoofingTime}}</text>
      </view>
      
      <!-- åŸæœ‰GPSå¹²æ‰°è­¦å‘Š -->
      <view wx:if="{{gpsInterference}}" class="interference-warning">
        <van-icon name="warning-o" size="16px" color="#ff3333" />
        <text class="warning-text">æ£€æµ‹åˆ°GPSå¹²æ‰°</text>
      </view>
      <view wx:if="{{lastInterferenceTime && !gpsInterference}}" class="interference-history">
        <text class="history-text">ä¸Šæ¬¡å¹²æ‰°: {{lastInterferenceTime}}</text>
      </view>
    </view>
  </view>
  
  <!-- æƒé™é”™è¯¯æç¤º -->
  <view wx:if="{{locationError}}" class="error-container">
    <van-icon name="location-o" size="60px" color="#999" />
    <text class="error-text">{{locationError}}</text>
    <view class="error-actions">
      <van-button type="primary" size="small" bind:click="openSetting">æ‰“å¼€è®¾ç½®</van-button>
      <van-button wx:if="{{isOffline || isOfflineMode}}" type="default" size="small" bind:click="startSimulatedMode">ç»§ç»­ä½¿ç”¨</van-button>
    </view>
  </view>
  
  <!-- ä»ªè¡¨ç›˜ä¸»ä½“ -->
  <view wx:else class="instruments-container">
    <!-- å§¿æ€ä»ªæ˜¾ç¤º - ç‹¬ç«‹æ§åˆ¶ -->
    <view class="attitude-instrument" hidden="{{!showAttitudeIndicator}}">
      <!-- Gridå¸ƒå±€å®¹å™¨ -->
      <view class="attitude-instrument__grid">
        <!-- å·¦ä¸Šè§’åˆå§‹æŒ‰é’® -->
        <view class="attitude-control-button attitude-control-button--default" 
              bindtap="onAttitudeInitialTap">
          <text class="attitude-control-text">åˆå§‹</text>
        </view>
        
        
        <!-- å·¦ä¾§ä¿¯ä»°è§’æ˜¾ç¤º -->
        <view class="attitude-instrument__left">
          <view class="attitude-instrument__panel attitude-instrument__panel--pitch">
            <text class="attitude-instrument__label attitude-instrument__label--pitch">PITCH</text>
            <text class="attitude-instrument__value attitude-instrument__value--pitch {{pitch < 0 ? 'attitude-instrument__value--negative' : ''}}">{{pitch}}</text>
          </view>
        </view>
        
        <!-- ä¸­å¤®CanvasåŒºåŸŸ -->
        <view class="attitude-instrument__center">
          <canvas 
            type="2d"
            id="attitudeIndicator" 
            class="attitude-instrument__canvas">
          </canvas>
        </view>
        
        <!-- å³ä¾§å¡åº¦æ˜¾ç¤º -->
        <view class="attitude-instrument__right">
          <view class="attitude-instrument__panel attitude-instrument__panel--roll">
            <text class="attitude-instrument__label attitude-instrument__label--roll">ROLL</text>
            <text class="attitude-instrument__value attitude-instrument__value--roll {{roll < 0 ? 'attitude-instrument__value--negative' : ''}}">{{roll}}</text>
          </view>
        </view>
        
        <!-- å³ä¸Šè§’æ ¡å‡†æŒ‰é’® -->
        <view class="attitude-control-button attitude-control-button--reset" 
              bindtap="onAttitudeCalibrateTap">
          <text class="attitude-control-text">æ ¡å‡†</text>
        </view>
      </view>
    </view>
    
    <!-- ç¬¬ä¸€è¡Œï¼šé€Ÿåº¦å’Œé«˜åº¦ï¼ˆå«é™„å±ä»ªè¡¨ï¼‰ -->
    <view class="instruments-row">
      <!-- å·¦ä¾§ï¼šGPSåœ°é€ŸåŠåŠ é€Ÿåº¦ -->
      <view class="instrument-column">
        <view class="instrument speed-indicator">
          <view class="instrument-label">GPSåœ°é€Ÿ</view>
          <view class="instrument-value">
            <text class="value-number">{{speed === null || speed === undefined ? '--' : speed}}</text>
            <text class="value-unit">kt</text>
          </view>

        </view>
      </view>
      
      <!-- å³ä¾§ï¼šGPSé«˜åº¦åŠå‡é™ç‡ -->
      <view class="instrument-column">
        <view class="instrument altitude-indicator">
          <view class="instrument-label">GPSé«˜åº¦</view>
          <view class="instrument-value">
            <text class="value-number">{{altitude === null || altitude === undefined || !debugData.altitudeValid ? '--' : altitude}}</text>
            <text class="value-unit">ft</text>
          </view>

        </view>
      </view>
    </view>
    
    <!-- ç¬¬äºŒè¡Œï¼šèˆªå‘ -->
    <view class="instruments-row">
      <view class="instrument modern-heading-indicator">
        <!-- æ¨¡å¼åˆ‡æ¢å™¨ -->
        <view class="heading-mode-switcher" bindtap="toggleHeadingMode">
          <view class="mode-option {{headingMode === 'heading' ? 'active' : ''}}">
            <text class="mode-text">HDG</text>
          </view>
          <view class="mode-option {{headingMode === 'track' ? 'active' : ''}}">
            <text class="mode-text">TRK</text>
          </view>
        </view>
        
        <!-- ä¸»è¦æ•°å€¼æ˜¾ç¤º -->
        <view class="heading-main-display">
          <text class="heading-number">{{headingMode === 'heading' ? heading : track}}</text>
          <text class="heading-unit">Â°</text>
        </view>
        
        <!-- ä¿®å¤åçš„æ–¹å‘æŒ‡ç¤º -->
        <view class="direction-indicator">
          <text class="direction-text">{{headingMode === 'heading' ? 'èˆªå‘' : 'èˆªè¿¹'}}</text>
          <view class="direction-compass">
            <!-- å›ºå®šçš„ç½—ç›˜åˆ»åº¦ -->
            <view class="compass-dial">
              <view class="compass-directions">
                <text class="dir-n">N</text>
                <text class="dir-e">E</text>
                <text class="dir-s">S</text>
                <text class="dir-w">W</text>
              </view>
              
              <!-- åœ†å‘¨åˆ»åº¦çº¿ -->
              <view class="compass-ticks">
                <view wx:for="{{[0,30,60,90,120,150,180,210,240,270,300,330]}}" wx:key="item" 
                      class="tick-mark" 
                      style="transform: rotate({{item}}deg);">
                  <view class="tick-line"></view>
                </view>
              </view>
              
              <!-- èˆªå‘/èˆªè¿¹æ ‡è®° -->
              <view class="heading-marker" 
                    style="transform: rotate({{headingMode === 'heading' ? heading : track}}deg); transition: transform 0.3s ease-out;">
                <view class="marker-dot"></view>
              </view>
            </view>
            
            <!-- ä¸­å¿ƒç‚¹ -->
            <view class="compass-center"></view>
          </view>
        </view>
        

      </view>
    </view>
    
    
    <!-- GPSå¹²æ‰°æç¤ºåŒº -->
    <view wx:if="{{gpsInterference}}" class="interference-alert">
      <van-icon name="warning" size="40px" color="#ff3333" />
      <view class="alert-content">
        <text class="alert-title">âš ï¸ GPSå¹²æ‰°è­¦å‘Š</text>
        <text class="alert-desc">æ£€æµ‹åˆ°GPSä¿¡å·å¼‚å¸¸è·³å˜ï¼Œè¯·ä½¿ç”¨å…¶ä»–å¯¼èˆªå‚è€ƒ</text>
        <text class="alert-time">å‘ç”Ÿæ—¶é—´: {{lastInterferenceTime}}</text>
      </view>
    </view>
    
    <!-- æœºåœºä¿¡æ¯æ˜¾ç¤ºåŒºåŸŸ -->
    <view class="airports-info-section">
      <!-- å·¦ä¾§æœºåœº -->
      <view class="airport-info-card left" bindtap="onAirportCardTap" data-airport="{{leftAirport}}" data-type="left">
        <text wx:if="{{leftAirport}}" class="airport-code">{{leftAirport.ICAOCode}}</text>
        <text wx:else class="airport-code no-data">---</text>
        
        <text wx:if="{{leftAirport}}" class="airport-name">{{leftAirport.ShortName}}</text>
        <text wx:else class="airport-name no-data">æ— æœºåœº</text>
        
        <text wx:if="{{leftAirport}}" class="airport-distance">{{leftAirport.distance}} NM</text>
        <text wx:else class="airport-distance no-data">--- NM</text>
        
        <text wx:if="{{leftAirport}}" class="airport-bearing">{{leftAirport.bearing}}Â°</text>
        <text wx:else class="airport-bearing no-data">---Â°</text>
        
        <text class="airport-label">{{leftAirportLabel}}</text>
      </view>
      
      <!-- ä¸­é—´ç”¨æˆ·æŒ‡å®šæœºåœº -->
      <view class="airport-info-card center" bindtap="onAirportCardTap" data-airport="{{centerAirport}}" data-type="center">
        <text wx:if="{{centerAirport}}" class="airport-code">{{centerAirport.ICAOCode}}</text>
        <text wx:else class="airport-code no-data">---</text>
        
        <text wx:if="{{centerAirport}}" class="airport-name">{{centerAirport.ShortName}}</text>
        <text wx:else class="airport-name no-data">ç”¨æˆ·æŒ‡å®š</text>
        
        <text wx:if="{{centerAirport}}" class="airport-distance">{{centerAirport.distance}} NM</text>
        <text wx:else class="airport-distance no-data">--- NM</text>
        
        <text wx:if="{{centerAirport}}" class="airport-bearing">{{centerAirport.bearing}}Â°</text>
        <text wx:else class="airport-bearing no-data">---Â°</text>
        
        <text class="airport-label">æŒ‡å®šæœºåœº</text>
      </view>
      
      <!-- å³ä¾§æœºåœº -->
      <view class="airport-info-card right" bindtap="onAirportCardTap" data-airport="{{rightAirport}}" data-type="right">
        <text wx:if="{{rightAirport}}" class="airport-code">{{rightAirport.ICAOCode}}</text>
        <text wx:else class="airport-code no-data">---</text>
        
        <text wx:if="{{rightAirport}}" class="airport-name">{{rightAirport.ShortName}}</text>
        <text wx:else class="airport-name no-data">æ— æœºåœº</text>
        
        <text wx:if="{{rightAirport}}" class="airport-distance">{{rightAirport.distance}} NM</text>
        <text wx:else class="airport-distance no-data">--- NM</text>
        
        <text wx:if="{{rightAirport}}" class="airport-bearing">{{rightAirport.bearing}}Â°</text>
        <text wx:else class="airport-bearing no-data">---Â°</text>
        
        <text class="airport-label">{{rightAirportLabel}}</text>
      </view>
    </view>
    
    <!-- å¯¼èˆªåœ°å›¾å’Œå§¿æ€ä»ªå®¹å™¨ -->
    <view class="navigation-instruments-container">
      <!-- å¯¼èˆªåœ°å›¾æ˜¾ç¤º -->
      <view class="navigation-map-container" wx:if="{{!hideNavigationMap}}">
        <view class="map-header">
          <!-- å·¦ä¾§ï¼šGSæ˜¾ç¤ºå’ŒHæŒ‰é’® -->
          <view class="left-controls">
            <view class="gs-display">
              <text class="gs-label">GS</text>
              <text class="gs-value">{{speed === null || speed === undefined ? '--' : speed}}</text>
            </view>
            <view class="orientation-toggle" bindtap="toggleMapOrientation">
              <text class="orientation-text">{{mapOrientationMode === 'north-up' ? 'N' : 'H'}}</text>
            </view>
          </view>
          
          <!-- ä¸­é—´ï¼šè¿½è¸ªæœºåœºè¾“å…¥æ¡† -->
          <view class="track-airport-input">
            <input
              class="airport-input"
              type="text"
              placeholder="ICAO/IATA/æœºåœºå"
              value="{{trackAirportInput}}"
              bindinput="onTrackAirportInput"
              bindconfirm="onTrackAirportConfirm"
              maxlength="20"
            />
          </view>
          
          <!-- å³ä¾§ï¼šç¼©æ”¾æ§åˆ¶ -->
          <view class="right-controls">
            <view class="zoom-level-display" bindtap="showRangeSelector">
              <text class="zoom-level-text">{{mapRange}} NM</text>
              <van-icon name="arrow-down" size="12px" color="#fff" style="margin-left: 4rpx;" />
            </view>
          </view>
        </view>
        
        <view class="map-canvas-wrapper">
          <canvas 
            type="2d"
            id="navigationMap" 
            class="navigation-canvas"
            bindtouchstart="onMapTouchStart"
            bindtouchmove="onMapTouchMove"
            bindtouchend="onMapTouchEnd"
            bindtouchcancel="onMapTouchEnd">
          </canvas>
          
          <!-- åœ°å›¾ä¿¡æ¯å åŠ å±‚ -->
          <view class="map-overlay">
            <!-- æœºåœºä¿¡æ¯å·²ç§»è‡³ä¸Šæ–¹ç‹¬ç«‹æ˜¾ç¤º -->
          </view>
        </view>
      </view>
    </view>
      
    <!-- ç»çº¬åº¦æ˜¾ç¤º -->
    <view class="coordinates-display">
        <text class="coord-label">{{latitude}}</text>
        <text class="coord-divider">|</text>
        <text class="coord-label">{{longitude}}</text>
        <text class="coord-system" wx:if="{{showCoordinateSystem}}"> ({{coordinateSystemDisplay}})</text>
    </view>

    <!-- åœ°å›¾å›¾ä¾‹å·²åˆ é™¤ - é¿å…æ˜¾ç¤ºå¼‚å¸¸ -->

    <!-- æŸ¥çœ‹æœºåœºä¿¡æ¯æŒ‰é’® -->
    <view class="location-actions-container">
      <van-button 
        type="primary" 
        size="large"
        custom-class="airport-info-button"
        bind:click="viewAirportInfo"
        icon="location-o"
      >
        æŸ¥çœ‹æœºåœºä¿¡æ¯
      </van-button>
    </view>
    
    <!-- GPSæƒé™å’ŒAPIè°ƒè¯•é¢æ¿ -->
    <view class="debug-panel">
      <view class="debug-header" bindtap="toggleDebugPanel">
        <text class="debug-title">GPSæƒé™è°ƒè¯• {{debugPanelExpanded ? 'â–¼' : 'â–¶'}}</text>
      </view>
      
      <view wx:if="{{debugPanelExpanded}}" class="debug-content">
        <!-- æƒé™çŠ¶æ€ -->
        <view class="permission-status">
          <text class="section-title">ä½ç½®APIæƒé™çŠ¶æ€</text>
          
          <view class="api-item">
            <view class="api-name">wx.getLocation</view>
            <view class="api-status {{getLocationPermission ? 'status-granted' : 'status-denied'}}">
              {{getLocationPermission ? 'å·²æˆæƒ' : 'æœªæˆæƒ'}}
            </view>
          </view>
          
          <view class="api-item">
            <view class="api-name">wx.chooseLocation</view>
            <view class="api-status status-granted">å¯ç”¨</view>
          </view>
          
          <view class="api-item">
            <view class="api-name">wx.startLocationUpdate</view>
            <view class="api-status {{locationUpdateActive ? 'status-active' : 'status-inactive'}}">
              {{locationUpdateActive ? 'è¿è¡Œä¸­' : 'æœªå¯åŠ¨'}}
            </view>
          </view>
          
          <view class="api-item">
            <view class="api-name">wx.onLocationChange</view>
            <view class="api-status {{locationChangeListening ? 'status-active' : 'status-inactive'}}">
              {{locationChangeListening ? 'ç›‘å¬ä¸­' : 'æœªç›‘å¬'}}
            </view>
          </view>
        </view>
        
        <!-- å®æ—¶æ•°æ® -->
        <view class="realtime-data">
          <text class="section-title">å®æ—¶GPSæ•°æ®</text>
          
          <!-- ğŸ†• å®šä½ç±»å‹å’ŒçŠ¶æ€ -->
          <view class="data-group {{debugData.providerType === 'network' ? 'data-warning' : ''}}">
            <text class="data-label">å®šä½æä¾›å•†:</text>
            <text class="data-value">{{debugData.providerType || 'unknown'}} {{debugData.isGPSLocation ? '(GPS)' : '(ç½‘ç»œ)'}}</text>
          </view>
          
          <view class="data-group">
            <text class="data-label">å®šä½æ¨¡å¼:</text>
            <text class="data-value">{{debugData.isHighAccuracy ? 'é«˜ç²¾åº¦æ¨¡å¼' : 'æ™®é€šæ¨¡å¼'}}</text>
          </view>
          
          <view class="data-group">
            <text class="data-label">GPSè·å–å°è¯•:</text>
            <text class="data-value">{{debugData.gpsAttemptCount || 0}}/3æ¬¡ {{debugData.gpsStatus || ''}}</text>
          </view>
          
          <view class="data-group">
            <text class="data-label">åŸå§‹GPSé«˜åº¦:</text>
            <text class="data-value">{{debugData.rawAltitude !== null && debugData.rawAltitude !== undefined ? debugData.rawAltitude + 'm' : 'null'}} ({{debugData.altitudeType || 'unknown'}})</text>
          </view>
          
          <view class="data-group">
            <text class="data-label">æ˜¾ç¤ºé«˜åº¦:</text>
            <text class="data-value">{{altitude}}ft (æœ‰æ•ˆ: {{debugData.altitudeValid ? 'æ˜¯' : 'å¦'}})</text>
          </view>
          
          <view class="data-group">
            <text class="data-label">GPSç²¾åº¦:</text>
            <text class="data-value">{{debugData.accuracy || 0}}m</text>
          </view>
          
          <view class="data-group">
            <text class="data-label">æ›´æ–°é¢‘ç‡:</text>
            <text class="data-value">{{updateCount}}æ¬¡ ({{debugData.updateInterval || 0}}msé—´éš”)</text>
          </view>
          
          <view class="data-group">
            <text class="data-label">æœ€åæ›´æ–°:</text>
            <text class="data-value">{{debugData.lastUpdateTime || 'æœªæ›´æ–°'}}</text>
          </view>
          
          <view class="data-group">
            <text class="data-label">æ»¤æ³¢å™¨çŠ¶æ€:</text>
            <text class="data-value">{{debugData.filterType || 'æ— '}}</text>
          </view>
        </view>
        
        <!-- è°ƒè¯•æ“ä½œ -->
        <view class="debug-actions">
          <van-button size="small" type="primary" bind:click="testGetLocation">æµ‹è¯•getLocation</van-button>
          <van-button size="small" type="default" bind:click="testChooseLocation">æµ‹è¯•chooseLocation</van-button>
          <van-button size="small" type="{{locationUpdateActive ? 'danger' : 'info'}}" bind:click="toggleLocationUpdate">
            {{locationUpdateActive ? 'åœæ­¢' : 'å¼€å§‹'}}æŒç»­å®šä½
          </van-button>
          
          <!-- æƒé™ç®¡ç†æŒ‰é’® -->
          <van-button wx:if="{{!getLocationPermission || showGPSWarning}}" 
                      size="small" 
                      type="warning" 
                      bind:click="openSetting">
            æ‰“å¼€æƒé™è®¾ç½®
          </van-button>
          
          <!-- åˆ‡æ¢ç¦»çº¿æ¨¡å¼ -->
          <van-button size="small" 
                      type="{{isOfflineMode ? 'success' : 'default'}}" 
                      bind:click="toggleOfflineMode">
            {{isOfflineMode ? 'é€€å‡º' : 'è¿›å…¥'}}ç¦»çº¿æ¨¡å¼
          </van-button>
          
          <!-- æœºåœºæ•°æ®ç¼“å­˜ç®¡ç† -->
          <van-button size="small" 
                      type="warning" 
                      bind:click="clearAirportCache">
            æ¸…é™¤æœºåœºç¼“å­˜
          </van-button>
        </view>
      </view>
    </view>
  </view>
  
  <!-- è·ç¦»åœˆçº§åˆ«é€‰æ‹©å™¨ -->
  <van-action-sheet
    show="{{ showRangeSelector }}"
    actions="{{ rangeOptions }}"
    bind:close="onRangeSelectorClose"
    bind:select="onRangeSelect"
    title="é€‰æ‹©åœ°å›¾è·ç¦»åœˆèŒƒå›´"
    cancel-text="å–æ¶ˆ"
    z-index="99999"
  />
  
  <!-- GPSæ¬ºéª—æ£€æµ‹é…ç½®å¼¹çª— -->
  <view wx:if="{{ showSpoofingConfig }}" class="spoofing-modal-overlay" bindtap="closeSpoofingConfig">
    <view class="spoofing-modal-content" bindtap="stopPropagation">
    <view class="spoofing-config-container">
      <view class="config-header">
        <text class="config-title">GPSæ¬ºéª—ç›‘æ§è®¾ç½®</text>
        <view class="config-close" bindtap="closeSpoofingConfig">
          <van-icon name="cross" size="20px" color="#666" />
        </view>
      </view>
      
      <view class="config-content">
        <!-- ç›‘æ§æ€»å¼€å…³ -->
        <view class="config-item" catchtap="stopPropagation">
          <view class="item-label">
            <text class="label-text">å¯ç”¨GPSæ¬ºéª—ç›‘æ§</text>
            <text class="label-desc">å¼€å¯åå°†å®æ—¶ç›‘æ§GPSä¿¡å·å¼‚å¸¸</text>
          </view>
          <van-switch
            checked="{{ spoofingDetectionEnabled }}"
            bind:change="onSpoofingDetectionToggle"
            size="24px"
            active-color="#00ff88"
          />
        </view>
        
        <!-- æ£€æµ‹æ¨¡å¼é€‰æ‹© -->
        <view class="config-item" wx:if="{{spoofingDetectionEnabled}}" catchtap="stopPropagation">
          <view class="item-label">
            <text class="label-text">æ£€æµ‹æ¨¡å¼</text>
            <text class="label-desc">é€‰æ‹©é€‚åˆå½“å‰åœºæ™¯çš„æ£€æµ‹æ¨¡å¼</text>
          </view>
          <view class="mode-toggle-container">
            <view class="toggle-button {{spoofingMode === 'ground' ? 'active' : ''}}" 
                  catchtap="onModeToggle" data-mode="ground">
              <text class="toggle-text">åœ°é¢æ¨¡å¼</text>
            </view>
            <view class="toggle-button {{spoofingMode === 'airborne' ? 'active' : ''}}" 
                  catchtap="onModeToggle" data-mode="airborne">
              <text class="toggle-text">ç©ºä¸­æ¨¡å¼</text>
            </view>
          </view>
        </view>
        
        <!-- åœ°é¢æ¨¡å¼è®¾ç½® -->
        <view class="config-item" wx:if="{{spoofingDetectionEnabled && spoofingMode === 'ground'}}" catchtap="stopPropagation">
          <view class="item-label">
            <text class="label-text">å½“å‰æœºåœºæ ‡é«˜</text>
            <text class="label-desc">è®¾ç½®å½“å‰æœºåœºçš„æ ‡é«˜ï¼Œç”¨äºåœ°é¢æ¨¡å¼æ£€æµ‹</text>
          </view>
          <view class="elevation-input-container">
            <van-field
              value="{{ currentElevation }}"
              type="number"
              placeholder="è¯·è¾“å…¥æ ‡é«˜(è‹±å°º)"
              bind:change="onElevationChange"
              suffix="ft"
              border="{{ false }}"
            />
            <van-button 
              size="mini" 
              type="info" 
              bind:click="getNearestAirportElevation"
              loading="{{ loadingNearestElevation }}"
            >
              è·å–æœ€è¿‘æœºåœº
            </van-button>
          </view>
        </view>
        
        <!-- è¯­éŸ³æç¤ºå¼€å…³ -->
        <view class="config-item" wx:if="{{spoofingDetectionEnabled}}" catchtap="stopPropagation">
          <view class="item-label">
            <text class="label-text">è¯­éŸ³è­¦å‘Š</text>
            <text class="label-desc">æ£€æµ‹åˆ°æ¬ºéª—æ—¶æ’­æ”¾è¯­éŸ³æç¤º(æœ€å¤š3æ¬¡)</text>
          </view>
          <van-switch
            checked="{{ voiceAlertEnabled }}"
            bind:change="onVoiceAlertToggle"
            size="24px"
            active-color="#00ff88"
          />
        </view>
        
        <!-- å½“å‰çŠ¶æ€æ˜¾ç¤º - éšè—å†…éƒ¨è°ƒè¯•ä¿¡æ¯ -->
        <!-- 
        <view class="config-status" wx:if="{{spoofingDetectionEnabled}}">
          <view class="status-item">
            <text class="status-label">æ£€æµ‹çŠ¶æ€:</text>
            <text class="status-value {{gpsSpoofing ? 'status-warning' : 'status-normal'}}">
              {{gpsSpoofing ? 'æ£€æµ‹åˆ°æ¬ºéª—' : 'ä¿¡å·æ­£å¸¸'}}
            </text>
          </view>
          <view class="status-item" wx:if="{{firstSpoofingTime}}">
            <text class="status-label">é¦–æ¬¡æ£€æµ‹:</text>
            <text class="status-value">{{firstSpoofingTime}}</text>
          </view>
          <view class="status-item" wx:if="{{spoofingMode === 'ground'}}">
            <text class="status-label">å½“å‰é«˜åº¦å·®:</text>
            <text class="status-value">{{currentAltitudeDiff || 0}}ft</text>
          </view>
          <view class="status-item" wx:if="{{spoofingMode === 'airborne'}}">
            <text class="status-label">å½“å‰åœ°é€Ÿ:</text>
            <text class="status-value">{{speed || 0}}kt</text>
          </view>
        </view>
        -->
      </view>
      
      <view class="config-actions">
        <van-button 
          type="primary" 
          size="large" 
          bind:click="saveSpoofingConfig"
          block
        >
          ä¿å­˜è®¾ç½®
        </van-button>
      </view>
    </view>
    </view>
  </view>

  <!-- æ¨ªå¹…å¹¿å‘Š -->
  <view class="ad-banner-container">
    <ad unit-id="adunit-2f5afef0d27dc863" ad-type="banner" ad-intervals="30"></ad>
  </view>
</view>


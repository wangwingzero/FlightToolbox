<view class="{{ containerClass || 'container' }} page-content">
  <!-- 用户状态卡片 - 简化版本 -->
  <view class="user-status-card">
    <view class="status-header">
      <view class="user-avatar">
        <text class="emoji-icon">👨‍✈️</text>
        <view class="avatar-ring"></view>
      </view>
      <view class="user-info">
        <view class="greeting">{{ greeting }}</view>
      </view>
    </view>
  </view>

  <!-- 资质提醒卡片 -->
  <!-- 有资质数据时显示 -->
  <view wx:if="{{ qualifications.length > 0 }}" class="qualification-alert-card">
    <view class="alert-header">
      <view class="alert-icon">
        <text class="emoji-icon">🛡️</text>
      </view>
      <view class="alert-content">
        <text class="alert-title">资质提醒</text>
        <text class="alert-subtitle" wx:if="{{ expiringSoonCount > 0 }}">{{ expiringSoonCount }}项即将到期</text>
        <text class="alert-subtitle all-valid" wx:else>全部有效</text>
      </view>
      <view class="alert-action" bind:tap="openQualificationManager">
        <text class="emoji-icon">→</text>
      </view>
    </view>
    
    <scroll-view class="qualification-scroll" scroll-x="{{ true }}" show-scrollbar="{{ false }}">
      <view class="qualification-items">
        <view 
          wx:for="{{ qualifications }}" 
          wx:key="id"
          class="qualification-item qualification-{{ item.status }}"
          bind:tap="openQualificationManager"
        >
          <view class="qual-status-dot"></view>
          <view class="qual-content">
            <view class="qual-name">{{ item.name }}</view>
            <view class="qual-status">
              <text wx:if="{{ item.daysRemaining > 0 }}">{{ item.daysRemaining }}天后到期</text>
              <text wx:elif="{{ item.daysRemaining === 0 }}">今日到期</text>
              <text wx:else>已过期</text>
            </view>
          </view>
          <view class="qual-icon">
            <text class="emoji-icon">
              {{ item.status === 'expired' ? '❌' : item.status === 'warning' ? '⚠️' : '✅' }}
            </text>
          </view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 新用户空状态：引导使用资质管理 -->
  <view wx:else class="qualification-empty-state">
    <view class="empty-state-content">
      <view class="empty-state-icon">
        <text class="emoji-icon">📜</text>
        <view class="icon-sparkle">✨</view>
      </view>
      <view class="empty-state-text">
        <text class="empty-title">开始管理您的飞行资质</text>
        <text class="empty-subtitle">证照到期提醒，让飞行更安心</text>
      </view>
      <view class="empty-state-action" bind:tap="openQualificationManager">
        <text class="action-text">添加第一个资质</text>
        <text class="emoji-icon">→</text>
      </view>
    </view>
  </view>

  <!-- 工具分类区域 -->
  <view class="tools-categories feature-buttons">
    
    <!-- 飞行计算工具组 -->
    <view class="category-section">
      <view class="category-header">
        <view class="category-icon-wrapper">
          <view class="category-icon-bg flight-calc-bg">
            <text class="category-icon-emoji">✈️</text>
          </view>
        </view>
        <view class="category-info">
          <view class="category-title">飞行计算工具</view>
          <view class="category-desc">专业飞行算法，一站式解决方案</view>
        </view>
        <view class="category-badge">
          <van-tag type="primary" size="mini">精确计算</van-tag>
        </view>
      </view>
      <view class="category-grid">
        <view class="category-card flight-calc" bind:tap="openSunriseOnly">
          <view class="category-icon">🌅</view>
          <view class="category-title">日出日落</view>
          <view class="category-desc">时间查询</view>
          <view class="category-count">
            <van-tag type="primary" size="medium">精确计算</van-tag>
          </view>
        </view>
        <view class="category-card flight-calc" bind:tap="openSunriseSunset">
          <view class="category-icon">🌙</view>
          <view class="category-title">夜航时间</view>
          <view class="category-desc">夜间计算</view>
          <view class="category-count">
            <van-tag type="primary" size="medium">夜航专用</van-tag>
          </view>
        </view>
        <view class="category-card flight-calc" bind:tap="openFlightTimeShare">
          <view class="category-icon">⏰</view>
          <view class="category-title">分飞行时间</view>
          <view class="category-desc">计算分享</view>
          <view class="category-count">
            <van-tag type="primary" size="medium">智能分配</van-tag>
          </view>
        </view>
        <view class="category-card flight-calc" bind:tap="openLongFlightCrewRotation">
          <view class="category-icon">🔄</view>
          <view class="category-title">长航线换班</view>
          <view class="category-desc">机组换班计算</view>
          <view class="category-count">
            <van-tag type="primary" size="medium">轮班计算</van-tag>
          </view>
        </view>
      </view>
    </view>

    <!-- 安全管理工具组 -->
    <view class="category-section">
      <view class="category-header">
        <view class="category-icon-wrapper">
          <view class="category-icon-bg safety-bg">
            <text class="category-icon-emoji">🛡️</text>
          </view>
        </view>
        <view class="category-info">
          <view class="category-title">安全管理工具</view>
          <view class="category-desc">安全第一，规范操作，专业报告</view>
        </view>
        <view class="category-badge">
          <van-tag type="success" size="mini">安全保障</van-tag>
        </view>
      </view>
      <view class="category-grid">
        <view class="category-card safety" bind:tap="openEventReport">
          <view class="category-icon">📝</view>
          <view class="category-title">事件报告</view>
          <view class="category-desc">样例填写指导</view>
          <view class="category-count">
            <van-tag type="success" size="medium">规范操作</van-tag>
          </view>
        </view>
        <view class="category-card safety" bind:tap="openIncidentInvestigation">
          <view class="category-icon">🔍</view>
          <view class="category-title">事件调查</view>
          <view class="category-desc">征候事件查询</view>
          <view class="category-count">
            <van-tag type="success" size="medium">专业查询</van-tag>
          </view>
        </view>
      </view>
    </view>

    <!-- 个人管理工具组 -->
    <view class="category-section">
      <view class="category-header">
        <view class="category-icon-wrapper">
          <view class="category-icon-bg management-bg">
            <text class="category-icon-emoji">👨‍✈️</text>
          </view>
        </view>
        <view class="category-info">
          <view class="category-title">个人管理工具</view>
          <view class="category-desc">个性化定制，高效管理飞行生涯</view>
        </view>
        <view class="category-badge">
          <van-tag type="warning" size="mini">个性定制</van-tag>
        </view>
      </view>
      <view class="category-grid">
        <view class="category-card management" bind:tap="openPersonalChecklist">
          <view class="category-icon">✅</view>
          <view class="category-title">个人检查单</view>
          <view class="category-desc">自定义清单</view>
          <view class="category-count">
            <van-tag type="warning" size="medium">个性定制</van-tag>
          </view>
        </view>
        <view class="category-card management" bind:tap="openQualificationManager">
          <view class="category-icon">📜</view>
          <view class="category-title">资质管理</view>
          <view class="category-desc">证照管理</view>
          <view class="category-count">
            <van-tag type="warning" size="medium">到期提醒</van-tag>
          </view>
        </view>
      </view>
    </view>

    <!-- 健康与标准工具组 -->
    <view class="category-section">
      <view class="category-header">
        <view class="category-icon-wrapper">
          <view class="category-icon-bg health-bg">
            <text class="category-icon-emoji">🩺</text>
          </view>
        </view>
        <view class="category-info">
          <view class="category-title">健康与标准</view>
          <view class="category-desc">健康监测，权威标准，安全飞行</view>
        </view>
        <view class="category-badge">
          <van-tag type="danger" size="mini">健康保障</van-tag>
        </view>
      </view>
      <view class="category-grid">
        <view class="category-card health" bind:tap="openMedicalStandards">
          <view class="category-icon">📋</view>
          <view class="category-title">体检标准</view>
          <view class="category-desc">民航体检标准查询</view>
          <view class="category-count">
            <van-tag type="danger" size="medium">权威标准</van-tag>
          </view>
        </view>
        <view class="category-card health" bind:tap="openMedicalStandards" data-target="health">
          <view class="category-icon">🩺</view>
          <view class="category-title">健康管理</view>
          <view class="category-desc">健康标准，安全飞行</view>
          <view class="category-count">
            <van-tag type="danger" size="medium">健康监测</van-tag>
          </view>
        </view>
      </view>
    </view>

    <!-- 其他信息组 -->
    <view class="category-section">
      <view class="category-header">
        <view class="category-icon-wrapper">
          <view class="category-icon-bg special-bg">
            <text class="category-icon-emoji">ℹ️</text>
          </view>
        </view>
        <view class="category-info">
          <view class="category-title">其他信息</view>
          <view class="category-desc">应用信息，版本更新，意见反馈</view>
        </view>
        <view class="category-badge">
          <van-tag type="default" size="mini">信息中心</van-tag>
        </view>
      </view>
      <view class="category-grid">
        <view class="category-card support" bind:tap="showRewardAd">
          <view class="category-icon">💗</view>
          <view class="category-title">鼓励作者</view>
          <view class="category-desc">观看30秒广告支持</view>
          <view class="category-count">
            <van-tag type="danger" size="medium">❤️ 感谢支持</van-tag>
          </view>
        </view>
        <view class="category-card podcast" bind:tap="jumpToOfficialAccountFromCard">
          <view class="category-icon">🎵</view>
          <view class="category-title">飞行播客</view>
          <view class="category-desc">精品飞行音频节目</view>
          <view class="category-count">
            <van-tag type="primary" size="medium">🔊 创新学习</van-tag>
          </view>
        </view>
      </view>
    </view>

  </view>

  <!-- 关注公众号区域 - 已整合到卡片中，隐藏原区域 -->
  <!--
  <view class="category-section wechat-section">
    <view class="wechat-content">
      <view class="direct-jump-action">
        <van-button 
          type="primary" 
          size="normal"
          class="jump-button"
          bind:click="jumpToOfficialAccount">
          进入飞行播客
        </van-button>
      </view>
    
      <view class="qr-display">
        <image 
          class="qr-code-image" 
          src="/images/OfficialAccount.png"
          mode="aspectFit"
          bind:tap="previewQRCode"
          show-menu-by-longpress="{{true}}"
        />
        <text class="qr-hint">长按识别二维码关注"飞行播客"</text>
      </view>
    </view>
  </view>
  -->

  <!-- 应用信息卡片 -->
  <view class="app-info-card">
    <view class="info-header">
      <view class="info-icon">
        <text class="emoji-icon">ℹ️</text>
      </view>
      <text class="info-title">应用信息</text>
    </view>
    
    <van-cell-group class="info-group" border="{{ false }}">
      <van-cell 
        title="版本信息" 
        value="v2.0.0"
        icon="upgrade"
        class="info-cell"
        border="{{ false }}"
        bind:click="onVersionTap"
      />

      <van-cell 
        title="意见反馈" 
        is-link 
        bind:click="feedback"
        icon="chat-o"
        class="info-cell"
        border="{{ false }}"
      />
      <van-cell 
        title="关于作者" 
        is-link 
        bind:click="aboutUs"
        icon="contact"
        class="info-cell"
        border="{{ false }}"
      />
    </van-cell-group>
  </view>

  <!-- 应用信息卡片 -->
  <view class="warning-notice">
    <view class="warning-icon">
      <text class="emoji-icon">⚠️</text>
    </view>
    <view class="warning-content">
      本小程序旨在帮助飞行员学习航空理论知识，包括性能计算、概念理解、规章条例等内容。但请注意：所有计算逻辑均基于作者个人理解编写，可能存在错误且未经官方验证。因此，本小程序所有数据仅供学习参考，严禁用于实际飞行操作！
    </view>
  </view>

  <!-- 公众号二维码弹窗 - 简化版本 -->
  <van-popup
    show="{{ showQRCodeModal }}"
    bind:close="closeQRCodeModal"
    closeable="{{ true }}"
    close-icon-position="top-right"
    round="{{ true }}"
    custom-style="padding: 40rpx; background: #ffffff;"
  >
    <view class="qr-modal-content">
      <text class="modal-title">关注公众号</text>
      <view class="qr-container">
        <image 
          class="qr-modal-image" 
          src="/images/OfficialAccount.png"
          mode="aspectFit"
          bind:tap="previewQRCode"
        />
        <text class="qr-title">飞行播客</text>
        <text class="qr-modal-hint">长按识别二维码关注</text>
      </view>
    </view>
  </van-popup>
</view>
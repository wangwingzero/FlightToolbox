<view class="{{ containerClass || 'container' }} page-content">
  <!-- 用户状态卡片 - 简化版本 -->
  <view class="user-status-card">
    <view class="status-header">
      <view class="user-avatar" bind:tap="onAvatarTap">
        <text class="emoji-icon">👨‍✈️</text>
        <view class="avatar-ring"></view>
      </view>
      <view class="user-info">
        <view class="greeting">{{ greeting }}</view>
      </view>
    </view>
    
  </view>

  <!-- 资质提醒卡片 -->
  <!-- 有资质数据时显示 -->
  <view wx:if="{{ qualifications.length > 0 }}" class="qualification-alert-card">
    <view class="alert-header">
      <view class="alert-icon">
        <text class="emoji-icon">🛡️</text>
      </view>
      <view class="alert-content">
        <text class="alert-title">资质提醒</text>
        <text class="alert-subtitle" wx:if="{{ expiringSoonCount > 0 }}">{{ expiringSoonCount }}项即将到期</text>
        <text class="alert-subtitle all-valid" wx:else>全部有效</text>
      </view>
      <view class="alert-action" bind:tap="openQualificationManager">
        <text class="emoji-icon">→</text>
      </view>
    </view>
    
    <view class="qualification-items">
      <view
        wx:for="{{ qualifications }}"
        wx:key="id"
        class="qualification-item qualification-{{ item.status }}"
        bind:tap="openQualificationManager"
      >
        <view class="qual-status-dot"></view>
        <view class="qual-content">
          <view class="qual-name">{{ item.name }}</view>
          <view class="qual-status">
            <text wx:if="{{ item.daysRemaining > 0 }}">{{ item.daysRemaining }}天后到期</text>
            <text wx:elif="{{ item.daysRemaining === 0 }}">今日到期</text>
            <text wx:else>已过期{{ item.daysRemaining }}天</text>
          </view>
        </view>
        <view class="qual-icon">
          <text class="emoji-icon">
            {{ item.status === 'expired' ? '❌' : item.status === 'warning' ? '⚠️' : '✅' }}
          </text>
        </view>
      </view>
    </view>
  </view>

  <!-- 新用户空状态：引导使用资质管理 -->
  <view wx:else class="qualification-empty-state">
    <view class="empty-state-content">
      <view class="empty-state-icon">
        <text class="emoji-icon">📜</text>
        <view class="icon-sparkle">✨</view>
      </view>
      <view class="empty-state-text">
        <text class="empty-title">开始管理您的飞行资质</text>
        <text class="empty-subtitle">证照到期提醒，让飞行更安心</text>
      </view>
      <view class="empty-state-action" bind:tap="openQualificationManager">
        <text class="action-text">添加第一个资质</text>
        <text class="emoji-icon">→</text>
      </view>
    </view>
  </view>

  <!-- 工具卡片网格区域 -->
  <view class="tools-grid">
        <view class="category-card management" bind:tap="openPersonalChecklist">
          <view class="card-icon">✅</view>
          <view class="card-title">个人检查单</view>
          <view class="card-desc">创建和管理个人飞行检查清单</view>
          <view class="card-badge">
            <van-tag type="purple" size="medium">个性定制</van-tag>
          </view>
        </view>
        <view class="category-card flight-calc" bind:tap="openLongFlightCrewRotation">
          <view class="card-icon">🔄</view>
          <view class="card-title">长航线换班</view>
          <view class="card-desc">长途飞行机组轮班时间精确计算</view>
          <view class="card-badge">
            <van-tag type="warning" size="medium">轮班计算</van-tag>
          </view>
        </view>

        <view class="category-card flight-calc" bind:tap="openSunriseSunset">
          <view class="card-icon">🌙</view>
          <view class="card-title">夜航时间</view>
          <view class="card-desc">计算夜间飞行时间和民航夜间定义</view>
          <view class="card-badge">
            <van-tag type="warning" size="medium">夜航专用</van-tag>
          </view>
        </view>
        <view class="category-card flight-calc" bind:tap="openFlightTimeShare">
          <view class="card-icon">⏰</view>
          <view class="card-title">分飞行时间</view>
          <view class="card-desc">多机组成员飞行时间智能分配计算</view>
          <view class="card-badge">
            <van-tag type="warning" size="medium">智能分配</van-tag>
          </view>
        </view>
        <view class="category-card management" bind:tap="openQualificationManager">
          <view class="card-icon">📜</view>
          <view class="card-title">资质管理</view>
          <view class="card-desc">飞行证照到期时间管理提醒</view>
          <view class="card-badge">
            <van-tag type="purple" size="medium">到期提醒</van-tag>
          </view>
        </view>


        <view class="category-card safety" bind:tap="openEventReport">
          <view class="card-icon">📝</view>
          <view class="card-title">事件报告</view>
          <view class="card-desc">不安全事件报告样例填写指导</view>
          <view class="card-badge">
            <van-tag type="success" size="medium">规范操作</van-tag>
          </view>
        </view>


        <view class="category-card support {{supportCardHighlight ? 'highlight-pulse' : ''}}" bind:tap="showRewardAd">
          <view class="card-icon">💗</view>
          <view class="card-title">鼓励作者</view>
          <view class="card-desc">观看广告后增加200次使用</view>
          <view class="card-badge">
            <van-tag type="pink" size="medium">❤️ 感谢支持</van-tag>
          </view>
          <!-- 广告剩余点击次数 -->
          <view class="ad-counter">
            <text class="counter-number">{{ adClicksRemaining }}</text>
          </view>
        </view>
        <view class="category-card podcast" bind:tap="jumpToOfficialAccountFromCard">
          <view class="card-icon">🎵</view>
          <view class="card-title">飞行播客</view>
          <view class="card-desc">专业飞行知识音频节目分享</view>
          <view class="card-badge">
            <van-tag type="primary" size="medium">🔊 创新学习</van-tag>
          </view>
        </view>
  </view>

  <!-- 关注公众号区域 - 已整合到卡片中，隐藏原区域 -->
  <!--
  <view class="category-section wechat-section">
    <view class="wechat-content">
      <view class="direct-jump-action">
        <van-button 
          type="primary" 
          size="normal"
          class="jump-button"
          bind:click="jumpToOfficialAccount">
          进入飞行播客
        </van-button>
      </view>
    
      <view class="qr-display">
        <image 
          class="qr-code-image" 
          src="/images/OfficialAccount.png"
          mode="aspectFit"
          bind:tap="previewQRCode"
          show-menu-by-longpress="{{true}}"
        />
        <text class="qr-hint">长按识别二维码关注"飞行播客"</text>
      </view>
    </view>
  </view>
  -->

  <!-- 应用信息卡片 -->
  <view class="app-info-card">
    <view class="info-header">
      <view class="info-icon">
        <text class="emoji-icon">ℹ️</text>
      </view>
      <text class="info-title">应用信息</text>
    </view>
    
    <van-cell-group class="info-group" border="{{ false }}">
      <van-cell
        title="版本信息"
        value="v2.4.0"
        icon="upgrade"
        class="info-cell"
        border="{{ false }}"
        bind:click="onVersionTap"
      />

      <van-cell 
        title="意见反馈" 
        is-link 
        bind:click="feedback"
        icon="chat-o"
        class="info-cell"
        border="{{ false }}"
      />
      <van-cell 
        title="关于作者" 
        is-link 
        bind:click="aboutUs"
        icon="contact"
        class="info-cell"
        border="{{ false }}"
      />
    </van-cell-group>
  </view>

  <!-- 应用信息卡片 -->
  <view class="warning-notice">
    <view class="warning-icon">
      <text class="emoji-icon">⚠️</text>
    </view>
    <view class="warning-content">
      本小程序旨在帮助飞行员学习航空理论知识，包括性能计算、概念理解、规章条例等内容。但请注意：所有计算逻辑均基于作者个人理解编写，可能存在错误且未经官方验证。因此，本小程序所有数据仅供学习参考，严禁用于实际飞行操作！
    </view>
  </view>

  <!-- 公众号二维码弹窗 - 简化版本 -->
  <van-popup
    show="{{ showQRCodeModal }}"
    bind:close="closeQRCodeModal"
    closeable="{{ true }}"
    close-icon-position="top-right"
    round="{{ true }}"
    custom-style="padding: 40rpx; background: #ffffff;"
  >
    <view class="qr-modal-content">
      <text class="modal-title">关注公众号</text>
      <view class="qr-container">
        <image 
          class="qr-modal-image" 
          src="/images/OfficialAccount.png"
          mode="aspectFit"
          bind:tap="previewQRCode"
        />
        <text class="qr-title">飞行播客</text>
        <text class="qr-modal-hint">长按识别二维码关注</text>
      </view>
    </view>
  </van-popup>

  <!-- 横幅广告 -->
  <view class="ad-banner-container">
    <ad unit-id="adunit-d7a3b71f5ce0afca" ad-type="banner" ad-intervals="30"></ad>
  </view>
</view>
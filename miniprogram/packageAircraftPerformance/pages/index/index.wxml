<view class="container">
  <view class="page-hero">
    <view class="hero-pill">飞机性能</view>
    <view class="hero-title">性能公式卡片</view>
    <view class="hero-subtitle">
      用简明的公式和示意图快速回顾飞机性能核心概念，支持关键字快速搜索。
    </view>
  </view>

  <!-- 搜索框 -->
  <view class="search-section">
    <view class="search-card">
      <van-search
        value="{{ searchValue }}"
        placeholder="搜索性能公式 / 关键字（如 TOD / V2 / 失速）"
        bind:change="onSearchChange"
        bind:clear="onSearchClear"
        shape="round"
      />
    </view>
  </view>

  <!-- 列表区域 -->
  <view class="list-section">
    <van-empty
      wx:if="{{ !loading && displayedCards.length === 0 }}"
      image="search"
      description="未找到相关公式卡片"
    />

    <view wx:elif="{{ !loading }}" class="entry-list">
      <block wx:for="{{ displayedCards }}" wx:key="id">
        <view class="entry-card" bind:tap="onCardTap" data-id="{{ item.id }}">
          <view class="entry-header">
            <view class="entry-image-wrapper">
              <image
                class="entry-image"
                mode="widthFix"
                src="{{ item.imagePath }}"
                catchtap="onImagePreview"
                data-src="{{ item.imagePath }}"
              />
            </view>
            <view class="entry-title">
              <text class="title-zh">{{ item.titleZh }}</text>
            </view>
          </view>

          <view class="entry-summary">
            <text>{{ item.summaryZh }}</text>
          </view>
        </view>
      </block>
    </view>

    <view wx:if="{{ loading }}" class="loading-mask">
      <van-loading size="24px" vertical>数据加载中...</van-loading>
    </view>
  </view>
</view>

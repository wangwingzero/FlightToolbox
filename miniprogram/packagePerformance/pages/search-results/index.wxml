<view class="container page-content">
  <view wx:if="{{ loading }}" class="loading-container">
    <van-loading type="spinner" size="48rpx" color="#10b981">加载中...</van-loading>
  </view>
  <view wx:else>
    <view class="header">
      <text class="query">“{{ query }}”</text>
      <text class="count">共 {{ results.length }} 条</text>
    </view>
    <view wx:if="{{ results.length === 0 }}" class="empty-state">
      <view class="empty-block">
        <image class="empty-img" src="{{ emptyImgSrc }}" binderror="onEmptyImgError" mode="aspectFit" />
        <view class="empty-text">未找到相关内容</view>
      </view>
    </view>
    <view wx:else class="list">
      <block wx:for="{{ results }}" wx:key="id" wx:for-item="it">
        <view class="item" bindtap="onItemTap" data-id="{{ it.id }}" data-type="{{ it.type }}" data-section="{{ it.section }}">
          <view class="title-row">
            <text class="code">{{ it.code }}</text>
            <text class="title">{{ it.title_zh }}</text>
            <van-tag wx:if="{{ it.type === 'section' }}" size="small" color="#e5e7eb" text-color="#111827" round>章节</van-tag>
            <van-tag wx:if="{{ it.type === 'subsection' }}" size="small" color="#e5e7eb" text-color="#111827" round>小节</van-tag>
            <van-tag wx:if="{{ it.type === 'topic' }}" size="small" color="#e5e7eb" text-color="#111827" round>主题</van-tag>
            <van-tag wx:if="{{ it.type === 'appendix' }}" size="small" color="#e5e7eb" text-color="#111827" round>附录</van-tag>
          </view>
          <view class="subtitle">{{ it.title_en }}</view>
          <view class="summary" wx:if="{{ it.summary }}">{{ it.summary }}</view>
        </view>
      </block>
    </view>
  </view>
</view>

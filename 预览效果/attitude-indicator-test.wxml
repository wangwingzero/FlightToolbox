<view class="test-container">
  <view class="test-title">姿态仪模块测试预览</view>
  
  <!-- 姿态仪核心显示区域 -->
  <view class="attitude-display">
    <canvas canvas-id="attitudeCanvas" 
            class="attitude-canvas"
            bindtouchstart="onTouchStart"
            bindtouchmove="onTouchMove"
            bindtouchend="onTouchEnd">
    </canvas>
    
    <!-- 姿态数据显示 -->
    <view class="attitude-data">
      <view class="data-item">
        <text class="label">俯仰角:</text>
        <text class="value pitch">{{attitudeData.pitch}}°</text>
      </view>
      <view class="data-item">
        <text class="label">横滚角:</text>
        <text class="value roll">{{attitudeData.roll}}°</text>
      </view>
      <view class="data-item">
        <text class="label">航向角:</text>
        <text class="value heading">{{attitudeData.heading}}°</text>
      </view>
    </view>
  </view>
  
  <!-- 控制按钮区域 -->
  <view class="control-buttons">
    <button class="test-btn primary" bindtap="startSensor">启动传感器</button>
    <button class="test-btn" bindtap="stopSensor">停止传感器</button>
    <button class="test-btn" bindtap="calibrateSensor">校准传感器</button>
  </view>
  
  <!-- 测试模式切换 -->
  <view class="test-modes">
    <view class="mode-title">测试模式:</view>
    <view class="mode-buttons">
      <button class="mode-btn {{testMode === 'real' ? 'active' : ''}}" 
              bindtap="switchMode" data-mode="real">真实传感器</button>
      <button class="mode-btn {{testMode === 'simulate' ? 'active' : ''}}" 
              bindtap="switchMode" data-mode="simulate">模拟数据</button>
    </view>
  </view>
  
  <!-- 调试信息 -->
  <view class="debug-info" wx:if="{{showDebug}}">
    <view class="debug-title">调试信息:</view>
    <view class="debug-content">
      <text class="debug-text">传感器状态: {{sensorStatus}}</text>
      <text class="debug-text">渲染FPS: {{renderFPS}}</text>
      <text class="debug-text">数据频率: {{dataFreq}}</text>
      <text class="debug-text">校准状态: {{calibrationStatus}}</text>
    </view>
    <switch checked="{{verboseLogging}}" bindchange="toggleVerboseLogging">详细日志</switch>
  </view>
  
  <!-- 性能监控 -->
  <view class="performance-monitor">
    <view class="perf-item">
      <text class="perf-label">内存使用:</text>
      <progress percent="{{memoryUsage}}" stroke-width="4" activeColor="#2196F3"></progress>
    </view>
    <view class="perf-item">
      <text class="perf-label">渲染性能:</text>
      <progress percent="{{renderPerformance}}" stroke-width="4" activeColor="#4CAF50"></progress>
    </view>
  </view>
  
  <!-- 错误日志显示 -->
  <view class="error-log" wx:if="{{errorLog.length > 0}}">
    <view class="error-title">错误日志:</view>
    <scroll-view class="error-content" scroll-y="true">
      <view class="error-item" wx:for="{{errorLog}}" wx:key="index">
        <text class="error-time">[{{item.time}}]</text>
        <text class="error-message">{{item.message}}</text>
      </view>
    </scroll-view>
  </view>
</view>
# é˜¶æ®µ1ï¼šä½é£é™©å¿«é€Ÿä¼˜åŒ–

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-11-01
**é¢„è®¡æ—¶é—´**: 1-2å¤©
**é¢„æœŸæ”¶ç›Š**: 312-412KB
**é£é™©ç­‰çº§**: ğŸŸ¢ ä½
**ä¼˜å…ˆçº§**: â­â­â­â­â­

---

## ğŸ“‹ ä¼˜åŒ–æ¦‚è§ˆ

é˜¶æ®µ1æ˜¯æ•´ä¸ªä¼˜åŒ–æ–¹æ¡ˆä¸­æœ€å®‰å…¨ã€æœ€ç®€å•çš„éƒ¨åˆ†ï¼ŒåŒ…å«4ä¸ªç‹¬ç«‹çš„ä¼˜åŒ–é¡¹ï¼š

| ä¼˜åŒ–é¡¹ | é¢„æœŸæ”¶ç›Š | é£é™© | éš¾åº¦ | æ˜¯å¦å¿…é¡» |
|-------|---------|------|------|---------|
| 1.1 åˆ é™¤NDæ¨¡å— | 150-200KB | æä½ | ç®€å• | âœ… å¿…é¡» |
| 1.2 åˆ†åŒ…é€šä¿¡æ•°æ® | 88KB | ä½ | ç®€å• | âœ… å¿…é¡» |
| 1.3 ç²¾ç®€éŸ³é¢‘é…ç½® | 24KB | ä½ | ç®€å• | âœ… å¿…é¡» |
| 1.4 ä¼˜åŒ–æ ·å¼æ¨¡æ¿ | 50-100KB | ä½ | ä¸­ç­‰ | âš ï¸ å¯é€‰ |
| **æ€»è®¡** | **312-412KB** | **ğŸŸ¢ ä½** | **ç®€å•** | - |

---

## âš ï¸ å¼€å§‹å‰çš„å‡†å¤‡å·¥ä½œ

### 1. åˆ›å»ºGitåˆ†æ”¯å’Œå¤‡ä»½

```powershell
# 1. åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•
cd D:\FlightToolbox

# 2. ç¡®ä¿å½“å‰å·¥ä½œåŒºå¹²å‡€
git status

# 3. å¦‚æœæœ‰æœªæäº¤çš„ä¿®æ”¹ï¼Œå…ˆæäº¤
git add .
git commit -m "backup: é˜¶æ®µ1ä¼˜åŒ–å‰çš„ä»£ç å¿«ç…§"

# 4. åˆ›å»ºä¼˜åŒ–åˆ†æ”¯
git checkout -b feature/phase1-optimization

# 5. éªŒè¯åˆ†æ”¯åˆ›å»ºæˆåŠŸ
git branch
```

### 2. å»ºç«‹ä¸»åŒ…å¤§å°åŸºçº¿

```powershell
# è¿è¡Œä¸»åŒ…å¤§å°ç›‘æ§è„šæœ¬ï¼ˆéœ€è¦åˆ›å»ºï¼Œè§è¾…åŠ©è„šæœ¬é›†.mdï¼‰
.\åˆ†åŒ…æ–¹æ¡ˆ\monitor-main-package-size.ps1

# é¢„æœŸè¾“å‡ºç¤ºä¾‹ï¼š
# ä¸»åŒ…å¤§å°ç»Ÿè®¡ï¼š
# ==================================================
# pages                :    1770.71 KB
# data                 :     440.93 KB
# utils                :     383.25 KB
# images               :      98.45 KB
# audio                :       3.07 KB
# components           :       2.24 KB
# ==================================================
# æ€»è®¡                 :    2698.65 KB (2.63 MB)

# è®°å½•è¿™ä¸ªåŸºçº¿å€¼ï¼
```

### 3. å®‰è£…å¿…è¦å·¥å…·

ç¡®ä¿å·²å®‰è£…ï¼š
- âœ… å¾®ä¿¡å¼€å‘è€…å·¥å…·
- âœ… PowerShell 5.0+
- âœ… Git
- âœ… æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆVS Codeæ¨èï¼‰

---

## ğŸ—‘ï¸ ä¼˜åŒ–é¡¹1.1ï¼šåˆ é™¤NDæ¨¡å—ï¼ˆ150-200KBï¼‰

### èƒŒæ™¯è¯´æ˜

NDï¼ˆNavigation Displayï¼‰æ¨¡å—åŒ…å«ï¼š
- âŒ æœºåœºæœç´¢å’Œè·ç¦»è®¡ç®—
- âŒ åœ†å½¢å¯¼èˆªé›·è¾¾æ˜¾ç¤º
- âŒ é™„è¿‘æœºåœºå¡ç‰‡
- âŒ "æŸ¥çœ‹æœºåœºä¿¡æ¯"æŒ‰é’®

ä¿ç•™çš„åŠŸèƒ½ï¼š
- âœ… GPSåŸºæœ¬ä¿¡æ¯ï¼ˆåœ°é€Ÿã€é«˜åº¦ã€åæ ‡ï¼‰
- âœ… æŒ‡å—é’ˆèˆªå‘åŠŸèƒ½
- âœ… å§¿æ€ä»ªè¡¨åŠŸèƒ½ï¼ˆä¿¯ä»°ã€æ»šè½¬ã€æ ¡å‡†ï¼‰

**é‡è¦æé†’**ï¼šGPSã€å§¿æ€ä»ªã€èˆªå‘ç³»ç»Ÿç»è¿‡é•¿æœŸä¼˜åŒ–ï¼Œç»å¯¹ä¸èƒ½ç ´åï¼

---

### æ­¥éª¤1.1.1ï¼šåˆ é™¤NDæ¨¡å—æ–‡ä»¶

**è¦åˆ é™¤çš„æ–‡ä»¶**ï¼ˆå…±3ä¸ªï¼‰ï¼š

```powershell
# åˆ‡æ¢åˆ°miniprogramç›®å½•
cd D:\FlightToolbox\miniprogram

# 1. åˆ é™¤æœºåœºç®¡ç†å™¨ï¼ˆ20KBï¼‰
Remove-Item pages\cockpit\modules\airport-manager.js -Confirm

# 2. åˆ é™¤åœ°å›¾æ¸²æŸ“å™¨ï¼ˆ58KBï¼‰
Remove-Item pages\cockpit\modules\map-renderer.js -Confirm

# 3. åˆ é™¤æ‰‹åŠ¿å¤„ç†å™¨ï¼ˆ19KBï¼‰
Remove-Item pages\cockpit\modules\gesture-handler.js -Confirm

# éªŒè¯åˆ é™¤æˆåŠŸ
Get-ChildItem pages\cockpit\modules | Where-Object { $_.Name -match 'airport|map-renderer|gesture' }
# åº”è¯¥æ— è¾“å‡ºï¼ˆè¡¨ç¤ºå·²åˆ é™¤ï¼‰
```

**âš ï¸ ç»å¯¹ä¸èƒ½åˆ é™¤çš„æ–‡ä»¶**ï¼š

```powershell
# ä»¥ä¸‹æ–‡ä»¶å¿…é¡»ä¿ç•™ï¼Œåˆ é™¤ä¼šå¯¼è‡´GPS/å§¿æ€ä»ª/èˆªå‘åŠŸèƒ½å¤±æ•ˆ
pages\cockpit\modules\gps-manager.js              # GPSç®¡ç†
pages\cockpit\modules\gps-spoofing-detector.js    # GPSæ¬ºéª—æ£€æµ‹
pages\cockpit\modules\attitude-indicator.js       # å§¿æ€ä»ª
pages\cockpit\modules\sensor-fusion-core.js       # ä¼ æ„Ÿå™¨èåˆ
pages\cockpit\modules\compass-manager-simple.js   # æŒ‡å—é’ˆ
pages\cockpit\modules\accelerometer-manager.js    # åŠ é€Ÿåº¦è®¡
pages\cockpit\modules\gyroscope-manager.js        # é™€èºä»ª
pages\cockpit\modules\config.js                   # æ ¸å¿ƒé…ç½®
pages\cockpit\modules\logger.js                   # æ—¥å¿—ç®¡ç†
pages\cockpit\modules\toast-manager.js            # æç¤ºç®¡ç†
pages\cockpit\modules\audio-manager.js            # éŸ³é¢‘ç®¡ç†
pages\cockpit\modules\lifecycle-manager.js        # ç”Ÿå‘½å‘¨æœŸ
pages\cockpit\modules\flight-calculator.js        # é£è¡Œè®¡ç®—
pages\cockpit\modules\smart-filter.js             # æ™ºèƒ½æ»¤æ³¢ï¼ˆå·²ç¦ç”¨ï¼‰
```

---

### æ­¥éª¤1.1.2ï¼šæ¸…ç†index.jsä¸­çš„NDä»£ç 

**æ–‡ä»¶**: `miniprogram/pages/cockpit/index.js`

#### 2.1 åˆ é™¤NDæ¨¡å—å¼•ç”¨

æ‰¾åˆ°æ–‡ä»¶é¡¶éƒ¨çš„requireè¯­å¥ï¼Œåˆ é™¤ä»¥ä¸‹3è¡Œï¼š

```javascript
// âŒ åˆ é™¤è¿™3è¡Œ
var AirportManager = require('./modules/airport-manager.js');
var MapRenderer = require('./modules/map-renderer.js');
var GestureHandler = require('./modules/gesture-handler.js');
```

#### 2.2 åˆ é™¤NDç›¸å…³dataå­—æ®µ

åœ¨`data: {}`å¯¹è±¡ä¸­ï¼Œåˆ é™¤ä»¥ä¸‹å­—æ®µï¼š

```javascript
data: {
  // âŒ åˆ é™¤ä»¥ä¸‹NDç›¸å…³å­—æ®µ
  nearestAirports: [],
  selectedAirport: null,
  mapCenter: { lat: 0, lon: 0 },
  mapZoom: 1,
  // ... å…¶ä»–NDç›¸å…³å­—æ®µ

  // âœ… ä¿ç•™ä»¥ä¸‹GPS/å§¿æ€ä»ª/èˆªå‘å­—æ®µ
  gpsData: {
    latitude: 0,
    longitude: 0,
    altitude: 0,
    speed: 0
  },
  heading: 0,
  pitch: 0,
  roll: 0,
  // ... ä¿ç•™æ‰€æœ‰GPS/å§¿æ€ä»ª/èˆªå‘ç›¸å…³å­—æ®µ
},
```

**å¦‚ä½•è¯†åˆ«NDå­—æ®µ**ï¼š
- åŒ…å« `airport`, `map`, `radar`, `nearest` ç­‰å…³é”®è¯
- ä¸æœºåœºæœç´¢ã€åœ°å›¾æ¸²æŸ“ã€é›·è¾¾æ˜¾ç¤ºç›¸å…³çš„å­—æ®µ

**ç»å¯¹ä¸èƒ½åˆ é™¤çš„å­—æ®µ**ï¼š
- `gpsData` åŠå…¶æ‰€æœ‰å­å­—æ®µ
- `heading`, `pitch`, `roll` å§¿æ€æ•°æ®
- `compassHeading` æŒ‡å—é’ˆæ•°æ®
- `sensorData` ä¼ æ„Ÿå™¨æ•°æ®
- ä»»ä½•åŒ…å« `gps`, `attitude`, `compass`, `sensor` çš„å­—æ®µ

#### 2.3 åˆ é™¤NDåˆå§‹åŒ–ä»£ç 

åœ¨ `customOnLoad` æ–¹æ³•ä¸­ï¼Œåˆ é™¤NDæ¨¡å—çš„åˆå§‹åŒ–ï¼š

```javascript
customOnLoad: function(options) {
  var self = this;

  // âŒ åˆ é™¤ä»¥ä¸‹NDåˆå§‹åŒ–ä»£ç 
  // this.airportManager = AirportManager.create(config);
  // this.mapRenderer = MapRenderer.create(this.canvasContext);
  // this.gestureHandler = GestureHandler.create(config);

  // âœ… ä¿ç•™GPS/å§¿æ€ä»ª/èˆªå‘åˆå§‹åŒ–
  this.initGPS();
  this.initAttitudeIndicator();
  this.initCompass();
  // ... å…¶ä»–æ ¸å¿ƒåŠŸèƒ½åˆå§‹åŒ–
},
```

#### 2.4 åˆ é™¤NDäº‹ä»¶å¤„ç†æ–¹æ³•

åˆ é™¤ä»¥ä¸‹æ–¹æ³•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼š

```javascript
// âŒ åˆ é™¤ä»¥ä¸‹NDç›¸å…³æ–¹æ³•
searchNearbyAirports: function() { ... },
updateAirportList: function() { ... },
onAirportCardTap: function() { ... },
viewAirportInfo: function() { ... },
updateMapCenter: function() { ... },
renderMap: function() { ... },
onMapTouchStart: function() { ... },
onMapTouchMove: function() { ... },
onMapTouchEnd: function() { ... },
// ... æ‰€æœ‰ä¸æœºåœº/åœ°å›¾/æ‰‹åŠ¿ç›¸å…³çš„æ–¹æ³•
```

**ç»å¯¹ä¸èƒ½åˆ é™¤çš„æ–¹æ³•**ï¼š
```javascript
// âœ… ä¿ç•™æ‰€æœ‰GPSæ–¹æ³•
initGPS: function() { ... },
onGPSUpdate: function() { ... },
updateGPSDisplay: function() { ... },

// âœ… ä¿ç•™æ‰€æœ‰å§¿æ€ä»ªæ–¹æ³•
initAttitudeIndicator: function() { ... },
updateAttitude: function() { ... },
calibrateAttitude: function() { ... },

// âœ… ä¿ç•™æ‰€æœ‰æŒ‡å—é’ˆæ–¹æ³•
initCompass: function() { ... },
updateCompass: function() { ... },
```

---

### æ­¥éª¤1.1.3ï¼šæ¸…ç†index.wxmlä¸­çš„NDè§†å›¾

**æ–‡ä»¶**: `miniprogram/pages/cockpit/index.wxml`

#### 3.1 åˆ é™¤ND Canvaså…ƒç´ 

æ‰¾åˆ°å¹¶åˆ é™¤ä»¥ä¸‹ä»£ç å—ï¼š

```xml
<!-- âŒ åˆ é™¤æ•´ä¸ªND Canvaså®¹å™¨ -->
<view class="nd-container" wx:if="{{showND}}">
  <canvas
    canvas-id="ndCanvas"
    class="nd-canvas"
    bindtouchstart="onMapTouchStart"
    bindtouchmove="onMapTouchMove"
    bindtouchend="onMapTouchEnd">
  </canvas>
</view>
```

#### 3.2 åˆ é™¤æœºåœºå¡ç‰‡åˆ—è¡¨

```xml
<!-- âŒ åˆ é™¤é™„è¿‘æœºåœºå¡ç‰‡ -->
<view class="airport-cards" wx:if="{{nearestAirports.length > 0}}">
  <view
    class="airport-card"
    wx:for="{{nearestAirports}}"
    wx:key="id"
    bindtap="onAirportCardTap"
    data-airport="{{item}}">
    <view class="airport-info">
      <text class="airport-name">{{item.name}}</text>
      <text class="airport-distance">{{item.distance}} NM</text>
    </view>
  </view>
</view>
```

#### 3.3 åˆ é™¤"æŸ¥çœ‹æœºåœºä¿¡æ¯"æŒ‰é’®

```xml
<!-- âŒ åˆ é™¤æŸ¥çœ‹æœºåœºä¿¡æ¯æŒ‰é’® -->
<button
  class="view-airport-btn"
  bindtap="viewAirportInfo">
  æŸ¥çœ‹æœºåœºä¿¡æ¯
</button>
```

#### 3.4 ä¿ç•™GPS/å§¿æ€ä»ª/èˆªå‘è§†å›¾

**âœ… å¿…é¡»ä¿ç•™ä»¥ä¸‹ä»£ç å—**ï¼š

```xml
<!-- âœ… ä¿ç•™GPSä¿¡æ¯æ˜¾ç¤º -->
<view class="gps-info">
  <view class="gps-item">
    <text class="label">åœ°é€Ÿ:</text>
    <text class="value">{{gpsData.speed}} kt</text>
  </view>
  <view class="gps-item">
    <text class="label">é«˜åº¦:</text>
    <text class="value">{{gpsData.altitude}} ft</text>
  </view>
  <view class="gps-item">
    <text class="label">åæ ‡:</text>
    <text class="value">{{gpsData.latitude}}, {{gpsData.longitude}}</text>
  </view>
</view>

<!-- âœ… ä¿ç•™æŒ‡å—é’ˆæ˜¾ç¤º -->
<view class="compass-container">
  <canvas canvas-id="compassCanvas" class="compass-canvas"></canvas>
  <text class="heading-value">{{heading}}Â°</text>
</view>

<!-- âœ… ä¿ç•™å§¿æ€ä»ªæ˜¾ç¤º -->
<view class="attitude-indicator">
  <canvas canvas-id="attitudeCanvas" class="attitude-canvas"></canvas>
  <view class="attitude-values">
    <text>ä¿¯ä»°: {{pitch}}Â°</text>
    <text>æ»šè½¬: {{roll}}Â°</text>
  </view>
</view>
```

---

### æ­¥éª¤1.1.4ï¼šæ¸…ç†index.wxssä¸­çš„NDæ ·å¼

**æ–‡ä»¶**: `miniprogram/pages/cockpit/index.wxss`

#### 4.1 åˆ é™¤NDå®¹å™¨æ ·å¼

```css
/* âŒ åˆ é™¤ä»¥ä¸‹NDæ ·å¼ */
.nd-container {
  width: 100%;
  height: 400rpx;
  position: relative;
  background: #000;
}

.nd-canvas {
  width: 100%;
  height: 100%;
}
```

#### 4.2 åˆ é™¤æœºåœºå¡ç‰‡æ ·å¼

```css
/* âŒ åˆ é™¤ä»¥ä¸‹æœºåœºå¡ç‰‡æ ·å¼ */
.airport-cards {
  display: flex;
  flex-direction: column;
  gap: 10rpx;
  padding: 20rpx;
}

.airport-card {
  background: #fff;
  border-radius: 10rpx;
  padding: 20rpx;
  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.1);
}

.airport-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.airport-name {
  font-size: 28rpx;
  font-weight: bold;
}

.airport-distance {
  font-size: 24rpx;
  color: #999;
}
```

#### 4.3 åˆ é™¤æŸ¥çœ‹æŒ‰é’®æ ·å¼

```css
/* âŒ åˆ é™¤ä»¥ä¸‹æŒ‰é’®æ ·å¼ */
.view-airport-btn {
  margin: 20rpx;
  background: #1989fa;
  color: #fff;
  border-radius: 10rpx;
}
```

#### 4.4 ä¿ç•™GPS/å§¿æ€ä»ª/èˆªå‘æ ·å¼

**âœ… å¿…é¡»ä¿ç•™ä»¥ä¸‹æ ·å¼**ï¼š

```css
/* âœ… ä¿ç•™GPSä¿¡æ¯æ ·å¼ */
.gps-info {
  display: flex;
  flex-direction: column;
  gap: 10rpx;
  padding: 20rpx;
  background: #f5f5f5;
}

.gps-item {
  display: flex;
  justify-content: space-between;
}

/* âœ… ä¿ç•™æŒ‡å—é’ˆæ ·å¼ */
.compass-container {
  width: 200rpx;
  height: 200rpx;
  position: relative;
}

.compass-canvas {
  width: 100%;
  height: 100%;
}

/* âœ… ä¿ç•™å§¿æ€ä»ªæ ·å¼ */
.attitude-indicator {
  width: 300rpx;
  height: 300rpx;
  position: relative;
}

.attitude-canvas {
  width: 100%;
  height: 100%;
}
```

---

### æ­¥éª¤1.1.5ï¼šéªŒè¯NDåˆ é™¤

#### 5.1 è¯­æ³•æ£€æŸ¥

```powershell
# åˆ‡æ¢åˆ°miniprogramç›®å½•
cd D:\FlightToolbox\miniprogram

# æ£€æŸ¥index.jsè¯­æ³•
node -c pages\cockpit\index.js

# å¦‚æœæˆåŠŸï¼Œåº”è¯¥æ— è¾“å‡ºï¼›å¦‚æœæœ‰é”™è¯¯ï¼Œä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
```

#### 5.2 å¾®ä¿¡å¼€å‘è€…å·¥å…·ç¼–è¯‘

1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. ç‚¹å‡»"ç¼–è¯‘"æŒ‰é’®
3. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
4. æ£€æŸ¥ç¼–è¯‘è¯¦æƒ…ä¸­çš„ä¸»åŒ…å¤§å°

**é¢„æœŸç»“æœ**ï¼š
- âœ… ç¼–è¯‘æˆåŠŸï¼Œæ— é”™è¯¯
- âœ… ä¸»åŒ…å¤§å°å‡å°‘çº¦150-200KB
- âœ… é©¾é©¶èˆ±é¡µé¢å¤§å°ä»720KBé™è‡³550KBå·¦å³

#### 5.3 åŠŸèƒ½éªŒè¯æ¸…å•

æ‰“å¼€é©¾é©¶èˆ±é¡µé¢ï¼Œé€é¡¹éªŒè¯ï¼š

```
æ ¸å¿ƒåŠŸèƒ½éªŒè¯ï¼š
âœ… GPSåœ°é€Ÿæ­£å¸¸æ˜¾ç¤ºï¼ˆæ•´æ•°ï¼Œæ— å¹³æ»‘ï¼‰
âœ… GPSé«˜åº¦æ­£å¸¸æ˜¾ç¤ºï¼ˆè‹±å°ºï¼Œæ— å¹³æ»‘ï¼‰
âœ… GPSåæ ‡æ­£å¸¸æ˜¾ç¤º
âœ… æŒ‡å—é’ˆèˆªå‘æ­£å¸¸å·¥ä½œ
âœ… å§¿æ€ä»ªä¿¯ä»°è§’æ­£å¸¸æ˜¾ç¤º
âœ… å§¿æ€ä»ªæ»šè½¬è§’æ­£å¸¸æ˜¾ç¤º
âœ… å§¿æ€ä»ªæ ¡å‡†åŠŸèƒ½æ­£å¸¸
âœ… ä¼ æ„Ÿå™¨èåˆç³»ç»Ÿæ­£å¸¸è¿è¡Œ

NDåŠŸèƒ½ç¡®è®¤å·²åˆ é™¤ï¼š
âœ… ä¸å†æ˜¾ç¤ºé™„è¿‘æœºåœºå¡ç‰‡
âœ… ä¸å†æ˜¾ç¤ºåœ†å½¢é›·è¾¾åœ°å›¾
âœ… æ²¡æœ‰"æŸ¥çœ‹æœºåœºä¿¡æ¯"æŒ‰é’®
âœ… æ²¡æœ‰æœºåœºæœç´¢åŠŸèƒ½
```

#### 5.4 çœŸæœºæµ‹è¯•

**AndroidçœŸæœºæµ‹è¯•**ï¼š
1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. ç‚¹å‡»"çœŸæœºè°ƒè¯•"
3. æ‰«ç è¿æ¥Androidæ‰‹æœº
4. è¿›å…¥é©¾é©¶èˆ±é¡µé¢
5. éªŒè¯GPSã€æŒ‡å—é’ˆã€å§¿æ€ä»ªåŠŸèƒ½
6. å¼€å¯é£è¡Œæ¨¡å¼
7. é‡æ–°è¿›å…¥é©¾é©¶èˆ±é¡µé¢
8. éªŒè¯ç¦»çº¿æ¨¡å¼ä¸‹æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

**iOSçœŸæœºæµ‹è¯•**ï¼š
1. é‡å¤Androidæµ‹è¯•æ­¥éª¤
2. ç‰¹åˆ«æ³¨æ„iOSéŸ³é¢‘å…¼å®¹æ€§åŠŸèƒ½

**éªŒè¯é€šè¿‡æ ‡å‡†**ï¼š
- âœ… GPSæ•°æ®å®æ—¶æ›´æ–°ï¼ˆåœ¨çº¿+ç¦»çº¿ï¼‰
- âœ… æŒ‡å—é’ˆèˆªå‘å®æ—¶æ›´æ–°
- âœ… å§¿æ€ä»ªå®æ—¶å“åº”è®¾å¤‡å§¿æ€å˜åŒ–
- âœ… æ²¡æœ‰JavaScripté”™è¯¯
- âœ… é¡µé¢åŠ è½½æµç•…

---

### æ­¥éª¤1.1.6ï¼šæäº¤Gitè®°å½•

```powershell
# åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•
cd D:\FlightToolbox

# æŸ¥çœ‹ä¿®æ”¹
git status
git diff

# æ·»åŠ ä¿®æ”¹
git add miniprogram/pages/cockpit/

# æäº¤ï¼ˆè¯¦ç»†è¯´æ˜åˆ é™¤å†…å®¹å’Œä¿ç•™åŠŸèƒ½ï¼‰
git commit -m "é˜¶æ®µ1.1: åˆ é™¤NDæ¨¡å—ï¼ˆ150-200KBï¼‰

åˆ é™¤å†…å®¹ï¼š
- åˆ é™¤ airport-manager.js (20KB)
- åˆ é™¤ map-renderer.js (58KB)
- åˆ é™¤ gesture-handler.js (19KB)
- æ¸…ç† index.js ä¸­NDæ¨¡å—å¼•ç”¨å’Œåˆå§‹åŒ–ä»£ç 
- æ¸…ç† index.wxml ä¸­NDè§†å›¾ï¼ˆCanvasã€æœºåœºå¡ç‰‡ã€æŒ‰é’®ï¼‰
- æ¸…ç† index.wxss ä¸­NDæ ·å¼

ä¿ç•™åŠŸèƒ½ï¼š
- GPSç®¡ç†å™¨ï¼ˆåœ°é€Ÿã€é«˜åº¦ã€åæ ‡ï¼‰
- æŒ‡å—é’ˆèˆªå‘ç³»ç»Ÿ
- å§¿æ€ä»ªè¡¨ç³»ç»Ÿï¼ˆä¿¯ä»°ã€æ»šè½¬ã€æ ¡å‡†ï¼‰
- ä¼ æ„Ÿå™¨èåˆæ ¸å¿ƒ
- æ‰€æœ‰æ ¸å¿ƒé…ç½®å’Œå·¥å…·æ¨¡å—

éªŒè¯ç»“æœï¼š
- ç¼–è¯‘æˆåŠŸï¼Œæ— é”™è¯¯
- ä¸»åŒ…å‡å°‘çº¦ XXX KBï¼ˆå¡«å†™å®é™…å€¼ï¼‰
- GPS/å§¿æ€ä»ª/èˆªå‘åŠŸèƒ½å®Œå…¨æ­£å¸¸
- Android + iOS çœŸæœºæµ‹è¯•é€šè¿‡
- ç¦»çº¿æ¨¡å¼æµ‹è¯•é€šè¿‡"
```

---

## ğŸ“¦ ä¼˜åŒ–é¡¹1.2ï¼šåˆ†åŒ…é€šä¿¡æ•°æ®ï¼ˆ88KBï¼‰

### èƒŒæ™¯è¯´æ˜

å°†é€šä¿¡ç›¸å…³çš„å¤§æ•°æ®æ–‡ä»¶ä»ä¸»åŒ…è¿ç§»åˆ°å·²æœ‰åˆ†åŒ…ï¼š
- `data/CommunicationRules.js` (46.52KB) â†’ packageCCAR
- `data/phraseology.js` (40.55KB) â†’ packageCCAR

è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸»è¦åœ¨"é€šä¿¡"TabBaré¡µé¢ä½¿ç”¨ï¼Œè¿ç§»åˆ°packageCCARåå¯èŠ‚çœä¸»åŒ…ç©ºé—´ã€‚

---

### æ­¥éª¤1.2.1ï¼šè¿ç§»æ•°æ®æ–‡ä»¶

```powershell
# åˆ‡æ¢åˆ°miniprogramç›®å½•
cd D:\FlightToolbox\miniprogram

# 1. åˆ›å»ºpackageCCARçš„dataç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
New-Item -ItemType Directory -Path packageCCAR\data -Force

# 2. ç§»åŠ¨CommunicationRules.js
Move-Item data\CommunicationRules.js packageCCAR\data\CommunicationRules.js

# 3. ç§»åŠ¨phraseology.js
Move-Item data\phraseology.js packageCCAR\data\phraseology.js

# 4. éªŒè¯æ–‡ä»¶å·²ç§»åŠ¨
Test-Path data\CommunicationRules.js  # åº”è¯¥è¿”å›False
Test-Path data\phraseology.js         # åº”è¯¥è¿”å›False
Test-Path packageCCAR\data\CommunicationRules.js  # åº”è¯¥è¿”å›True
Test-Path packageCCAR\data\phraseology.js         # åº”è¯¥è¿”å›True
```

---

### æ­¥éª¤1.2.2ï¼šæ›´æ–°é€šä¿¡é¡µé¢å¼•ç”¨

**æ–‡ä»¶**: `miniprogram/pages/operations/index.ts`

#### 2.1 æ‰¾åˆ°æ•°æ®å¼•ç”¨ä»£ç 

å®šä½åˆ°æ–‡ä»¶ä¸­å¼•ç”¨è¿™ä¸¤ä¸ªæ•°æ®æ–‡ä»¶çš„ä½ç½®ï¼Œé€šå¸¸åœ¨é¡µé¢åŠ è½½æˆ–æ•°æ®åˆå§‹åŒ–æ–¹æ³•ä¸­ã€‚

#### 2.2 æ›¿æ¢ä¸ºå¼‚æ­¥åŠ è½½

**æ—§ä»£ç **ï¼ˆåŒæ­¥åŠ è½½ï¼Œä¼šæŠ¥é”™ï¼‰ï¼š
```javascript
// âŒ é”™è¯¯æ–¹å¼ï¼ˆåŒæ­¥åŠ è½½è·¨åˆ†åŒ…æ–‡ä»¶ä¼šå¤±è´¥ï¼‰
var CommunicationRules = require('../../data/CommunicationRules.js');
var phraseology = require('../../data/phraseology.js');
```

**æ–°ä»£ç **ï¼ˆå¼‚æ­¥åŠ è½½ï¼Œéµå¾ªBasePageæœºåˆ¶ï¼‰ï¼š
```javascript
// âœ… æ­£ç¡®æ–¹å¼ï¼ˆå¼‚æ­¥åŠ è½½è·¨åˆ†åŒ…æ–‡ä»¶ï¼‰
customOnLoad: function(options) {
  var self = this;

  // åŠ è½½é€šä¿¡è§„åˆ™æ•°æ®
  require('../../packageCCAR/data/CommunicationRules.js', function(CommunicationRules) {
    self.setData({
      communicationRules: CommunicationRules.rules
    });

    // åŠ è½½æ ‡å‡†ç”¨è¯­æ•°æ®
    require('../../packageCCAR/data/phraseology.js', function(phraseology) {
      self.setData({
        phraseologyList: phraseology.phrases
      });

      // æ•°æ®åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
      self.initCommunicationData();
    }, function(error) {
      self.handleError(error, 'åŠ è½½æ ‡å‡†ç”¨è¯­æ•°æ®å¤±è´¥');
    });
  }, function(error) {
    self.handleError(error, 'åŠ è½½é€šä¿¡è§„åˆ™æ•°æ®å¤±è´¥');
  });
},
```

#### 2.3 æ›´æ–°å…¶ä»–å¯èƒ½çš„å¼•ç”¨

ä½¿ç”¨å…¨å±€æœç´¢æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–æ–‡ä»¶å¼•ç”¨è¿™ä¸¤ä¸ªæ•°æ®æ–‡ä»¶ï¼š

```powershell
# æœç´¢CommunicationRuleså¼•ç”¨
Get-ChildItem -Path . -Recurse -Include *.js,*.ts -File |
  Select-String -Pattern "require.*CommunicationRules" |
  Select-Object Path, LineNumber, Line

# æœç´¢phraseologyå¼•ç”¨
Get-ChildItem -Path . -Recurse -Include *.js,*.ts -File |
  Select-String -Pattern "require.*phraseology" |
  Select-Object Path, LineNumber, Line
```

å¯¹æ‰¾åˆ°çš„æ¯ä¸ªå¼•ç”¨ï¼Œéƒ½éœ€è¦æ”¹ä¸ºå¼‚æ­¥åŠ è½½æ–¹å¼ã€‚

---

### æ­¥éª¤1.2.3ï¼šé…ç½®é¢„åŠ è½½è§„åˆ™

**æ–‡ä»¶**: `miniprogram/app.json`

ç¡®ä¿packageCCARå·²ç»é…ç½®åœ¨"é€šä¿¡"é¡µé¢çš„é¢„åŠ è½½è§„åˆ™ä¸­ï¼š

```json
{
  "preloadRule": {
    "pages/operations/index": {
      "network": "all",
      "packages": ["packageCCAR"]
    }
  }
}
```

**è¯´æ˜**ï¼š
- `network: "all"` - åœ¨çº¿å’Œç¦»çº¿æ¨¡å¼éƒ½é¢„åŠ è½½
- `packages: ["packageCCAR"]` - é¢„åŠ è½½packageCCARåˆ†åŒ…
- è¿™æ ·ç”¨æˆ·è¿›å…¥"é€šä¿¡"é¡µé¢æ—¶ï¼Œæ•°æ®æ–‡ä»¶å·²ç»ç¼“å­˜ï¼Œç¦»çº¿æ¨¡å¼å¯ç”¨

---

### æ­¥éª¤1.2.4ï¼šéªŒè¯åˆ†åŒ…æ•°æ®è¿ç§»

#### 4.1 ç¼–è¯‘æµ‹è¯•

```powershell
# å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ç‚¹å‡»"ç¼–è¯‘"
# æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
```

#### 4.2 åŠŸèƒ½æµ‹è¯•

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼š
1. è¿›å…¥"é€šä¿¡"TabBaré¡µé¢
2. éªŒè¯é€šä¿¡è§„åˆ™æ•°æ®æ­£å¸¸åŠ è½½
3. éªŒè¯æ ‡å‡†ç”¨è¯­æ•°æ®æ­£å¸¸åŠ è½½
4. æµ‹è¯•æ•°æ®æœç´¢ã€ç­›é€‰åŠŸèƒ½

#### 4.3 ç¦»çº¿æµ‹è¯•

```powershell
# 1. åœ¨å¼€å‘è€…å·¥å…·ä¸­å¼€å¯é£è¡Œæ¨¡å¼æ¨¡æ‹Ÿ
# å·¥å…· -> æ¨¡æ‹Ÿå™¨è®¾ç½® -> ç½‘ç»œ -> ç¦»çº¿

# 2. é‡æ–°è¿›å…¥"é€šä¿¡"é¡µé¢
# 3. éªŒè¯æ•°æ®ä»ç„¶å¯ä»¥æ­£å¸¸æ˜¾ç¤º
```

**éªŒè¯é€šè¿‡æ ‡å‡†**ï¼š
- âœ… åœ¨çº¿æ¨¡å¼æ•°æ®æ­£å¸¸åŠ è½½
- âœ… ç¦»çº¿æ¨¡å¼æ•°æ®æ­£å¸¸åŠ è½½
- âœ… æ•°æ®æœç´¢ã€ç­›é€‰åŠŸèƒ½æ­£å¸¸
- âœ… æ²¡æœ‰JavaScripté”™è¯¯

---

### æ­¥éª¤1.2.5ï¼šæäº¤Gitè®°å½•

```powershell
# åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•
cd D:\FlightToolbox

# æŸ¥çœ‹ä¿®æ”¹
git status
git diff

# æ·»åŠ ä¿®æ”¹
git add miniprogram/packageCCAR/data/
git add miniprogram/pages/operations/
git add miniprogram/app.json

# æäº¤
git commit -m "é˜¶æ®µ1.2: åˆ†åŒ…é€šä¿¡æ•°æ®ï¼ˆ88KBï¼‰

è¿ç§»å†…å®¹ï¼š
- ç§»åŠ¨ data/CommunicationRules.js â†’ packageCCAR/data/ (46.52KB)
- ç§»åŠ¨ data/phraseology.js â†’ packageCCAR/data/ (40.55KB)

ä»£ç æ”¹é€ ï¼š
- æ›´æ–° pages/operations/index.ts ä¸ºå¼‚æ­¥åŠ è½½
- ç¡®è®¤ app.json é¢„åŠ è½½è§„åˆ™é…ç½®æ­£ç¡®

éªŒè¯ç»“æœï¼š
- ç¼–è¯‘æˆåŠŸï¼Œæ— é”™è¯¯
- ä¸»åŒ…å‡å°‘çº¦ 88KB
- åœ¨çº¿æ¨¡å¼æ•°æ®åŠ è½½æ­£å¸¸
- ç¦»çº¿æ¨¡å¼æ•°æ®åŠ è½½æ­£å¸¸
- é€šä¿¡è§„åˆ™å’Œæ ‡å‡†ç”¨è¯­åŠŸèƒ½å®Œå…¨æ­£å¸¸"
```

---

## ğŸµ ä¼˜åŒ–é¡¹1.3ï¼šç²¾ç®€éŸ³é¢‘é…ç½®ï¼ˆ24KBï¼‰

### èƒŒæ™¯è¯´æ˜

`utils/audio-config.js` å½“å‰åŒ…å«æ‰€æœ‰éŸ³é¢‘çš„è¯¦ç»†å…ƒæ•°æ®ï¼Œå¯¼è‡´æ–‡ä»¶è¾ƒå¤§ã€‚å€Ÿé‰´éŸ³é¢‘åˆ†åŒ…8æ­¥ç»éªŒï¼Œæˆ‘ä»¬å¯ä»¥ï¼š

1. å°† `audio-config.js` ç®€åŒ–ä¸ºä»…åŒ…å«å…ƒæ•°æ®ç´¢å¼•
2. è¯¦ç»†æ•°æ®ä¿ç•™åœ¨å„éŸ³é¢‘åˆ†åŒ…çš„ `data.js` ä¸­
3. å®ç°æ‡’åŠ è½½æœºåˆ¶ï¼Œä»…åœ¨æ’­æ”¾æ—¶åŠ è½½è¯¦ç»†æ•°æ®

---

### æ­¥éª¤1.3.1ï¼šåˆ†æå½“å‰audio-config.jsç»“æ„

**æ–‡ä»¶**: `miniprogram/utils/audio-config.js`

å½“å‰ç»“æ„é€šå¸¸ç±»ä¼¼ï¼š

```javascript
// å½“å‰ç»“æ„ï¼ˆåŒ…å«å¤§é‡è¯¦ç»†æ•°æ®ï¼‰
module.exports = {
  regions: [
    {
      id: 'japan',
      name: 'æ—¥æœ¬',
      airports: [
        {
          id: 'RJTT',
          name: 'ä¸œäº¬æˆç”°',
          clips: [
            {
              id: 'clip1',
              title: 'JAL123 Contact Tokyo Tower',
              mp3_file: 'JAL123_Contact_Tokyo_Tower.mp3',
              transcript: 'è¯¦ç»†æ–‡æœ¬...',
              translation: 'è¯¦ç»†ç¿»è¯‘...',
              // ... å¤§é‡è¯¦ç»†å­—æ®µ
            },
            // ... æ•°ç™¾ä¸ªéŸ³é¢‘ç‰‡æ®µ
          ]
        }
      ]
    },
    // ... 31ä¸ªå›½å®¶/åœ°åŒº
  ]
};
```

---

### æ­¥éª¤1.3.2ï¼šåˆ›å»ºç²¾ç®€ç‰ˆaudio-config.js

**æ–°å»ºæ–‡ä»¶**: `miniprogram/utils/audio-config-minimal.js`

```javascript
/**
 * éŸ³é¢‘é…ç½® - ç²¾ç®€ç‰ˆ
 * ä»…åŒ…å«ç´¢å¼•å…ƒæ•°æ®ï¼Œè¯¦ç»†æ•°æ®åœ¨å„åˆ†åŒ…çš„data.jsä¸­
 */

module.exports = {
  /**
   * åœ°åŒºåˆ—è¡¨ï¼ˆä»…å…ƒæ•°æ®ï¼‰
   */
  regions: [
    { id: 'japan', name: 'æ—¥æœ¬', packageRoot: 'packageJapan', clipCount: 45 },
    { id: 'korea', name: 'éŸ©å›½', packageRoot: 'packageKorean', clipCount: 38 },
    { id: 'singapore', name: 'æ–°åŠ å¡', packageRoot: 'packageSingapore', clipCount: 32 },
    { id: 'thailand', name: 'æ³°å›½', packageRoot: 'packageThailand', clipCount: 28 },
    { id: 'hongkong', name: 'ä¸­å›½é¦™æ¸¯', packageRoot: 'packageHongKong', clipCount: 42 },
    { id: 'chinese-taipei', name: 'ä¸­å›½å°åŒ—', packageRoot: 'packageTaipei', clipCount: 35 },
    { id: 'macau', name: 'ä¸­å›½æ¾³é—¨', packageRoot: 'packageMacau', clipCount: 18 },
    { id: 'philippines', name: 'è²å¾‹å®¾', packageRoot: 'packagePhilippines', clipCount: 25 },
    { id: 'vietnam', name: 'è¶Šå—', packageRoot: 'packageVietnam', clipCount: 40 },
    { id: 'malaysia', name: 'é©¬æ¥è¥¿äºš', packageRoot: 'packageMalaysia', clipCount: 30 },
    { id: 'indonesia', name: 'å°åº¦å°¼è¥¿äºš', packageRoot: 'packageIndonesia', clipCount: 22 },
    { id: 'india', name: 'å°åº¦', packageRoot: 'packageIndia', clipCount: 28 },
    { id: 'srilanka', name: 'æ–¯é‡Œå…°å¡', packageRoot: 'packageSrilanka', clipCount: 15 },
    { id: 'maldive', name: 'é©¬å°”ä»£å¤«', packageRoot: 'packageMaldive', clipCount: 12 },
    { id: 'cambodia', name: 'æŸ¬åŸ”å¯¨', packageRoot: 'packageCambodia', clipCount: 10 },
    { id: 'myanmar', name: 'ç¼…ç”¸', packageRoot: 'packageMyanmar', clipCount: 8 },
    { id: 'uzbekistan', name: 'ä¹Œå…¹åˆ«å…‹æ–¯å¦', packageRoot: 'packageUzbekistan', clipCount: 6 },
    { id: 'russia', name: 'ä¿„ç½—æ–¯', packageRoot: 'packageRussia', clipCount: 35 },
    { id: 'turkey', name: 'åœŸè€³å…¶', packageRoot: 'packageTurkey', clipCount: 20 },
    { id: 'france', name: 'æ³•å›½', packageRoot: 'packageFrance', clipCount: 25 },
    { id: 'italy', name: 'æ„å¤§åˆ©', packageRoot: 'packageItaly', clipCount: 18 },
    { id: 'uk', name: 'è‹±å›½', packageRoot: 'packageUK', clipCount: 30 },
    { id: 'spain', name: 'è¥¿ç­ç‰™', packageRoot: 'packageSpain', clipCount: 15 },
    { id: 'germany', name: 'å¾·å›½', packageRoot: 'packageGermany', clipCount: 22 },
    { id: 'holland', name: 'è·å…°', packageRoot: 'packageHolland', clipCount: 12 },
    { id: 'america', name: 'ç¾å›½', packageRoot: 'packageAmerica', clipCount: 50 },
    { id: 'canada', name: 'åŠ æ‹¿å¤§', packageRoot: 'packageCanada', clipCount: 25 },
    { id: 'australia', name: 'æ¾³å¤§åˆ©äºš', packageRoot: 'packageAustralia', clipCount: 35 },
    { id: 'new-zealand', name: 'æ–°è¥¿å…°', packageRoot: 'packageNewZealand', clipCount: 18 },
    { id: 'egypt', name: 'åŸƒåŠ', packageRoot: 'packageEgypt', clipCount: 10 },
    { id: 'uae', name: 'é˜¿è”é…‹', packageRoot: 'packageUAE', clipCount: 28 }
  ],

  /**
   * æ ¹æ®regionIdè·å–åˆ†åŒ…æ ¹ç›®å½•
   */
  getPackageRoot: function(regionId) {
    var region = this.regions.find(function(r) { return r.id === regionId; });
    return region ? region.packageRoot : null;
  },

  /**
   * æ‡’åŠ è½½åœ°åŒºè¯¦ç»†æ•°æ®
   */
  loadRegionData: function(regionId, successCallback, failCallback) {
    var packageRoot = this.getPackageRoot(regionId);
    if (!packageRoot) {
      failCallback && failCallback(new Error('æœªæ‰¾åˆ°åœ°åŒº: ' + regionId));
      return;
    }

    var dataPath = '../../' + packageRoot + '/data.js';
    require(dataPath, function(regionData) {
      successCallback && successCallback(regionData);
    }, function(error) {
      console.error('åŠ è½½åœ°åŒºæ•°æ®å¤±è´¥:', regionId, error);
      failCallback && failCallback(error);
    });
  }
};
```

---

### æ­¥éª¤1.3.3ï¼šå¤‡ä»½å¹¶æ›¿æ¢audio-config.js

```powershell
# åˆ‡æ¢åˆ°miniprogram/utilsç›®å½•
cd D:\FlightToolbox\miniprogram\utils

# 1. å¤‡ä»½åŸå§‹æ–‡ä»¶
Copy-Item audio-config.js audio-config-backup.js

# 2. æ£€æŸ¥å¤‡ä»½æˆåŠŸ
Test-Path audio-config-backup.js  # åº”è¯¥è¿”å›True

# 3. æ›¿æ¢ä¸ºç²¾ç®€ç‰ˆï¼ˆå…ˆæ‰‹åŠ¨ç¡®è®¤audio-config-minimal.jså·²åˆ›å»ºï¼‰
Remove-Item audio-config.js
Rename-Item audio-config-minimal.js audio-config.js

# 4. éªŒè¯æ›¿æ¢æˆåŠŸ
Get-Content audio-config.js | Select-Object -First 10
```

---

### æ­¥éª¤1.3.4ï¼šæ›´æ–°audio-package-loader.jsä½¿ç”¨æ‡’åŠ è½½

**æ–‡ä»¶**: `miniprogram/utils/audio-package-loader.js`

æ‰¾åˆ°æ•°æ®åŠ è½½ç›¸å…³ä»£ç ï¼Œæ›´æ–°ä¸ºä½¿ç”¨æ–°çš„æ‡’åŠ è½½æœºåˆ¶ï¼š

**æ—§ä»£ç **ï¼š
```javascript
// âŒ æ—§æ–¹å¼ï¼šç›´æ¥ä»audio-config.jsè·å–è¯¦ç»†æ•°æ®
var audioConfig = require('./audio-config.js');
var regionData = audioConfig.regions.find(r => r.id === regionId);
```

**æ–°ä»£ç **ï¼š
```javascript
// âœ… æ–°æ–¹å¼ï¼šä½¿ç”¨æ‡’åŠ è½½ä»åˆ†åŒ…è·å–è¯¦ç»†æ•°æ®
var audioConfig = require('./audio-config.js');

function loadRegionClips(regionId, callback) {
  audioConfig.loadRegionData(regionId, function(regionData) {
    // å¤„ç†åŠ è½½çš„æ•°æ®
    callback(regionData.clips);
  }, function(error) {
    console.error('åŠ è½½éŸ³é¢‘æ•°æ®å¤±è´¥:', error);
    callback([]);
  });
}
```

---

### æ­¥éª¤1.3.5ï¼šæ›´æ–°airline-recordingsé¡µé¢

**æ–‡ä»¶**: `miniprogram/pages/airline-recordings/index.js` (æˆ–.ts)

æ›´æ–°åœ°åŒºåˆ—è¡¨æ˜¾ç¤ºé€»è¾‘ï¼š

```javascript
var BasePage = require('../../utils/base-page.js');
var audioConfig = require('../../utils/audio-config.js');

var pageConfig = {
  data: {
    regions: []
  },

  customOnLoad: function(options) {
    // åŠ è½½åœ°åŒºåˆ—è¡¨ï¼ˆä»…å…ƒæ•°æ®ï¼Œå¿«é€Ÿæ˜¾ç¤ºï¼‰
    this.setData({
      regions: audioConfig.regions
    });
  },

  // ç‚¹å‡»åœ°åŒºå¡ç‰‡æ—¶æ‰åŠ è½½è¯¦ç»†æ•°æ®
  onRegionTap: function(e) {
    var regionId = e.currentTarget.dataset.regionId;
    var self = this;

    // æ˜¾ç¤ºåŠ è½½æç¤º
    wx.showLoading({ title: 'åŠ è½½ä¸­...' });

    // æ‡’åŠ è½½åœ°åŒºè¯¦ç»†æ•°æ®
    audioConfig.loadRegionData(regionId, function(regionData) {
      wx.hideLoading();

      // è·³è½¬åˆ°éŸ³é¢‘åˆ—è¡¨é¡µé¢ï¼Œä¼ é€’æ•°æ®
      wx.navigateTo({
        url: '/pages/recording-clips/index?regionId=' + regionId
      });
    }, function(error) {
      wx.hideLoading();
      self.handleError(error, 'åŠ è½½åœ°åŒºéŸ³é¢‘æ•°æ®å¤±è´¥');
    });
  }
};

Page(BasePage.createPage(pageConfig));
```

---

### æ­¥éª¤1.3.6ï¼šéªŒè¯éŸ³é¢‘é…ç½®ä¼˜åŒ–

#### 6.1 æ–‡ä»¶å¤§å°æ£€æŸ¥

```powershell
# æ¯”è¾ƒæ–‡ä»¶å¤§å°
$oldSize = (Get-Item utils\audio-config-backup.js).Length
$newSize = (Get-Item utils\audio-config.js).Length
$saved = $oldSize - $newSize

Write-Output "åŸå§‹æ–‡ä»¶: $($oldSize / 1KB) KB"
Write-Output "ä¼˜åŒ–å: $($newSize / 1KB) KB"
Write-Output "èŠ‚çœç©ºé—´: $($saved / 1KB) KB"
```

**é¢„æœŸç»“æœ**ï¼šèŠ‚çœçº¦24KB

#### 6.2 åŠŸèƒ½æµ‹è¯•

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼š
1. è¿›å…¥"é€šä¿¡" â†’ "èˆªçº¿å½•éŸ³"
2. éªŒè¯åœ°åŒºåˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
3. ç‚¹å‡»ä»»æ„åœ°åŒºï¼ˆå¦‚"æ—¥æœ¬"ï¼‰
4. éªŒè¯éŸ³é¢‘åˆ—è¡¨æ­£å¸¸åŠ è½½
5. ç‚¹å‡»æ’­æ”¾éŸ³é¢‘
6. éªŒè¯éŸ³é¢‘æ­£å¸¸æ’­æ”¾

#### 6.3 ç¦»çº¿æµ‹è¯•

```powershell
# å¼€å¯é£è¡Œæ¨¡å¼
# é‡æ–°è¿›å…¥èˆªçº¿å½•éŸ³é¡µé¢
# éªŒè¯æ•°æ®åŠ è½½å’ŒéŸ³é¢‘æ’­æ”¾
```

**éªŒè¯é€šè¿‡æ ‡å‡†**ï¼š
- âœ… åœ°åŒºåˆ—è¡¨å¿«é€Ÿæ˜¾ç¤º
- âœ… ç‚¹å‡»åœ°åŒºåè¯¦ç»†æ•°æ®æ­£å¸¸åŠ è½½
- âœ… éŸ³é¢‘æ’­æ”¾æ­£å¸¸
- âœ… ç¦»çº¿æ¨¡å¼æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

---

### æ­¥éª¤1.3.7ï¼šæäº¤Gitè®°å½•

```powershell
cd D:\FlightToolbox

git add miniprogram/utils/audio-config.js
git add miniprogram/utils/audio-config-backup.js
git add miniprogram/utils/audio-package-loader.js
git add miniprogram/pages/airline-recordings/

git commit -m "é˜¶æ®µ1.3: ç²¾ç®€éŸ³é¢‘é…ç½®ï¼ˆ24KBï¼‰

ä¼˜åŒ–å†…å®¹ï¼š
- ç²¾ç®€ audio-config.jsï¼Œä»…ä¿ç•™å…ƒæ•°æ®ç´¢å¼•
- è¯¦ç»†æ•°æ®ä¿ç•™åœ¨å„åˆ†åŒ…çš„ data.js ä¸­
- å®ç°æ‡’åŠ è½½æœºåˆ¶ï¼Œä»…åœ¨éœ€è¦æ—¶åŠ è½½è¯¦ç»†æ•°æ®
- æ›´æ–° audio-package-loader.js ä½¿ç”¨æ‡’åŠ è½½
- æ›´æ–° airline-recordings é¡µé¢æ”¯æŒæ‡’åŠ è½½

éªŒè¯ç»“æœï¼š
- æ–‡ä»¶å¤§å°å‡å°‘çº¦ 24KB
- åœ°åŒºåˆ—è¡¨æ˜¾ç¤ºé€Ÿåº¦æå‡
- éŸ³é¢‘æ’­æ”¾åŠŸèƒ½æ­£å¸¸
- ç¦»çº¿æ¨¡å¼åŠŸèƒ½æ­£å¸¸"
```

---

## ğŸ¨ ä¼˜åŒ–é¡¹1.4ï¼šä¼˜åŒ–æ ·å¼æ¨¡æ¿ï¼ˆå¯é€‰ï¼Œ50-100KBï¼‰

### èƒŒæ™¯è¯´æ˜

è¿™æ˜¯é˜¶æ®µ1ä¸­çš„å¯é€‰ä¼˜åŒ–é¡¹ã€‚é€šè¿‡ä»¥ä¸‹æ–¹å¼å¯ä»¥è¿›ä¸€æ­¥å‡å°‘ä¸»åŒ…ï¼š

1. æå–å…¬å…±æ ·å¼åˆ° `app.wxss`
2. ç»„ä»¶åŒ–é‡å¤çš„WXMLæ¨¡æ¿
3. ç²¾ç®€å†—ä½™çš„CSSè§„åˆ™

**æ³¨æ„**ï¼šè¿™ä¸ªä¼˜åŒ–é¡¹æ¯”è¾ƒå¤æ‚ï¼Œä¸”æ”¶ç›Šç›¸å¯¹è¾ƒå°ï¼Œå»ºè®®åœ¨å®Œæˆå‰3é¡¹ä¼˜åŒ–åï¼Œå¦‚æœä¸»åŒ…ä»ç„¶ç´§å¼ å†è€ƒè™‘æ‰§è¡Œã€‚

---

### æ­¥éª¤1.4.1ï¼šæå–å…¬å…±æ ·å¼

**åˆ†æé‡å¤æ ·å¼**ï¼š

```powershell
# æœç´¢é‡å¤çš„æ ·å¼ç±»å
cd D:\FlightToolbox\miniprogram

# æŸ¥æ‰¾æ‰€æœ‰.wxssæ–‡ä»¶ä¸­çš„å¸¸è§ç±»å
Get-ChildItem -Recurse -Filter *.wxss |
  Select-String -Pattern "\.card|\.container|\.button" |
  Group-Object Pattern |
  Sort-Object Count -Descending |
  Select-Object -First 20
```

**å¸¸è§é‡å¤æ ·å¼**ï¼š
- `.card` - å¡ç‰‡å®¹å™¨
- `.container` - é¡µé¢å®¹å™¨
- `.button-primary` - ä¸»æŒ‰é’®
- `.text-gray` - ç°è‰²æ–‡æœ¬
- `.flex-row` - æ¨ªå‘å¸ƒå±€
- `.flex-col` - çºµå‘å¸ƒå±€

---

### æ­¥éª¤1.4.2ï¼šåˆ›å»ºå…¬å…±æ ·å¼æ–‡ä»¶

**æ–‡ä»¶**: `miniprogram/app.wxss`

æ·»åŠ ä»¥ä¸‹å…¬å…±æ ·å¼ï¼š

```css
/* å…¬å…±å®¹å™¨æ ·å¼ */
.page-container {
  min-height: 100vh;
  background: #f5f5f5;
  padding: 20rpx;
}

/* å…¬å…±å¡ç‰‡æ ·å¼ */
.common-card {
  background: #fff;
  border-radius: 10rpx;
  padding: 20rpx;
  margin-bottom: 20rpx;
  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);
}

/* å…¬å…±å¸ƒå±€æ ·å¼ */
.flex-row {
  display: flex;
  flex-direction: row;
  align-items: center;
}

.flex-col {
  display: flex;
  flex-direction: column;
}

.flex-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}

/* å…¬å…±æ–‡æœ¬æ ·å¼ */
.text-primary {
  color: #1989fa;
}

.text-gray {
  color: #999;
}

.text-dark {
  color: #333;
}

.text-bold {
  font-weight: bold;
}

/* å…¬å…±æŒ‰é’®æ ·å¼ */
.button-primary {
  background: #1989fa;
  color: #fff;
  border-radius: 10rpx;
  padding: 20rpx 40rpx;
  border: none;
}

.button-secondary {
  background: #f5f5f5;
  color: #333;
  border-radius: 10rpx;
  padding: 20rpx 40rpx;
  border: 1rpx solid #ddd;
}
```

---

### æ­¥éª¤1.4.3ï¼šæ›¿æ¢é¡µé¢ä¸­çš„é‡å¤æ ·å¼

**ç¤ºä¾‹**ï¼šä¼˜åŒ– `pages/operations/index.wxss`

**æ—§ä»£ç **ï¼š
```css
/* âŒ é‡å¤å®šä¹‰çš„æ ·å¼ */
.operation-container {
  min-height: 100vh;
  background: #f5f5f5;
  padding: 20rpx;
}

.operation-card {
  background: #fff;
  border-radius: 10rpx;
  padding: 20rpx;
  margin-bottom: 20rpx;
  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);
}

.card-title {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
```

**æ–°ä»£ç **ï¼š
```css
/* âœ… ä½¿ç”¨å…¬å…±æ ·å¼ */
.operation-container {
  /* ä½¿ç”¨app.wxssä¸­çš„.page-container */
}

.operation-card {
  /* ä½¿ç”¨app.wxssä¸­çš„.common-card */
}

.card-title {
  /* ä½¿ç”¨app.wxssä¸­çš„.flex-between */
}

/* ä»…ä¿ç•™é¡µé¢ç‰¹æœ‰æ ·å¼ */
.operation-specific-style {
  /* é¡µé¢ç‰¹æœ‰çš„æ ·å¼ */
}
```

**æ›´æ–°WXML**ï¼š
```xml
<!-- æ—§ä»£ç  -->
<view class="operation-container">
  <view class="operation-card">
    <view class="card-title">
      ...
    </view>
  </view>
</view>

<!-- æ–°ä»£ç  -->
<view class="page-container">
  <view class="common-card">
    <view class="flex-between">
      ...
    </view>
  </view>
</view>
```

---

### æ­¥éª¤1.4.4ï¼šç»„ä»¶åŒ–é‡å¤æ¨¡æ¿

**è¯†åˆ«é‡å¤æ¨¡æ¿**ï¼š

å¦‚æœå¤šä¸ªé¡µé¢éƒ½æœ‰ç±»ä¼¼çš„å¡ç‰‡ç»“æ„ï¼Œå¯ä»¥åˆ›å»ºé€šç”¨ç»„ä»¶ã€‚

**åˆ›å»ºå…¬å…±å¡ç‰‡ç»„ä»¶**ï¼š

```powershell
# åˆ›å»ºç»„ä»¶ç›®å½•
New-Item -ItemType Directory -Path components\common-card -Force

# åˆ›å»ºç»„ä»¶æ–‡ä»¶
New-Item -ItemType File -Path components\common-card\index.wxml
New-Item -ItemType File -Path components\common-card\index.wxss
New-Item -ItemType File -Path components\common-card\index.js
New-Item -ItemType File -Path components\common-card\index.json
```

**components/common-card/index.wxml**ï¼š
```xml
<view class="common-card">
  <view class="card-header" wx:if="{{title}}">
    <text class="card-title">{{title}}</text>
  </view>
  <view class="card-body">
    <slot></slot>
  </view>
</view>
```

**åœ¨é¡µé¢ä¸­ä½¿ç”¨ç»„ä»¶**ï¼š

```json
// pages/operations/index.json
{
  "usingComponents": {
    "common-card": "/components/common-card/index"
  }
}
```

```xml
<!-- pages/operations/index.wxml -->
<common-card title="é€šä¿¡ç¿»è¯‘">
  <!-- å¡ç‰‡å†…å®¹ -->
</common-card>
```

---

### æ­¥éª¤1.4.5ï¼šéªŒè¯æ ·å¼ä¼˜åŒ–

#### 5.1 è§†è§‰å›å½’æµ‹è¯•

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼Œé€é¡µæ£€æŸ¥ï¼š

```
æ£€æŸ¥æ¸…å•ï¼š
âœ… èµ„æ–™æŸ¥è¯¢é¡µé¢ - å¸ƒå±€æ­£å¸¸
âœ… è®¡ç®—å·¥å…·é¡µé¢ - å¸ƒå±€æ­£å¸¸
âœ… é©¾é©¶èˆ±é¡µé¢ - å¸ƒå±€æ­£å¸¸
âœ… é€šä¿¡é¡µé¢ - å¸ƒå±€æ­£å¸¸
âœ… æˆ‘çš„é¦–é¡µ - å¸ƒå±€æ­£å¸¸
âœ… æ‰€æœ‰å¡ç‰‡æ ·å¼ä¸€è‡´
âœ… æ‰€æœ‰æŒ‰é’®æ ·å¼ä¸€è‡´
âœ… æ‰€æœ‰æ–‡æœ¬é¢œè‰²æ­£ç¡®
```

#### 5.2 æ–‡ä»¶å¤§å°æ£€æŸ¥

```powershell
# æ¯”è¾ƒä¼˜åŒ–å‰åçš„æ€»ä½“ç§¯
cd D:\FlightToolbox\miniprogram

# ç»Ÿè®¡æ‰€æœ‰.wxssæ–‡ä»¶çš„æ€»å¤§å°
$totalSize = (Get-ChildItem -Recurse -Filter *.wxss -File |
  Measure-Object -Property Length -Sum).Sum

Write-Output "ä¼˜åŒ–åwxssæ–‡ä»¶æ€»å¤§å°: $($totalSize / 1KB) KB"
```

#### 5.3 çœŸæœºæµ‹è¯•

åœ¨Androidå’ŒiOSè®¾å¤‡ä¸Šæµ‹è¯•ï¼š
- âœ… æ‰€æœ‰é¡µé¢æ ·å¼æ­£å¸¸
- âœ… å“åº”å¼å¸ƒå±€æ­£ç¡®
- âœ… ä¸åŒå±å¹•å°ºå¯¸æ˜¾ç¤ºæ­£å¸¸

---

### æ­¥éª¤1.4.6ï¼šæäº¤Gitè®°å½•ï¼ˆå¦‚æœæ‰§è¡Œäº†æ­¤ä¼˜åŒ–ï¼‰

```powershell
cd D:\FlightToolbox

git add miniprogram/app.wxss
git add miniprogram/components/common-card/
git add miniprogram/pages/*/index.wxss
git add miniprogram/pages/*/index.wxml

git commit -m "é˜¶æ®µ1.4: ä¼˜åŒ–æ ·å¼æ¨¡æ¿ï¼ˆ50-100KBï¼‰

ä¼˜åŒ–å†…å®¹ï¼š
- æå–å…¬å…±æ ·å¼åˆ° app.wxss
- åˆ›å»º common-card é€šç”¨ç»„ä»¶
- æ›¿æ¢å„é¡µé¢é‡å¤æ ·å¼ä¸ºå…¬å…±æ ·å¼ç±»
- åˆ é™¤å†—ä½™CSSè§„åˆ™

ä¼˜åŒ–é¡µé¢ï¼š
- pages/operations/
- pages/search/
- pages/flight-calculator/
- pages/home/
- (åˆ—å‡ºæ‰€æœ‰ä¼˜åŒ–çš„é¡µé¢)

éªŒè¯ç»“æœï¼š
- æ ·å¼æ–‡ä»¶æ€»å¤§å°å‡å°‘çº¦ XXX KB
- æ‰€æœ‰é¡µé¢è§†è§‰æ•ˆæœä¿æŒä¸€è‡´
- çœŸæœºæµ‹è¯•é€šè¿‡ï¼ˆAndroid + iOSï¼‰
- å“åº”å¼å¸ƒå±€æ­£å¸¸"
```

---

## âœ… é˜¶æ®µ1æ€»ç»“éªŒè¯

å®Œæˆæ‰€æœ‰ä¼˜åŒ–é¡¹åï¼Œè¿›è¡Œæœ€ç»ˆéªŒè¯ï¼š

### 1. ä¸»åŒ…å¤§å°éªŒè¯

```powershell
# è¿è¡Œä¸»åŒ…å¤§å°ç›‘æ§è„šæœ¬
cd D:\FlightToolbox
.\åˆ†åŒ…æ–¹æ¡ˆ\monitor-main-package-size.ps1

# é¢„æœŸç»“æœï¼š
# ä¼˜åŒ–å‰ï¼š2698 KB
# ä¼˜åŒ–åï¼š2286-2386 KBï¼ˆèŠ‚çœ312-412KBï¼‰
```

### 2. åŠŸèƒ½å®Œæ•´æ€§éªŒè¯

```
æ ¸å¿ƒåŠŸèƒ½æ¸…å•ï¼š
âœ… GPSåœ°é€Ÿã€é«˜åº¦ã€åæ ‡æ­£å¸¸æ˜¾ç¤º
âœ… æŒ‡å—é’ˆèˆªå‘æ­£å¸¸å·¥ä½œ
âœ… å§¿æ€ä»ªå®Œå…¨æ­£å¸¸ï¼ˆä¿¯ä»°ã€æ»šè½¬ã€æ ¡å‡†ï¼‰
âœ… ä¼ æ„Ÿå™¨èåˆæ­£å¸¸è¿è¡Œ
âœ… é€šä¿¡è§„åˆ™æ•°æ®æ­£å¸¸åŠ è½½
âœ… æ ‡å‡†ç”¨è¯­æ•°æ®æ­£å¸¸åŠ è½½
âœ… èˆªçº¿å½•éŸ³åœ°åŒºåˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
âœ… èˆªçº¿å½•éŸ³æ’­æ”¾æ­£å¸¸
âœ… æ‰€æœ‰TabBarå¯¼èˆªæ­£å¸¸
âœ… æ‰€æœ‰é¡µé¢æ ·å¼æ­£å¸¸
```

### 3. ç¦»çº¿æ¨¡å¼éªŒè¯

```
ç¦»çº¿æµ‹è¯•æ¸…å•ï¼š
âœ… å¼€å¯é£è¡Œæ¨¡å¼
âœ… é‡å¯å°ç¨‹åº
âœ… è®¿é—®é©¾é©¶èˆ±é¡µé¢ - GPS/å§¿æ€ä»ª/èˆªå‘æ­£å¸¸
âœ… è®¿é—®é€šä¿¡é¡µé¢ - æ•°æ®åŠ è½½æ­£å¸¸
âœ… è®¿é—®èˆªçº¿å½•éŸ³ - éŸ³é¢‘æ’­æ”¾æ­£å¸¸
âœ… æ‰€æœ‰åŠŸèƒ½åœ¨ç¦»çº¿æ¨¡å¼ä¸‹å¯ç”¨
```

### 4. çœŸæœºæµ‹è¯•éªŒè¯

```
AndroidçœŸæœºæµ‹è¯•ï¼š
âœ… åä¸ºè®¾å¤‡æµ‹è¯•é€šè¿‡
âœ… å°ç±³è®¾å¤‡æµ‹è¯•é€šè¿‡
âœ… OPPOè®¾å¤‡æµ‹è¯•é€šè¿‡
âœ… vivoè®¾å¤‡æµ‹è¯•é€šè¿‡

iOSçœŸæœºæµ‹è¯•ï¼š
âœ… iPhone 11åŠä»¥ä¸Šæµ‹è¯•é€šè¿‡
âœ… iOS 14åŠä»¥ä¸Šæµ‹è¯•é€šè¿‡

å¼±ç½‘ç¯å¢ƒæµ‹è¯•ï¼š
âœ… WiFiå¼±ç½‘æµ‹è¯•é€šè¿‡
âœ… 4Gå¼±ç½‘æµ‹è¯•é€šè¿‡

å†·å¯åŠ¨æµ‹è¯•ï¼š
âœ… é¦–æ¬¡å®‰è£…å¯åŠ¨æ­£å¸¸
âœ… æ¸…é™¤ç¼“å­˜åå¯åŠ¨æ­£å¸¸
```

### 5. Gitæäº¤æœ€ç»ˆè®°å½•

```powershell
cd D:\FlightToolbox

# æŸ¥çœ‹æ‰€æœ‰ä¿®æ”¹
git log --oneline feature/phase1-optimization

# åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼ˆå¦‚æœæ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼‰
git checkout main
git merge feature/phase1-optimization

# æ‰“æ ‡ç­¾
git tag -a v2.8.1-phase1 -m "é˜¶æ®µ1ä¼˜åŒ–å®Œæˆ: ä¸»åŒ…å‡å°‘312-412KB

ä¼˜åŒ–å†…å®¹ï¼š
1. åˆ é™¤NDæ¨¡å—ï¼ˆ150-200KBï¼‰
2. åˆ†åŒ…é€šä¿¡æ•°æ®ï¼ˆ88KBï¼‰
3. ç²¾ç®€éŸ³é¢‘é…ç½®ï¼ˆ24KBï¼‰
4. ä¼˜åŒ–æ ·å¼æ¨¡æ¿ï¼ˆ50-100KBï¼Œå¯é€‰ï¼‰

éªŒè¯ç»“æœï¼š
- ä¸»åŒ…ä»2698KBé™è‡³2286-2386KB
- GPS/å§¿æ€ä»ª/èˆªå‘åŠŸèƒ½å®Œå…¨æ­£å¸¸
- ç¦»çº¿æ¨¡å¼æ‰€æœ‰åŠŸèƒ½å¯ç”¨
- Android + iOS çœŸæœºæµ‹è¯•é€šè¿‡
- ä¸ºåç»­ä¼˜åŒ–é¢„ç•™å……è¶³ç©ºé—´"

# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin main --tags
```

---

## ğŸ”„ å›æ»šæ–¹æ¡ˆ

å¦‚æœé‡åˆ°é—®é¢˜éœ€è¦å›æ»šï¼š

### å¿«é€Ÿå›æ»š

```powershell
# å›æ»šåˆ°ä¼˜åŒ–å‰çš„çŠ¶æ€
cd D:\FlightToolbox
git checkout main
git reset --hard <ä¼˜åŒ–å‰çš„commit-hash>

# æˆ–è€…å›æ»šåˆ°ç‰¹å®šä¼˜åŒ–é¡¹
git revert <ä¼˜åŒ–é¡¹çš„commit-hash>
```

### åˆ†æ­¥å›æ»š

```powershell
# ä»…å›æ»šNDåˆ é™¤
git revert <é˜¶æ®µ1.1çš„commit-hash>

# ä»…å›æ»šé€šä¿¡æ•°æ®è¿ç§»
git revert <é˜¶æ®µ1.2çš„commit-hash>

# ä»…å›æ»šéŸ³é¢‘é…ç½®ä¼˜åŒ–
git revert <é˜¶æ®µ1.3çš„commit-hash>
```

---

## ğŸ“ é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šGPS/å§¿æ€ä»ª/èˆªå‘åŠŸèƒ½å¼‚å¸¸

**ç—‡çŠ¶**ï¼š
- GPSåœ°é€Ÿæˆ–é«˜åº¦ä¸æ˜¾ç¤º
- å§¿æ€ä»ªä¸å“åº”
- æŒ‡å—é’ˆä¸è½¬åŠ¨

**æ’æŸ¥æ­¥éª¤**ï¼š

```powershell
# 1. æ£€æŸ¥æ˜¯å¦è¯¯åˆ æ ¸å¿ƒæ¨¡å—
cd D:\FlightToolbox\miniprogram\pages\cockpit\modules

# éªŒè¯æ ¸å¿ƒæ–‡ä»¶å­˜åœ¨
Test-Path gps-manager.js           # å¿…é¡»True
Test-Path attitude-indicator.js    # å¿…é¡»True
Test-Path compass-manager-simple.js # å¿…é¡»True
Test-Path sensor-fusion-core.js    # å¿…é¡»True

# 2. æ£€æŸ¥index.jsä¸­çš„æ ¸å¿ƒæ¨¡å—å¼•ç”¨
Select-String -Path ..\index.js -Pattern "gps-manager|attitude-indicator|compass-manager"

# 3. å›æ»šNDåˆ é™¤
git revert <é˜¶æ®µ1.1çš„commit-hash>
```

### é—®é¢˜2ï¼šé€šä¿¡æ•°æ®åŠ è½½å¤±è´¥

**ç—‡çŠ¶**ï¼š
- é€šä¿¡è§„åˆ™é¡µé¢ç©ºç™½
- æ ‡å‡†ç”¨è¯­æ— æ³•æ˜¾ç¤º

**æ’æŸ¥æ­¥éª¤**ï¼š

```powershell
# 1. æ£€æŸ¥æ•°æ®æ–‡ä»¶æ˜¯å¦åœ¨æ­£ç¡®ä½ç½®
Test-Path packageCCAR\data\CommunicationRules.js  # å¿…é¡»True
Test-Path packageCCAR\data\phraseology.js         # å¿…é¡»True

# 2. æ£€æŸ¥é¢„åŠ è½½è§„åˆ™
Select-String -Path app.json -Pattern "packageCCAR" -Context 2,2

# 3. æ£€æŸ¥å¼‚æ­¥åŠ è½½ä»£ç 
Select-String -Path pages\operations\index.ts -Pattern "require.*packageCCAR"
```

### é—®é¢˜3ï¼šéŸ³é¢‘æ— æ³•æ’­æ”¾

**ç—‡çŠ¶**ï¼š
- åœ°åŒºåˆ—è¡¨æ˜¾ç¤ºæ­£å¸¸
- ç‚¹å‡»éŸ³é¢‘æ— ååº”æˆ–æŠ¥é”™

**æ’æŸ¥æ­¥éª¤**ï¼š

å‚è€ƒè¯¦ç»†æ–‡æ¡£ï¼š`èˆªçº¿å½•éŸ³åˆ†åŒ…é¢„åŠ è½½è§„åˆ™è®°å½•/æ•…éšœæ’æŸ¥-éŸ³é¢‘æ— æ³•æ’­æ”¾.md`

```powershell
# å¿«é€Ÿæ£€æŸ¥3ä¸ªæ ¸å¿ƒé…ç½®æ–‡ä»¶
Select-String -Path utils\audio-config.js -Pattern "loadRegionData"
Select-String -Path utils\audio-package-loader.js -Pattern "packageMapping"
Select-String -Path pages\audio-player\index.ts -Pattern "regionPathMap"
```

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

é˜¶æ®µ1å®Œæˆåï¼Œæ ¹æ®ä¸»åŒ…å¤§å°å†³å®šä¸‹ä¸€æ­¥ï¼š

### æƒ…å†µ1ï¼šä¸»åŒ…ä»è¶…2MBï¼ˆéœ€è¦ç»§ç»­é˜¶æ®µ2ï¼‰

```
å½“å‰ä¸»åŒ…ï¼š2286-2386 KBï¼ˆä»è¶…é™æˆ–æ¥è¿‘é™åˆ¶ï¼‰
å»ºè®®è¡ŒåŠ¨ï¼š
1. ç«‹å³å¼€å§‹é˜¶æ®µ2ï¼ˆé€šä¿¡å¤±æ•ˆ+èˆªçº¿å½•éŸ³åˆ†åŒ…ï¼‰
2. é¢„æœŸå†èŠ‚çœ615KB
3. å®Œæˆåä¸»åŒ…çº¦1671KBï¼Œæ»¡è¶³2MBé™åˆ¶
```

ğŸ‘‰ **ç»§ç»­é˜…è¯»**ï¼š`é˜¶æ®µ2-ä¸­ç­‰é£é™©ä¼˜åŒ–.md`

### æƒ…å†µ2ï¼šä¸»åŒ…å·²é™è‡³2MBä»¥ä¸‹ï¼ˆå¯æš‚ç¼“é˜¶æ®µ2ï¼‰

```
å½“å‰ä¸»åŒ…ï¼š1800-1900 KBï¼ˆå·²æ»¡è¶³2MBé™åˆ¶ï¼‰
å»ºè®®è¡ŒåŠ¨ï¼š
1. æš‚ç¼“é˜¶æ®µ2å’Œé˜¶æ®µ3
2. è§‚å¯Ÿ1-2å‘¨ï¼Œç¡®ä¿ç¨³å®š
3. æ ¹æ®åç»­åŠŸèƒ½æ‰©å±•éœ€æ±‚å†å†³å®š
```

### æƒ…å†µ3ï¼šä¸»åŒ…å¤§å¹…é™ä½ï¼ˆé˜¶æ®µ3å¯èƒ½ä¸éœ€è¦ï¼‰

```
å½“å‰ä¸»åŒ…ï¼š1500-1600 KBï¼ˆç•™æœ‰å……è¶³ç©ºé—´ï¼‰
å»ºè®®è¡ŒåŠ¨ï¼š
1. é˜¶æ®µ2å¯é€‰æ‹©æ€§æ‰§è¡Œï¼ˆè¿›ä¸€æ­¥ä¼˜åŒ–ï¼‰
2. é˜¶æ®µ3ï¼ˆé©¾é©¶èˆ±åˆ†åŒ…ï¼‰å¯èƒ½ä¸éœ€è¦
3. ä¿æŒå½“å‰çŠ¶æ€ï¼Œé¢„ç•™æ‰©å±•ç©ºé—´
```

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´**: 2025-11-01
**ç»´æŠ¤è€…**: FlightToolbox AI Assistant
**ç‰ˆæœ¬**: v1.0
**ä¸‹ä¸€æ­¥**: é˜…è¯» `é˜¶æ®µ2-ä¸­ç­‰é£é™©ä¼˜åŒ–.md`

# 极简新用户引导功能

## 🎯 功能概述

为飞行工具箱小程序新增了极简的新用户引导功能，主要针对积分系统、签到、广告观看等核心功能进行简洁的介绍。

## ✨ 主要特性

### 🔍 智能检测
- 自动检测首次使用的用户
- 支持手动重新查看引导

### 🎨 简洁界面
- 简洁的卡片设计风格
- 居中显示，轻量级定位
- 简单的指向动画 👆
- 支持深色模式

### 🎮 简单交互
- 简单的下一步导航
- 进度指示器
- 可随时跳过引导
- 箭头指向具体功能

### 🎁 奖励机制
- 完成引导获得10积分奖励
- 仅首次完成可获得奖励

## 📋 引导步骤

### 步骤1：欢迎使用飞行工具箱 💎
- **功能说明**：介绍积分系统的作用和重要性
- **内容**：这里是您的积分显示区域，积分可用于解锁高级功能

### 步骤2：每日签到 ⭐
- **功能说明**：介绍每日签到获取积分的方法
- **内容**：每天签到可获得积分奖励，连续签到奖励更多

### 步骤3：观看广告 📺
- **功能说明**：介绍通过观看视频广告快速获取积分
- **内容**：观看视频广告是快速获取积分的好方法

## 🛠️ 技术实现

### 文件结构
```
miniprogram/
├── components/
│   └── user-guide/
│       ├── index.js     # 组件逻辑
│       ├── index.json   # 组件配置
│       ├── index.wxml   # 组件模板
│       └── index.wxss   # 组件样式
├── pages/
│   └── others/
│       ├── index.ts     # 页面逻辑（已集成引导功能）
│       ├── index.wxml   # 页面模板（已添加引导组件）
│       └── index.json   # 页面配置（已注册组件）
└── docs/
    └── user-guide-feature.md  # 详细技术文档
```

### 核心功能
1. **智能位置计算**：自动计算目标元素位置并调整引导框位置
2. **响应式适配**：支持不同屏幕尺寸的完美适配
3. **深色模式支持**：自动适配深色模式样式
4. **动画效果**：流畅的高亮和过渡动画
5. **错误处理**：目标元素不存在时的优雅降级

## 🧪 测试方法

### 开发环境测试
1. 在微信开发者工具中打开小程序
2. 进入"我的首页"页面
3. 点击页面底部版本号
4. 输入测试指令：
   - `reset_guide` - 重置引导状态
   - `show_guide` - 手动显示引导

### 真机测试
1. 清除小程序数据和缓存
2. 重新进入小程序
3. 应该会自动显示新用户引导

### 测试脚本
- `test-user-guide.bat` - Windows测试脚本
- `demo-user-guide.ps1` - PowerShell演示脚本

## 📱 用户体验流程

1. **新用户首次进入** → 自动显示引导
2. **查看积分介绍** → 了解积分系统
3. **体验签到功能** → 获得首次签到积分
4. **了解广告机制** → 学会快速获取积分
5. **查看积分规则** → 掌握完整使用方法
6. **完成引导** → 获得100积分奖励

## 🔧 自定义配置

### 修改引导步骤
在 `components/user-guide/index.js` 中修改 `guideSteps` 数组：

```javascript
guideSteps: [
  {
    id: 'custom_step',
    title: '自定义步骤',
    description: '步骤描述',
    icon: '🎯',
    targetSelector: '.custom-selector',
    position: 'bottom',
    content: '详细说明内容'
  }
]
```

### 修改奖励积分
在 `pages/others/index.ts` 的 `giveNewUserReward` 方法中修改：

```javascript
// 修改奖励积分数量
const result = await pointsManager.addPoints(200, 'new_user_guide', '完成新手引导奖励');
```

## 📊 数据存储

引导功能使用以下本地存储键：

- `user_guide_completed` - 是否已完成引导
- `app_first_launch` - 是否为首次启动
- `new_user_reward_given` - 是否已发放新用户奖励
- `guide_start_time` - 引导开始时间
- `guide_prompt_shown` - 引导提示显示时间

## 🎨 样式特色

- **现代化设计**：采用卡片式设计和渐变色彩
- **动画效果**：高亮脉冲动画和流畅过渡
- **响应式布局**：适配不同屏幕尺寸
- **深色模式**：完整的深色模式支持
- **无障碍设计**：良好的对比度和可读性

## 🚀 部署说明

1. 确保所有文件已正确添加到项目中
2. 在微信开发者工具中编译项目
3. 测试引导功能是否正常工作
4. 上传代码并提交审核

## 📈 未来扩展

1. **多语言支持**：支持国际化
2. **个性化引导**：根据用户行为定制引导内容
3. **数据分析**：收集引导完成率和用户反馈
4. **A/B测试**：测试不同引导方案的效果
5. **语音引导**：添加语音播报功能

## 🐛 问题排查

### 常见问题

1. **引导不显示**
   - 检查是否已完成引导（查看本地存储）
   - 使用 `reset_guide` 指令重置状态

2. **目标元素定位不准确**
   - 检查目标元素的选择器是否正确
   - 确保目标元素已渲染完成

3. **样式显示异常**
   - 检查是否有样式冲突
   - 确认深色模式适配是否正确

### 调试方法

1. 打开开发者工具控制台
2. 查看引导相关的日志输出
3. 检查本地存储中的引导状态
4. 使用测试指令进行调试

## 📞 技术支持

如有问题或建议，请联系开发团队或在项目中提交Issue。

---

**版本**: v1.0.0  
**更新时间**: 2024年12月  
**兼容性**: 微信小程序基础库 2.0+
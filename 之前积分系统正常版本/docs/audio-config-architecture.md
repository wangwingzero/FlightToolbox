# ğŸ›©ï¸ FlightToolbox éŸ³é¢‘é…ç½®æ¶æ„æ–‡æ¡£

## ğŸ“– æ¦‚è¿°

æœ¬æ–‡æ¡£æ˜¯ FlightToolbox å°ç¨‹åºæ–°å¢æœºåœºéŸ³é¢‘çš„**å®Œæ•´æ“ä½œæŒ‡å—**ã€‚ä»»ä½•äººæŒ‰ç…§æ­¤æ–‡æ¡£ï¼Œéƒ½èƒ½å¿«é€Ÿå®Œæˆæ–°æœºåœºéŸ³é¢‘çš„é›†æˆã€‚

## ğŸ¯ æ–°å¢æœºåœºå®Œæ•´æµç¨‹

### ğŸ“‹ å‡†å¤‡æ¸…å•

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨æœ‰ä»¥ä¸‹ææ–™ï¼š

- [ ] **éŸ³é¢‘æ–‡ä»¶**ï¼š`.mp3` æ ¼å¼çš„å½•éŸ³æ–‡ä»¶
- [ ] **å½•éŸ³ä¿¡æ¯**ï¼šæ¯ä¸ªå½•éŸ³çš„è‹±æ–‡åŸæ–‡å’Œä¸­æ–‡ç¿»è¯‘
- [ ] **æœºåœºä¿¡æ¯**ï¼šå›½å®¶åã€æœºåœºåã€ICAOä»£ç ç­‰
- [ ] **å¼€å‘ç¯å¢ƒ**ï¼šå¾®ä¿¡å¼€å‘è€…å·¥å…·

---

## âš¡ å¿«é€Ÿä¸Šæ‰‹ï¼š5æ­¥å®Œæˆæ–°å¢

### ç¬¬1æ­¥ï¼šå‡†å¤‡éŸ³é¢‘æ•°æ®æ–‡ä»¶ ğŸ“

åœ¨ `miniprogram/data/regions/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æ•°æ®æ–‡ä»¶ï¼š

**æ–‡ä»¶åæ ¼å¼**ï¼š`[å›½å®¶è‹±æ–‡å°å†™].js`

**ç¤ºä¾‹**ï¼š`singapore.js`

```javascript
const SingaporeData = {
  "clips": [
    {
      "label": "è¿›è¿‘",
      "full_transcript": "Singapore Airlines 117, turn left heading 180, descend to 9000 feet.",
      "translation_cn": "æ–°èˆª117ï¼Œå·¦è½¬èˆªå‘180ï¼Œä¸‹é™è‡³9000è‹±å°ºã€‚",
      "mp3_file": "Singapore-Airlines-117_Turn-Left-180-Descend-9000.mp3"
    },
    {
      "label": "å¡”å°",
      "full_transcript": "Singapore Airlines 117, runway 02 left, cleared to land.",
      "translation_cn": "æ–°èˆª117ï¼Œè·‘é“02å·¦ï¼Œå¯ä»¥è½åœ°ã€‚",
      "mp3_file": "Singapore-Airlines-117_Runway-02L-Cleared-to-Land.mp3"
    }
    // ... æ›´å¤šå½•éŸ³æ•°æ®
  ]
};

module.exports = SingaporeData;
```

**âš ï¸ é‡è¦è¯´æ˜**ï¼š
- `label`ï¼šå½•éŸ³ç±»å‹ï¼ˆè¿›è¿‘/å¡”å°/åœ°é¢/æ”¾è¡Œ/åŒºè°ƒï¼‰
- `full_transcript`ï¼šè‹±æ–‡åŸæ–‡ï¼ˆå¿…é¡»å‡†ç¡®ï¼‰
- `translation_cn`ï¼šä¸­æ–‡ç¿»è¯‘
- `mp3_file`ï¼šéŸ³é¢‘æ–‡ä»¶åï¼ˆæ ¼å¼ï¼š`èˆªç­å·_åŠ¨ä½œæè¿°.mp3`ï¼‰

---

### ç¬¬2æ­¥ï¼šåˆ›å»ºéŸ³é¢‘åˆ†åŒ…ç›®å½• ğŸ“¦

åœ¨ `miniprogram/` ç›®å½•ä¸‹åˆ›å»ºåˆ†åŒ…æ–‡ä»¶å¤¹ï¼š

**å‘½åæ ¼å¼**ï¼š`package[å›½å®¶è‹±æ–‡é¦–å­—æ¯å¤§å†™]`

```bash
# åˆ›å»ºæ–°åŠ å¡åˆ†åŒ…ç›®å½•
mkdir miniprogram/packageSingapore

# å°†æ‰€æœ‰ MP3 éŸ³é¢‘æ–‡ä»¶æ”¾å…¥è¯¥ç›®å½•
cp *.mp3 miniprogram/packageSingapore/
```

**å¿…é¡»åˆ›å»ºçš„åŸºç¡€æ–‡ä»¶**ï¼š

1. **index.js**ï¼š
```javascript
Page({
  data: {},
  onLoad() {
    console.log('æ–°åŠ å¡éŸ³é¢‘åˆ†åŒ…é¡µé¢åŠ è½½');
  }
});
```

2. **index.json**ï¼š
```json
{
  "navigationBarTitleText": "æ–°åŠ å¡æœºåœºå½•éŸ³",
  "navigationBarBackgroundColor": "#16a085",
  "navigationBarTextStyle": "white"
}
```

3. **index.wxml**ï¼š
```xml
<view class="container">
  <view class="header">
    <text>ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡æ¨Ÿå®œæœºåœºå½•éŸ³</text>
  </view>
</view>
```

---

### ç¬¬3æ­¥ï¼šæ›´æ–°éŸ³é¢‘é…ç½®ç®¡ç†å™¨ âš™ï¸

ç¼–è¾‘ `miniprogram/utils/audio-config.js` æ–‡ä»¶ï¼š

#### 3.1 æ·»åŠ æ•°æ®æ–‡ä»¶å¼•ç”¨

åœ¨æ–‡ä»¶é¡¶éƒ¨çš„ `try` å—ä¸­æ·»åŠ ï¼š

```javascript
// æ‰¾åˆ°è¿™æ®µä»£ç 
try {
  japanData = require('../data/regions/japan.js');
  philippinesData = require('../data/regions/philippines.js');
  koreanData = require('../data/regions/korean.js');
  // ğŸ‘‡ æ·»åŠ è¿™ä¸€è¡Œ
  singaporeData = require('../data/regions/singapore.js');
  // ... å…¶ä»–æ•°æ®æ–‡ä»¶
}
```

åœ¨å˜é‡å£°æ˜éƒ¨åˆ†æ·»åŠ ï¼š

```javascript
// æ‰¾åˆ°è¿™è¡Œ
let japanData, philippinesData, koreanData, singaporeData, germanyData, ...
// ç¡®ä¿ singaporeData åœ¨å˜é‡åˆ—è¡¨ä¸­
```

#### 3.2 æ·»åŠ åœ°åŒºä¿¡æ¯

åœ¨ `this.regions` æ•°ç»„ä¸­æ·»åŠ ï¼š

```javascript
{
  id: 'singapore',
  continentId: 'asia',
  name: 'æ–°åŠ å¡',
  flag: 'ğŸ‡¸ğŸ‡¬',
  description: 'æ¨Ÿå®œæœºåœºçœŸå®é™†ç©ºé€šè¯å½•éŸ³',
  count: 8,  // å®é™…å½•éŸ³æ•°é‡
  hasRealRecordings: true
},
```

#### 3.3 æ·»åŠ æœºåœºé…ç½®

åœ¨ `this.airports` æ•°ç»„ä¸­æ·»åŠ ï¼š

```javascript
{
  id: 'singapore',
  regionId: 'singapore',
  name: 'æ–°åŠ å¡æ¨Ÿå®œæœºåœº',
  city: 'æ–°åŠ å¡',
  icao: 'WSSS',
  packageName: 'packageSingapore',
  audioPath: '/packageSingapore/',
  icon: 'ğŸŒŸ',
  description: 'æ¨Ÿå®œå›½é™…æœºåœºé™†ç©ºé€šè¯å½•éŸ³',
  clips: singaporeData.clips || []
},
```

---

### ç¬¬4æ­¥ï¼šæ›´æ–°å°ç¨‹åºé…ç½® ğŸ“±

ç¼–è¾‘ `miniprogram/app.json` æ–‡ä»¶ï¼š

#### 4.1 æ·»åŠ åˆ†åŒ…é…ç½®

åœ¨ `subPackages` æ•°ç»„ä¸­æ·»åŠ ï¼š

```json
{
  "root": "packageSingapore",
  "name": "singaporeAudioPackage",
  "pages": ["index"]
},
```

#### 4.2 é¢„åŠ è½½ç­–ç•¥è§„åˆ’ âš–ï¸

**ğŸš¨ å…³é”®å‘ç°ï¼šé¢„åŠ è½½æ˜¯çœŸæœºæˆåŠŸæ’­æ”¾éŸ³é¢‘çš„å¿…è¦æ¡ä»¶**

æ ¹æ®å®é™…æµ‹è¯•éªŒè¯ï¼Œå¾®ä¿¡å°ç¨‹åºåœ¨çœŸæœºç¯å¢ƒä¸‹æœ‰ä»¥ä¸‹å…³é”®ç‰¹å¾ï¼š

##### 4.2.1 é¢„åŠ è½½ vs å¼‚æ­¥åŠ è½½çš„çœŸæœºè¡¨ç°

**âœ… é¢„åŠ è½½åˆ†åŒ…ï¼šçœŸæœºæ’­æ”¾æˆåŠŸç‡ 100%**
- éŸ³é¢‘æ–‡ä»¶åœ¨å°ç¨‹åºå¯åŠ¨æ—¶å·²ä¸‹è½½åˆ°æœ¬åœ°
- å¯ä»¥åœ¨ç¦»çº¿çŠ¶æ€ä¸‹æ­£å¸¸æ’­æ”¾
- æ’­æ”¾å“åº”é€Ÿåº¦å¿«ï¼Œç”¨æˆ·ä½“éªŒå¥½

**âŒ å¼‚æ­¥åŠ è½½åˆ†åŒ…ï¼šçœŸæœºæ’­æ”¾æˆåŠŸç‡ä½**
- ä¾èµ–ç½‘ç»œç¯å¢ƒå’Œwx.loadSubpackage API
- åœ¨é£è¡Œæ¨¡å¼ä¸‹å®Œå…¨æ— æ³•åŠ è½½
- åŠ è½½å¤±è´¥ç‡é«˜ï¼Œç”¨æˆ·ä½“éªŒå·®

**ğŸ¯ ç»“è®ºï¼šçœŸæ­£èƒ½å¤Ÿåœ¨åˆ†åŒ…åæˆåŠŸæ’­æ”¾éŸ³é¢‘çš„å…³é”®å°±æ˜¯é¢„åŠ è½½ï¼**

##### 4.2.2 å®é™…é¢„åŠ è½½é…ç½® (2025å¹´7æœˆéªŒè¯)

**å½“å‰åˆ†æ•£é¢„åŠ è½½ç­–ç•¥**ï¼š
```json
"preloadRule": {
  "pages/others/index": {
    "network": "all", 
    "packages": ["packageC", "packageJapan", "packageSingapore"]  // æœºåœºæ•°æ® + æ—¥æœ¬ + æ–°åŠ å¡
  },
  "pages/abbreviations/index": {
    "network": "all",
    "packages": ["packageA", "packageB", "packageD", "packageAustralia"]  // ICAO + ç¼©å†™ + å®šä¹‰ + æ¾³å¤§åˆ©äºš
  },
  "pages/air-ground-communication/index": {
    "network": "all",
    "packages": ["packagePhilippines", "packageKorean"]  // è²å¾‹å®¾ + éŸ©å›½
  },
  "pages/recording-categories/index": {
    "network": "all",
    "packages": ["packageRussia"]  // ä¿„ç½—æ–¯ (å•ç‹¬ï¼Œé¿å…è¶…é™)
  },
  "pages/recording-clips/index": {
    "network": "all",
    "packages": ["packageSrilanka"]  // æ–¯é‡Œå…°å¡ (å•ç‹¬ï¼Œé¿å…è¶…é™)
  },
  "pages/audio-player/index": {
    "network": "all",
    "packages": ["packageJapan", "packageSingapore", "packagePhilippines"]  // é«˜é¢‘éŸ³é¢‘å¤‡ç”¨
  },
  "pages/communication-rules/index": {
    "network": "all",
    "packages": ["packageE", "packageTurkey"]  // é€šä¿¡å¤±æ•ˆæ•°æ® + åœŸè€³å…¶
  },
  "pages/airline-recordings/index": {
    "network": "all",
    "packages": ["packageH", "packageThailand"]  // åŒå‘å¤é£ + æ³°å›½
  }
}
```

##### 4.2.3 é¢„åŠ è½½ç­–ç•¥æ ¸å¿ƒåŸåˆ™

**ğŸ¯ æ ¸å¿ƒç›®æ ‡ï¼šæ‰€æœ‰éŸ³é¢‘åŒ…éƒ½é€šè¿‡é¢„åŠ è½½å®ç°**
- é¿å…ä¾èµ–å¼‚æ­¥åŠ è½½çš„ä¸ç¡®å®šæ€§
- ç¡®ä¿ç¦»çº¿æ’­æ”¾èƒ½åŠ›
- æä¾›æœ€ä½³ç”¨æˆ·ä½“éªŒ

**ğŸ“ å¤§å°é™åˆ¶ï¼šæ¯é¡µé¢é¢„åŠ è½½ < 2MB**
- å¾®ä¿¡å°ç¨‹åºä¸¥æ ¼é™åˆ¶
- é€šè¿‡åˆ†æ•£é¢„åŠ è½½ç­–ç•¥çªç ´é™åˆ¶
- åˆ©ç”¨å¤šä¸ªå¸¸ç”¨é¡µé¢åˆ†æ‹…é¢„åŠ è½½ä»»åŠ¡

**ğŸ“Š åˆ†æ•£é¢„åŠ è½½å†³ç­–æµç¨‹**ï¼š

1. **è®¡ç®—æ–°åˆ†åŒ…å¤§å°**
2. **è¯„ä¼°å„é¡µé¢å‰©ä½™å®¹é‡**
3. **é€‰æ‹©æœ€ä½³é¢„åŠ è½½é¡µé¢**ï¼š
   - ä¼˜å…ˆé€‰æ‹©ç”¨æˆ·å¸¸è®¿é—®çš„é¡µé¢
   - ç¡®ä¿ä¸šåŠ¡é€»è¾‘åˆç†æ€§
   - é¿å…è¶…è¿‡2MBé™åˆ¶

##### 4.2.4 å¸¸ç”¨é¡µé¢é¢„åŠ è½½å»ºè®®

**æ¨èé¢„åŠ è½½é¡µé¢ï¼ˆæŒ‰è®¿é—®é¢‘ç‡ï¼‰**ï¼š
1. **ä¸»é¡µ (others)**ï¼šç”¨æˆ·é¦–æ¬¡è¿›å…¥ï¼Œé€‚åˆæ ¸å¿ƒæ•°æ®
2. **ä¸‡èƒ½æŸ¥è¯¢é¡µé¢**ï¼šé«˜é¢‘ä½¿ç”¨ï¼Œé€‚åˆæŸ¥è¯¢æ•°æ®+å°éŸ³é¢‘åŒ…
3. **èˆªçº¿é£è¡Œé¡µé¢**ï¼šéŸ³é¢‘åŠŸèƒ½å…¥å£ï¼Œé€‚åˆä¸­ç­‰éŸ³é¢‘åŒ…
4. **å…¶ä»–åŠŸèƒ½é¡µé¢**ï¼šæ ¹æ®å‰©ä½™å®¹é‡çµæ´»åˆ†é…

---

### ç¬¬5æ­¥ï¼šæ›´æ–°éŸ³é¢‘æ’­æ”¾å™¨é…ç½® ğŸµ

ç¼–è¾‘ `miniprogram/pages/audio-player/index.ts` æ–‡ä»¶ï¼š

#### 5.1 æ·»åŠ è·¯å¾„æ˜ å°„

åœ¨ `regionPathMap` å¯¹è±¡ä¸­æ·»åŠ ï¼š

```typescript
const regionPathMap: { [key: string]: string } = {
  'japan': '/packageJapan/',
  'philippines': '/packagePhilippines/', 
  'korea': '/packageKorean/',
  'singapore': '/packageSingapore/',  // ğŸ‘ˆ æ·»åŠ è¿™ä¸€è¡Œ
  'thailand': '/packageThailand/',
  'russia': '/packageRussia/',
  // ... å…¶ä»–è·¯å¾„æ˜ å°„
};
```

#### 5.2 æ·»åŠ åˆ†åŒ…åŠ è½½æ˜ å°„

åœ¨ `subpackageMap` å¯¹è±¡ä¸­æ·»åŠ ï¼š

```typescript
const subpackageMap: { [key: string]: string } = {
  'japan': 'japanAudioPackage',
  'philippines': 'philippineAudioPackage',
  'korea': 'koreaAudioPackage', 
  'singapore': 'singaporeAudioPackage',  // ğŸ‘ˆ æ·»åŠ è¿™ä¸€è¡Œ
  'thailand': 'thailandAudioPackage',
  'russia': 'russiaAudioPackage',
  // ... å…¶ä»–åˆ†åŒ…æ˜ å°„
};
```

---

### ç¬¬6æ­¥ï¼šæ›´æ–°é¢„åŠ è½½åˆ†åŒ…åˆ—è¡¨ ğŸ“‹

æ ¹æ®æ‚¨åœ¨ç¬¬4æ­¥é€‰æ‹©çš„é¢„åŠ è½½ç­–ç•¥ï¼Œæ›´æ–°å¯¹åº”é¡µé¢çš„é¢„åŠ è½½åˆ†åŒ…åˆ—è¡¨ï¼š

#### 6.1 å¦‚æœæ·»åŠ åˆ° `air-ground-communication` é¡µé¢

ç¼–è¾‘ `miniprogram/pages/air-ground-communication/index.ts`ï¼š

```typescript
// æ–¹æ³•1: æ£€æŸ¥åˆ†åŒ…æ˜¯å¦å·²åŠ è½½
isPackageLoaded(packageName: string): boolean {
  const preloadedPackages = [
    "packageJapan", 
    "packageRussia",
    "packageSingapore"  // ğŸ‘ˆ å¦‚æœé¢„åŠ è½½åˆ°æ­¤é¡µé¢ï¼Œæ·»åŠ è¿™ä¸€è¡Œ
  ];
  return preloadedPackages.includes(packageName) || this.data.loadedPackages.includes(packageName);
}

// æ–¹æ³•2: åˆå§‹åŒ–é¢„åŠ è½½çŠ¶æ€
initializePreloadedPackages() {
  const preloadedPackages = [
    "packageJapan", 
    "packageRussia",
    "packageSingapore"  // ğŸ‘ˆ å¦‚æœé¢„åŠ è½½åˆ°æ­¤é¡µé¢ï¼Œæ·»åŠ è¿™ä¸€è¡Œ
  ];
  preloadedPackages.forEach(packageName => {
    if (!this.data.loadedPackages.includes(packageName)) {
      this.data.loadedPackages.push(packageName);
    }
  });
  this.setData({ loadedPackages: this.data.loadedPackages });
}
```

#### 6.2 å¦‚æœæ·»åŠ åˆ°å…¶ä»–é¡µé¢

å¦‚æœæ–°åˆ†åŒ…è¢«åˆ†é…åˆ° `recording-categories` æˆ– `recording-clips` é¡µé¢ï¼Œé‚£ä¹ˆ**æ— éœ€ä¿®æ”¹ä»£ç **ï¼Œå› ä¸ºè¿™äº›é¡µé¢ä½¿ç”¨å¼‚æ­¥åŠ è½½æœºåˆ¶ã€‚

---

## âœ… éªŒè¯ä¸æµ‹è¯•

### é…ç½®æ£€æŸ¥æ¸…å• ğŸ”

å®Œæˆæ‰€æœ‰é…ç½®åï¼ŒæŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š

#### é˜¶æ®µ1ï¼šæ–‡ä»¶å’Œè¯­æ³•æ£€æŸ¥
- [ ] **æ•°æ®æ–‡ä»¶è¯­æ³•**ï¼š`node -c miniprogram/data/regions/[country].js`
- [ ] **éŸ³é¢‘é…ç½®è¯­æ³•**ï¼š`node -c miniprogram/utils/audio-config.js`
- [ ] **å°ç¨‹åºé…ç½®**ï¼š`node -e "require('./miniprogram/app.json')"`
- [ ] **éŸ³é¢‘æ–‡ä»¶å­˜åœ¨**ï¼šç¡®è®¤æ‰€æœ‰ mp3 æ–‡ä»¶éƒ½åœ¨åˆ†åŒ…ç›®å½•ä¸­

#### é˜¶æ®µ2ï¼šåˆ†åŒ…å¤§å°æ£€æŸ¥
- [ ] **æ–°åˆ†åŒ…å¤§å°**ï¼š`du -sh miniprogram/package[Country]/`
- [ ] **é¢„åŠ è½½é¡µé¢æ€»å¤§å°**ï¼šéªŒè¯ < 2MB é™åˆ¶
- [ ] **æ‰€æœ‰åˆ†åŒ…æ€»å¤§å°**ï¼š`du -sh miniprogram/package*/`

#### é˜¶æ®µ3ï¼šé…ç½®ä¸€è‡´æ€§æ£€æŸ¥
- [ ] **æ•°æ®æ–‡ä»¶å¯¼å…¥**ï¼šæ£€æŸ¥ `audio-config.js` ä¸­çš„ require è¯­å¥
- [ ] **åœ°åŒºé…ç½®**ï¼šæ£€æŸ¥ `regions` æ•°ç»„ä¸­çš„æ–°åœ°åŒº
- [ ] **æœºåœºé…ç½®**ï¼šæ£€æŸ¥ `airports` æ•°ç»„ä¸­çš„æ–°æœºåœº
- [ ] **åˆ†åŒ…å®šä¹‰**ï¼šæ£€æŸ¥ `app.json` ä¸­çš„ `subPackages` é…ç½®
- [ ] **é¢„åŠ è½½è§„åˆ™**ï¼šæ£€æŸ¥ `app.json` ä¸­çš„ `preloadRule` é…ç½®
- [ ] **è·¯å¾„æ˜ å°„**ï¼šæ£€æŸ¥ `audio-player/index.ts` ä¸­çš„è·¯å¾„å’Œåˆ†åŒ…æ˜ å°„
- [ ] **é¢„åŠ è½½åˆ—è¡¨**ï¼šæ£€æŸ¥ç›¸å…³é¡µé¢çš„é¢„åŠ è½½åˆ†åŒ…åˆ—è¡¨

### åŠŸèƒ½æµ‹è¯•æ­¥éª¤ ğŸ§ª

#### å¼€å‘è€…å·¥å…·æµ‹è¯•
1. **é‡å¯å¼€å‘è€…å·¥å…·**
2. **æ£€æŸ¥æ§åˆ¶å°é”™è¯¯**ï¼šç¡®ä¿æ— çº¢è‰²é”™è¯¯ä¿¡æ¯
3. **è¿›å…¥"é™†ç©ºé€šè¯"é¡µé¢**
4. **ç‚¹å‡»"èˆªçº¿å½•éŸ³"**
5. **éªŒè¯æ–°å›½å®¶æ˜¾ç¤º**ï¼šç¡®è®¤æ–°å¢å›½å®¶å‡ºç°åœ¨åˆ—è¡¨ä¸­
6. **é€‰æ‹©æ–°å¢å›½å®¶**ï¼š
   - é¢„åŠ è½½åˆ†åŒ…ï¼šåº”ç«‹å³è¿›å…¥åˆ†ç±»é¡µé¢
   - å¼‚æ­¥åŠ è½½åˆ†åŒ…ï¼šåº”æ˜¾ç¤º"æ­£åœ¨åŠ è½½éŸ³é¢‘èµ„æº..."
7. **é€‰æ‹©å½•éŸ³åˆ†ç±»**
8. **æ’­æ”¾éŸ³é¢‘æµ‹è¯•**ï¼š
   - æ£€æŸ¥éŸ³é¢‘è·¯å¾„æ­£ç¡®ï¼š`/package[Country]/xxx.mp3`
   - ç¡®è®¤éŸ³é¢‘èƒ½æ­£å¸¸æ’­æ”¾
   - éªŒè¯ä¸­è‹±æ–‡æ–‡æœ¬æ˜¾ç¤ºæ­£ç¡®

#### çœŸæœºæµ‹è¯•ï¼ˆæ¨èï¼‰
1. **æ‰«ç é¢„è§ˆåˆ°çœŸæœº**
2. **é‡å¤å¼€å‘è€…å·¥å…·çš„æµ‹è¯•æ­¥éª¤**
3. **ç‰¹åˆ«å…³æ³¨å¼‚æ­¥åŠ è½½åŠŸèƒ½**ï¼šçœŸæœºç¯å¢ƒä¸‹çš„åˆ†åŒ…åŠ è½½ä½“éªŒ

### å¸¸è§é—®é¢˜è¯Šæ–­ ğŸ”§

#### é—®é¢˜1ï¼šå›½å®¶ä¸æ˜¾ç¤º
**å¯èƒ½åŸå› **ï¼š
- `audio-config.js` ä¸­ç¼ºå°‘åœ°åŒºé…ç½®
- æ•°æ®æ–‡ä»¶å¯¼å…¥å¤±è´¥

**æ£€æŸ¥æ–¹æ³•**ï¼š
```bash
node -e "const config = require('./miniprogram/utils/audio-config.js'); console.log(config.audioConfigManager.getRegions().map(r => r.name));"
```

#### é—®é¢˜2ï¼šéŸ³é¢‘æ— æ³•æ’­æ”¾
**å¯èƒ½åŸå› **ï¼š
- è·¯å¾„æ˜ å°„é…ç½®ç¼ºå¤±
- åˆ†åŒ…æ˜ å°„é…ç½®ç¼ºå¤±  
- éŸ³é¢‘æ–‡ä»¶ä¸å­˜åœ¨

**æ£€æŸ¥æ–¹æ³•**ï¼š
1. ç¡®è®¤æ§åˆ¶å°ä¸­éŸ³é¢‘è·¯å¾„æ­£ç¡®
2. æ‰‹åŠ¨æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. æ£€æŸ¥ `audio-player/index.ts` é…ç½®

#### é—®é¢˜3ï¼šé¢„åŠ è½½è¶…é™
**é”™è¯¯ä¿¡æ¯**ï¼š`preloadRule source size exceed max limit 2MB`

**è§£å†³æ–¹æ³•**ï¼š
1. è®¡ç®—å½“å‰é¡µé¢åˆ†åŒ…æ€»å¤§å°
2. é‡æ–°åˆ†é…åˆ†åŒ…åˆ°å…¶ä»–é¡µé¢
3. æ›´æ–°å¯¹åº”çš„é¢„åŠ è½½åˆ†åŒ…åˆ—è¡¨

---

## ğŸ“‹ æ ‡å‡†è§„èŒƒ

### å‘½åè§„èŒƒ

| é¡¹ç›® | æ ¼å¼ | ç¤ºä¾‹ |
|------|------|------|
| **æ•°æ®æ–‡ä»¶** | `[å›½å®¶å°å†™].js` | `singapore.js` |
| **åˆ†åŒ…ç›®å½•** | `package[å›½å®¶é¦–å­—æ¯å¤§å†™]` | `packageSingapore` |
| **åœ°åŒºID** | å°å†™è‹±æ–‡ | `singapore` |
| **éŸ³é¢‘æ–‡ä»¶** | `èˆªç­å·_åŠ¨ä½œæè¿°.mp3` | `Singapore-Airlines-117_Turn-Left-180.mp3` |

### æ•°æ®æ ¼å¼æ ‡å‡†

**å¿…éœ€å­—æ®µ**ï¼š
- `label`ï¼šå½•éŸ³ç±»å‹ï¼ˆè¿›è¿‘/å¡”å°/åœ°é¢/æ”¾è¡Œ/åŒºè°ƒï¼‰
- `full_transcript`ï¼šè‹±æ–‡åŸæ–‡
- `translation_cn`ï¼šä¸­æ–‡ç¿»è¯‘  
- `mp3_file`ï¼šéŸ³é¢‘æ–‡ä»¶å

**å½•éŸ³ç±»å‹æ ‡å‡†**ï¼š
- **è¿›è¿‘**ï¼šApproach Control
- **å¡”å°**ï¼šTower Control  
- **åœ°é¢**ï¼šGround Control
- **æ”¾è¡Œ**ï¼šClearance Delivery
- **åŒºè°ƒ**ï¼šArea Control

---

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### Q1ï¼šéŸ³é¢‘æ’­æ”¾å¤±è´¥
**åŸå› **ï¼šéŸ³é¢‘æ–‡ä»¶è·¯å¾„ä¸æ­£ç¡®
**è§£å†³**ï¼šæ£€æŸ¥ `mp3_file` å­—æ®µä¸å®é™…æ–‡ä»¶åæ˜¯å¦ä¸€è‡´

### Q2ï¼šé¡µé¢ä¸æ˜¾ç¤ºæ–°å¢å›½å®¶
**åŸå› **ï¼šé…ç½®æ–‡ä»¶è¯­æ³•é”™è¯¯æˆ–è·¯å¾„é”™è¯¯
**è§£å†³**ï¼šæ£€æŸ¥ `utils/audio-config.js` è¯­æ³•å’Œå¼•ç”¨è·¯å¾„

### Q3ï¼šç‚¹å‡»å›½å®¶æ²¡æœ‰ååº”
**åŸå› **ï¼š`hasRealRecordings` è®¾ç½®ä¸º `false` æˆ–æ•°æ®ç»“æ„é”™è¯¯
**è§£å†³**ï¼šç¡®ä¿è®¾ç½®ä¸º `true` ä¸”æ•°æ®æ ¼å¼æ­£ç¡®

### Q4ï¼šå°ç¨‹åºç¼–è¯‘é”™è¯¯
**åŸå› **ï¼š`app.json` è¯­æ³•é”™è¯¯æˆ–å¼•ç”¨ä¸å­˜åœ¨çš„åˆ†åŒ…
**è§£å†³**ï¼šæ£€æŸ¥JSONè¯­æ³•å’Œåˆ†åŒ…ç›®å½•æ˜¯å¦å­˜åœ¨

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. éŸ³é¢‘æ–‡ä»¶ä¼˜åŒ–
- **æ ¼å¼**ï¼šMP3æ ¼å¼
- **å¤§å°**ï¼šæ§åˆ¶åœ¨ 500KB ä»¥å†…
- **è´¨é‡**ï¼šæ¸…æ™°å¯å¬ï¼Œæ— å™ªéŸ³

### 2. å‘½åä¸€è‡´æ€§
- ä½¿ç”¨è‹±æ–‡å‘½åï¼Œé¿å…ä¸­æ–‡å­—ç¬¦
- ç»Ÿä¸€ä½¿ç”¨é©¼å³°å‘½åæ³•
- æ–‡ä»¶åæè¿°è¦æ¸…æ™°æ˜ç¡®

### 3. æ•°æ®è´¨é‡
- è‹±æ–‡åŸæ–‡å¿…é¡»å‡†ç¡®
- ä¸­æ–‡ç¿»è¯‘è¦ä¸“ä¸šã€é€šä¿—æ˜“æ‡‚
- å½•éŸ³åˆ†ç±»è¦å‡†ç¡®

### 4. æµ‹è¯•å……åˆ†æ€§
- æ¯ä¸ªå½•éŸ³éƒ½è¦æµ‹è¯•æ’­æ”¾
- æ£€æŸ¥æ‰€æœ‰é¡µé¢è·³è½¬
- éªŒè¯éŸ³é‡æ§åˆ¶åŠŸèƒ½

---

## ğŸ“Š å½“å‰ç³»ç»ŸçŠ¶æ€

### å·²é›†æˆåœ°åŒº

| å›½å®¶ | åˆ†åŒ…å | å½•éŸ³æ•°é‡ | çŠ¶æ€ |
|------|--------|----------|------|
| ğŸ‡¯ğŸ‡µ æ—¥æœ¬ | `packageJapan` | 24ä¸ª | âœ… å®Œæˆ |
| ğŸ‡µğŸ‡­ è²å¾‹å®¾ | `packagePhilippines` | 27ä¸ª | âœ… å®Œæˆ |
| ğŸ‡°ğŸ‡· éŸ©å›½ | `packageKorean` | 19ä¸ª | âœ… å®Œæˆ |
| ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ | `packageSingapore` | 8ä¸ª | âœ… å®Œæˆ |

### ç³»ç»Ÿæ¶æ„å›¾

```
FlightToolbox éŸ³é¢‘ç³»ç»Ÿ
â”œâ”€â”€ æ•°æ®å±‚ (data/regions/*.js)
â”œâ”€â”€ é…ç½®å±‚ (utils/audio-config.js)  
â”œâ”€â”€ åˆ†åŒ…å±‚ (package*/ï¼‰
â”œâ”€â”€ ç•Œé¢å±‚ (pages/*)
â””â”€â”€ æ’­æ”¾å±‚ (audio-player)
```

---

## ğŸ“ æ”¯æŒä¸è”ç³»

é‡åˆ°é—®é¢˜ï¼Ÿè¯·ï¼š

1. **æ£€æŸ¥æœ¬æ–‡æ¡£**ï¼š90%çš„é—®é¢˜éƒ½èƒ½åœ¨è¿™é‡Œæ‰¾åˆ°ç­”æ¡ˆ
2. **æŸ¥çœ‹æ§åˆ¶å°**ï¼šå¾®ä¿¡å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°ä¼šæ˜¾ç¤ºè¯¦ç»†é”™è¯¯
3. **å¯¹æ¯”ç°æœ‰ä»£ç **ï¼šå‚è€ƒå·²æˆåŠŸé›†æˆçš„å›½å®¶ï¼ˆå¦‚æ–°åŠ å¡ï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.0  
**æœ€åæ›´æ–°**ï¼š2024-07-05  
**ç»´æŠ¤è€…**ï¼šFlightToolbox å¼€å‘å›¢é˜Ÿ

---

âœˆï¸ **ç¥æ‚¨é¡ºåˆ©å®ŒæˆéŸ³é¢‘é›†æˆï¼**
/**
 * é£žè¡Œé—®å€™è¯­ç®¡ç†å™¨
 * ç®¡ç†100æ¡é£žè¡ŒåŠ±å¿—é—®å€™è¯­ï¼Œæä¾›éšæœºé€‰æ‹©åŠŸèƒ½
 */

class GreetingManager {
  constructor() {
    // é£žè¡ŒåŠ±å¿—é—®å€™è¯­åº“ - 100æ¡æ¸©é¦¨ä¸”å¯Œæœ‰å“²ç†çš„é£žè¡Œç›¸å…³è¯è¯­
    this.flightGreetings = [
      // æ¸©é¦¨é—®å€™ç±» (20æ¡)
      'æ—©å®‰ï¼Œå¤©ç©ºåœ¨å¬å”¤',
      'ä¸Šåˆå¥½ï¼Œæ„¿æ‚¨ç¿±ç¿”è“å¤©',
      'ä¸­åˆå¥½ï¼Œå‘äº‘ç«¯è¿›å‘',
      'ä¸‹åˆå¥½ï¼Œé£žè¡Œæ¢¦æƒ³æ°¸ä¸æ­¢æ­¥',
      'æ™šä¸Šå¥½ï¼Œæ˜Ÿç©ºæ˜¯æœ€ç¾Žçš„èˆªçº¿',
      'å¤œæ·±äº†ï¼Œä½†é£žè¡Œç²¾ç¥žæ°¸ä¸çœ ',
      'æ–°çš„ä¸€å¤©ï¼Œæ–°çš„é£žè¡Œå¾ç¨‹',
      'æ„¿æ‚¨ä»Šå¤©çš„é£žè¡Œä¸€åˆ‡é¡ºåˆ©',
      'å¤©ç©ºå› æ‚¨è€Œæ›´åŠ ç²¾å½©',
      'é£žè¡Œå‘˜ï¼Œæ‚¨æ˜¯å¤©ç©ºçš„å®ˆæŠ¤è€…',
      'ä»Šå¤©ä¹Ÿè¦å®‰å…¨é£žè¡Œå“¦',
      'è“å¤©ç™½äº‘æ­£åœ¨ç­‰å¾…æ‚¨',
      'æ¯ä¸€æ¬¡èµ·é£žéƒ½æ˜¯æ–°çš„å¼€å§‹',
      'æ„¿é£Žå‘æ°¸è¿œæœ‰åˆ©äºŽæ‚¨',
      'é£žè¡Œè·¯ä¸Šï¼Œæˆ‘ä»¬ä¸Žæ‚¨åŒåœ¨',
      'ä»Šå¤©çš„å¤©æ°”å¾ˆé€‚åˆé£žè¡Œ',
      'å¤©ç©ºæ˜¯æ‚¨æœ€ç¾Žçš„åŠžå…¬å®¤',
      'æ„¿æ‚¨çš„æ¯ä¸€æ¬¡é™è½éƒ½å®Œç¾Ž',
      'é£žè¡Œå‘˜çš„ä¸€å¤©ä»Žè¿™é‡Œå¼€å§‹',
      'ç¥æ‚¨ä»Šå¤©é£žè¡Œæ„‰å¿«',

      // å“²ç†æ™ºæ…§ç±» (25æ¡)
      'å¤©ç©ºæ•™ä¼šæˆ‘ä»¬ä»€ä¹ˆæ˜¯æ— é™å¯èƒ½',
      'æ¯ä¸€æ¬¡é£žè¡Œéƒ½æ˜¯å¯¹é‡åŠ›çš„ä¼˜é›…åæŠ—',
      'çœŸæ­£çš„é£žè¡Œå‘˜ï¼Œå¿ƒä¸­æ°¸è¿œæœ‰åŒ—æžæ˜Ÿ',
      'é£žè¡Œä¸ä»…æ˜¯æŠ€æœ¯ï¼Œæ›´æ˜¯è‰ºæœ¯',
      'åœ¨äº‘ç«¯ä¹‹ä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°æ›´å¹¿é˜”çš„ä¸–ç•Œ',
      'é£žè¡Œè®©æˆ‘ä»¬æ˜Žç™½ï¼šé«˜åº¦å†³å®šè§†é‡Ž',
      'æ¯ä¸€æœµäº‘éƒ½æœ‰å®ƒçš„æ•…äº‹ï¼Œæ¯ä¸€æ¬¡é£žè¡Œéƒ½æœ‰å®ƒçš„æ„ä¹‰',
      'é£žè¡Œå‘˜çš„å‹‡æ°”ï¼Œæ¥è‡ªå¯¹æœªçŸ¥çš„æ•¬ç•ä¸Žå¾æœ',
      'å¤©ç©ºæ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„æ•™å®¤',
      'é£žè¡Œè®©æˆ‘ä»¬å­¦ä¼šä¸Žé£ŽåŒè¡Œï¼Œä¸Žäº‘å…±èˆž',
      'åœ¨ä¸‡ç±³é«˜ç©ºï¼Œæˆ‘ä»¬æ›´æŽ¥è¿‘æ¢¦æƒ³',
      'é£žè¡Œæ˜¯äººç±»å¯¹è‡ªç”±æœ€æ‰§ç€çš„è¿½æ±‚',
      'æ¯ä¸€æ¬¡èµ·é£žï¼Œéƒ½æ˜¯å¯¹å¯èƒ½æ€§çš„éªŒè¯',
      'é£žè¡Œå‘˜çš„çœ¼ä¸­ï¼Œæ²¡æœ‰ä¸å¯èƒ½çš„èˆªçº¿',
      'å¤©ç©ºå‘Šè¯‰æˆ‘ä»¬ï¼šè·ç¦»ä»Žæ¥ä¸æ˜¯é—®é¢˜',
      'é£žè¡Œæ˜¯ç§‘å­¦ä¸Žè‰ºæœ¯çš„å®Œç¾Žç»“åˆ',
      'åœ¨äº‘å±‚ä¹‹ä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯å¸Œæœ›',
      'é£žè¡Œè®©æˆ‘ä»¬æ˜Žç™½ï¼šæ–¹å‘æ¯”é€Ÿåº¦æ›´é‡è¦',
      'æ¯ä¸€æ¬¡ç€é™†ï¼Œéƒ½æ˜¯ä¸ºäº†ä¸‹ä¸€æ¬¡æ›´å¥½çš„èµ·é£ž',
      'é£žè¡Œå‘˜çš„å¿ƒä¸­ï¼Œæ°¸è¿œæœ‰ä¸€ç‰‡å‡€åœŸå«å¤©ç©º',
      'é£žè¡Œæ•™ä¼šæˆ‘ä»¬ï¼šç»†èŠ‚å†³å®šæˆè´¥',
      'åœ¨é«˜ç©ºä¸­ï¼Œæˆ‘ä»¬å­¦ä¼šè°¦é€Šä¸Žæ•¬ç•',
      'é£žè¡Œæ˜¯å¯¹ç²¾ç¡®ä¸Žè€å¿ƒçš„ç»ˆæžè€ƒéªŒ',
      'å¤©ç©ºæ²¡æœ‰è¾¹ç•Œï¼Œæ¢¦æƒ³ä¹Ÿæ²¡æœ‰è¾¹ç•Œ',
      'é£žè¡Œè®©æˆ‘ä»¬æ‡‚å¾—ï¼šå®‰å…¨æ°¸è¿œæ˜¯ç¬¬ä¸€ä½',

      // åŠ±å¿—æ¿€åŠ±ç±» (25æ¡)
      'ä»Šå¤©åˆæ˜¯å¾æœå¤©ç©ºçš„ä¸€å¤©',
      'æ¯ä¸€æ¬¡é£žè¡Œéƒ½è®©æˆ‘ä»¬æ›´åŠ å¼ºå¤§',
      'é£žè¡Œå‘˜çš„ä½¿å‘½ï¼šè¿žæŽ¥ä¸–ç•Œçš„æ¯ä¸€ä¸ªè§’è½',
      'æ‚¨çš„æŠ€èƒ½å¯ä»¥å¸¦äººä»¬å®‰å…¨å›žå®¶',
      'é£žè¡Œè·¯ä¸Šæ²¡æœ‰æ·å¾„ï¼Œåªæœ‰ä¸“ä¸š',
      'æ‚¨çš„æ¯ä¸€æ¬¡èµ·é£žéƒ½æ‰¿è½½ç€ä¿¡ä»»',
      'ä¸“ä¸šé£žè¡Œå‘˜ï¼Œå¤©ç©ºå› æ‚¨è€Œå®‰å…¨',
      'æ‚¨æ˜¯è¿žæŽ¥æ¢¦æƒ³ä¸ŽçŽ°å®žçš„æ¡¥æ¢',
      'é£žè¡ŒæŠ€èƒ½æ¯å¤©éƒ½åœ¨è®©æ‚¨å˜å¾—æ›´å¥½',
      'æ‚¨çš„è´£ä»»é‡äºŽæ³°å±±ï¼Œä½¿å‘½é«˜äºŽäº‘ç«¯',
      'ä¸“ä¸šé€ å°±å®‰å…¨ï¼Œå®‰å…¨æˆå°±ä¿¡ä»»',
      'æ‚¨çš„åŒæ‰‹æŽŒæ¡ç€ä¹˜å®¢çš„ç”Ÿå‘½',
      'æ¯ä¸€æ¬¡æ£€æŸ¥éƒ½å¯èƒ½é¿å…ä¸€æ¬¡æ„å¤–',
      'é£žè¡Œå‘˜çš„ä»·å€¼åœ¨äºŽä¸“ä¸šä¸Žè´£ä»»',
      'æ‚¨çš„ç»éªŒæ˜¯å¤©ç©ºä¸­æœ€å®è´µçš„è´¢å¯Œ',
      'åšæŒå­¦ä¹ ï¼Œæ°¸è¿œä¿æŒé£žè¡Œçƒ­æƒ…',
      'æ‚¨çš„ä¸“ä¸šè®©å®¶åº­å›¢èšæˆä¸ºå¯èƒ½',
      'é£žè¡Œè·¯ä¸Šï¼Œä¸“ä¸šæ˜¯æ‚¨æœ€å¥½çš„ä¼™ä¼´',
      'æ¯ä¸€æ¬¡åŸ¹è®­éƒ½è®©æ‚¨æ›´åŠ å“è¶Š',
      'æ‚¨çš„æŠ€èƒ½è®©ä¸å¯èƒ½å˜æˆå¯èƒ½',
      'é£žè¡Œå‘˜çš„è£è€€æ¥è‡ªäºŽè´£ä»»çš„æ‹…å½“',
      'æ‚¨æ˜¯å¤©ç©ºä¸­æœ€äº®çš„æ˜Ÿ',
      'ä¸“ä¸šé£žè¡Œï¼Œè®©ä¸–ç•Œå˜å¾—æ›´å°',
      'æ‚¨çš„ä½¿å‘½æ˜¯å°†å®‰å…¨å†™åœ¨å¤©ç©º',
      'æ¯ä¸€æ¬¡é£žè¡Œéƒ½æ˜¯å¯¹è‡ªå·±çš„è¶…è¶Š',

      // è¯—æ„ç¾Žå¥½ç±» (20æ¡)
      'å¤©ç©ºæ˜¯ä¸€é¦–æ°¸è¿œå†™ä¸å®Œçš„è¯—',
      'é£žè¡Œè®©æˆ‘ä»¬åœ¨äº‘ç«¯å†™ä¸‹æµªæ¼«',
      'æ¯ä¸€æœµäº‘éƒ½æ˜¯å¤©ç©ºçš„ä¿¡ç¬º',
      'é£žè¡Œå‘˜æ˜¯å¤©ç©ºä¸Žå¤§åœ°çš„ä¿¡ä½¿',
      'åœ¨é«˜ç©ºä¸­ï¼Œæˆ‘ä»¬ä¸Žæ˜Ÿè¾°å¯¹è¯',
      'äº‘æµ·ä¹‹ä¸Šï¼Œå¿ƒçµå¾—åˆ°å‡€åŒ–',
      'é£žè¡Œæ˜¯äººç±»æœ€ç¾Žçš„èˆžè¹ˆ',
      'å¤©ç©ºçš„æ€€æŠ±æ¸©æš–è€Œå®½å¹¿',
      'æ¯ä¸€æ¬¡é£žè¡Œéƒ½æ˜¯ä¸€åœºç¾Žä¸½çš„é‚‚é€…',
      'äº‘å±‚ä¹‹é—´ï¼Œè—ç€æœ€ç¾Žçš„é£Žæ™¯',
      'é£žè¡Œè®©æˆ‘ä»¬è§¦æ‘¸åˆ°å¤©ç©ºçš„å¿ƒè·³',
      'åœ¨ä¸‡ç±³é«˜ç©ºï¼Œæ—¶é—´éƒ½å˜å¾—è¯—æ„',
      'é£žæœºåˆ’è¿‡å¤©é™…ï¼Œç•™ä¸‹ç¾Žä¸½çš„èˆªè¿¹',
      'å¤©ç©ºçš„è“æ˜¯ä¸–ç•Œä¸Šæœ€çº¯å‡€çš„é¢œè‰²',
      'é£žè¡Œè®©æˆ‘ä»¬æˆä¸ºå¤©ç©ºçš„ä¸€éƒ¨åˆ†',
      'äº‘æœµæ˜¯å¤©ç©ºé€ç»™é£žè¡Œå‘˜çš„ç¤¼ç‰©',
      'åœ¨é«˜ç©ºä¸­ï¼Œæˆ‘ä»¬å¬åˆ°äº†é£Žçš„æ­Œå£°',
      'æ¯ä¸€æ¬¡èµ·é£žéƒ½æ˜¯è¯—çš„å¼€å§‹',
      'é£žè¡Œè®©å¹³å‡¡çš„æ—¥å­å˜å¾—ä¸å‡¡',
      'å¤©ç©ºçš„å¹¿é˜”è®©å¿ƒçµå¾—åˆ°é‡Šæ”¾',

      // å®žç”¨æ¸©é¦¨ç±» (10æ¡)
      'è®°å¾—æ£€æŸ¥ä»Šå¤©çš„å¤©æ°”å“¦',
      'é£žè¡Œå‰åˆ«å¿˜äº†å®Œæˆæ£€æŸ¥æ¸…å•',
      'å®‰å…¨é£žè¡Œï¼Œå¹³å®‰å›žå®¶',
      'ä»Šå¤©çš„NOTAMæŸ¥çœ‹äº†å—',
      'æ„¿æ‚¨çš„é£žè¡Œæ—¥å¿—åˆæ·»ç²¾å½©ä¸€é¡µ',
      'è®°å¾—ä¿æŒä¸Žåœ°é¢çš„è‰¯å¥½æ²Ÿé€š',
      'æ¯ä¸€æ¬¡é£žè¡Œéƒ½è¦å…¨åŠ›ä»¥èµ´',
      'é£žè¡Œå·¥å…·ç®±ä¸ºæ‚¨çš„å®‰å…¨æŠ¤èˆª',
      'ä¸“ä¸šçš„å·¥å…·é…ä¸“ä¸šçš„é£žè¡Œå‘˜',
      'è®©æˆ‘ä»¬ä¸€èµ·å®ˆæŠ¤å¤©ç©ºçš„å®‰å…¨'
    ];
  }

  /**
   * èŽ·å–éšæœºé—®å€™è¯­
   * @returns {string} éšæœºé€‰æ‹©çš„é—®å€™è¯­
   */
  getRandomGreeting() {
    const randomIndex = Math.floor(Math.random() * this.flightGreetings.length);
    const greeting = this.flightGreetings[randomIndex];
    
    console.log(`ðŸŽ¯ éšæœºé€‰æ‹©é—®å€™è¯­: ${greeting} (ç´¢å¼•: ${randomIndex}/${this.flightGreetings.length})`);
    
    return greeting;
  }

  /**
   * æ ¹æ®æ—¶é—´èŽ·å–åˆé€‚çš„é—®å€™è¯­
   * @returns {string} é€‚åˆå½“å‰æ—¶é—´çš„é—®å€™è¯­
   */
  getTimeBasedGreeting() {
    const hour = new Date().getHours();
    
    // å®šä¹‰æ—¶é—´æ®µä¸“ç”¨é—®å€™è¯­
    const timeBasedGreetings = {
      morning: [
        'æ—©å®‰ï¼Œå¤©ç©ºåœ¨å¬å”¤',
        'æ–°çš„ä¸€å¤©ï¼Œæ–°çš„é£žè¡Œå¾ç¨‹',
        'é£žè¡Œå‘˜çš„ä¸€å¤©ä»Žè¿™é‡Œå¼€å§‹',
        'ä¸Šåˆå¥½ï¼Œæ„¿æ‚¨ç¿±ç¿”è“å¤©'
      ],
      noon: [
        'ä¸­åˆå¥½ï¼Œå‘äº‘ç«¯è¿›å‘',
        'ä»Šå¤©çš„å¤©æ°”å¾ˆé€‚åˆé£žè¡Œ',
        'å¤©ç©ºæ˜¯æ‚¨æœ€ç¾Žçš„åŠžå…¬å®¤'
      ],
      afternoon: [
        'ä¸‹åˆå¥½ï¼Œé£žè¡Œæ¢¦æƒ³æ°¸ä¸æ­¢æ­¥',
        'æ„¿æ‚¨ä»Šå¤©çš„é£žè¡Œä¸€åˆ‡é¡ºåˆ©',
        'æ¯ä¸€æ¬¡é£žè¡Œéƒ½è¦å…¨åŠ›ä»¥èµ´'
      ],
      evening: [
        'æ™šä¸Šå¥½ï¼Œæ˜Ÿç©ºæ˜¯æœ€ç¾Žçš„èˆªçº¿',
        'æ„¿æ‚¨çš„æ¯ä¸€æ¬¡é™è½éƒ½å®Œç¾Ž',
        'å®‰å…¨é£žè¡Œï¼Œå¹³å®‰å›žå®¶'
      ],
      night: [
        'å¤œæ·±äº†ï¼Œä½†é£žè¡Œç²¾ç¥žæ°¸ä¸çœ ',
        'åœ¨ä¸‡ç±³é«˜ç©ºï¼Œæ—¶é—´éƒ½å˜å¾—è¯—æ„',
        'å¤©ç©ºçš„å¹¿é˜”è®©å¿ƒçµå¾—åˆ°é‡Šæ”¾'
      ]
    };

    let selectedGreetings;
    
    if (hour >= 5 && hour < 11) {
      selectedGreetings = timeBasedGreetings.morning;
    } else if (hour >= 11 && hour < 13) {
      selectedGreetings = timeBasedGreetings.noon;
    } else if (hour >= 13 && hour < 18) {
      selectedGreetings = timeBasedGreetings.afternoon;
    } else if (hour >= 18 && hour < 22) {
      selectedGreetings = timeBasedGreetings.evening;
    } else {
      selectedGreetings = timeBasedGreetings.night;
    }

    const randomIndex = Math.floor(Math.random() * selectedGreetings.length);
    return selectedGreetings[randomIndex];
  }

  /**
   * èŽ·å–æ‰€æœ‰é—®å€™è¯­çš„æ•°é‡
   * @returns {number} é—®å€™è¯­æ€»æ•°
   */
  getGreetingsCount() {
    return this.flightGreetings.length;
  }

  /**
   * æŒ‰ç±»åˆ«èŽ·å–é—®å€™è¯­
   * @param {string} category ç±»åˆ«ï¼š'warm', 'wisdom', 'motivation', 'poetic', 'practical'
   * @returns {string[]} è¯¥ç±»åˆ«çš„é—®å€™è¯­æ•°ç»„
   */
  getGreetingsByCategory(category) {
    const categories = {
      warm: this.flightGreetings.slice(0, 20),      // æ¸©é¦¨é—®å€™ç±»
      wisdom: this.flightGreetings.slice(20, 45),   // å“²ç†æ™ºæ…§ç±»
      motivation: this.flightGreetings.slice(45, 70), // åŠ±å¿—æ¿€åŠ±ç±»
      poetic: this.flightGreetings.slice(70, 90),   // è¯—æ„ç¾Žå¥½ç±»
      practical: this.flightGreetings.slice(90, 100) // å®žç”¨æ¸©é¦¨ç±»
    };
    
    return categories[category] || this.flightGreetings;
  }
}

// åˆ›å»ºå•ä¾‹å®žä¾‹
const greetingManager = new GreetingManager();

module.exports = greetingManager;
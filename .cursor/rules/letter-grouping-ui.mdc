---
description: 
globs: 
alwaysApply: true
---
# ä¸‡èƒ½æŸ¥è¯¢é¡µé¢å­—æ¯åˆ†ç»„UIè®¾è®¡è§„èŒƒ

## æ¦‚è¿°
ä¸ºäº†è§£å†³ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ï¼Œä¸‡èƒ½æŸ¥è¯¢é¡µé¢é‡‡ç”¨ç»Ÿä¸€çš„å­—æ¯åˆ†ç»„è®¾è®¡æ¨¡å¼ã€‚ç”¨æˆ·å…ˆé€‰æ‹©å­—æ¯ç»„ï¼Œå†æŸ¥çœ‹å…·ä½“æ•°æ®ï¼Œå¤§å¹…æå‡é¡µé¢æµç•…åº¦ã€‚

## è®¾è®¡åŸåˆ™

### 1. ç»Ÿä¸€çš„äº¤äº’æ¨¡å¼
- **ä¸‰çº§å¯¼èˆª**ï¼šå­—æ¯åˆ†ç»„åˆ—è¡¨ â†’ å…·ä½“å­—æ¯ç»„ â†’ è¯¦æƒ…é¡µé¢
- **è¿”å›æœºåˆ¶**ï¼šæä¾›æ¸…æ™°çš„è¿”å›æŒ‰é’®å’Œé¢åŒ…å±‘å¯¼èˆª
- **æœç´¢å…¼å®¹**ï¼šæœç´¢æ—¶è‡ªåŠ¨åˆ‡æ¢è§†å›¾ï¼Œæ¸…é™¤æœç´¢æ—¶è¿”å›åˆ†ç»„

### 2. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
- **æŒ‰éœ€åŠ è½½**ï¼šåˆå§‹åªæ˜¾ç¤ºå­—æ¯åˆ†ç»„ï¼Œé¿å…æ¸²æŸ“å¤§é‡DOMèŠ‚ç‚¹
- **åˆ†ç»„ç»Ÿè®¡**ï¼šæ˜¾ç¤ºæ¯ä¸ªå­—æ¯ç»„çš„æ•°æ®æ¡ç›®æ•°é‡
- **æ™ºèƒ½åˆ†ç±»**ï¼šæ ¹æ®æ•°æ®ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„åˆ†ç»„æ–¹å¼

## æŠ€æœ¯å®ç°è§„èŒƒ

### æ•°æ®ç»“æ„è¦æ±‚
```typescript
// é¡µé¢æ•°æ®ç»“æ„
data: {
  // åŸå§‹æ•°æ®
  dataList: [] as any[],
  
  // å­—æ¯åˆ†ç»„ç›¸å…³
  showGroups: true,
  selectedLetter: '',
  letterGroups: [] as any[],
  currentLetterItems: [] as any[],
  
  // æœç´¢å’Œè¿‡æ»¤
  searchValue: '',
  filteredList: [] as any[]
}

// å­—æ¯åˆ†ç»„æ•°æ®ç»“æ„
interface LetterGroup {
  letter: string;    // å­—æ¯æ ‡è¯†
  count: number;     // è¯¥ç»„æ•°æ®æ¡ç›®æ•°
  items: any[];      // è¯¥ç»„çš„å…·ä½“æ•°æ®
}
```

### æ ¸å¿ƒæ–¹æ³•å®ç°
```typescript
// 1. æ•°æ®åŠ è½½æ–¹æ³•
async loadData() {
  const data = await dataManager.loadXXXData()
  const groups = this.createLetterGroups(data)
  
  this.setData({
    dataList: data,
    letterGroups: groups,
    showGroups: true,
    filteredList: [] // åˆå§‹ä¸æ˜¾ç¤ºæ‰€æœ‰æ•°æ®
  })
}

// 2. å­—æ¯åˆ†ç»„åˆ›å»º
createLetterGroups(data: any[]) {
  const groups = new Map()
  
  data.forEach(item => {
    const letter = this.getGroupLetter(item) // æ ¹æ®æ•°æ®ç±»å‹å®ç°
    if (!groups.has(letter)) {
      groups.set(letter, { letter, count: 0, items: [] })
    }
    groups.get(letter).items.push(item)
    groups.get(letter).count++
  })
  
  return Array.from(groups.values()).sort((a, b) => 
    a.letter.localeCompare(b.letter)
  )
}

// 3. å­—æ¯ç»„é€‰æ‹©
onLetterTap(event: any) {
  const letter = event.currentTarget.dataset.letter
  const group = this.data.letterGroups.find(g => g.letter === letter)
  
  this.setData({
    selectedLetter: letter,
    currentLetterItems: group.items,
    showGroups: false,
    filteredList: group.items
  })
}

// 4. è¿”å›å­—æ¯åˆ—è¡¨
backToGroups() {
  this.setData({
    showGroups: true,
    selectedLetter: '',
    currentLetterItems: [],
    filteredList: [],
    searchValue: ''
  })
}

// 5. æœç´¢é€»è¾‘æ›´æ–°
performSearch(searchValue: string) {
  if (!searchValue.trim()) {
    // è¿”å›å­—æ¯åˆ†ç»„è§†å›¾
    this.setData({
      filteredList: [],
      showGroups: true,
      selectedLetter: '',
      currentLetterItems: []
    })
    return
  }
  
  // æœç´¢æ—¶éšè—å­—æ¯åˆ†ç»„
  this.setData({ showGroups: false })
  // ... æ‰§è¡Œæœç´¢é€»è¾‘
}
```

## WXMLæ¨¡æ¿è§„èŒƒ

### æ ‡å‡†æ¨¡æ¿ç»“æ„
```xml
<!-- æ•°æ®é¡µé¢ -->
<view wx:if="{{ activeTab === 'dataType' }}">
  <!-- æœç´¢æ¡† -->
  <view class="search-section">
    <van-search
      value="{{ searchValue }}"
      placeholder="æœç´¢æç¤ºæ–‡å­—"
      bind:search="onSearch"
      bind:change="onSearchChange"
      bind:clear="onSearchClear"
    />
  </view>

  <!-- å­—æ¯åˆ†ç»„åˆ—è¡¨ -->
  <view wx:if="{{ showGroups }}" class="letter-groups-section">
    <view class="section-title">æŒ‰XXæµè§ˆ</view>
    <view 
      wx:for="{{ letterGroups }}" 
      wx:key="letter"
      class="custom-letter-item [ç‰¹å®šæ ·å¼ç±»]"
      data-letter="{{ item.letter }}"
      bind:tap="onLetterTap"
    >
      <view class="letter-icon-large">{{ item.letter }}</view>
      <view class="letter-content">
        <view class="letter-title">å­—æ¯ {{ item.letter }}</view>
        <view class="letter-subtitle">ä»¥ {{ item.letter }} å¼€å¤´çš„XX</view>
      </view>
      <view class="letter-count">{{ item.count }}æ¡</view>
      <view class="letter-arrow">></view>
    </view>

    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <view class="stats-section">
      <view class="stats-item">
        <text class="stats-number">{{ dataList.length }}</text>
        <text class="stats-label">ä¸ªXX</text>
      </view>
      <view class="stats-item">
        <text class="stats-number">{{ letterGroups.length }}</text>
        <text class="stats-label">ä¸ªå­—æ¯ç»„</text>
      </view>
    </view>
  </view>

  <!-- å…·ä½“å­—æ¯ç»„çš„æ•°æ®åˆ—è¡¨ -->
  <view wx:if="{{ !showGroups && selectedLetter }}" class="letter-detail-section">
    <!-- è¿”å›æŒ‰é’® -->
    <van-cell-group>
      <van-cell
        title="è¿”å›å­—æ¯åˆ—è¡¨"
        icon="arrow-left"
        bind:click="backToGroups"
        class="back-cell"
      />
    </van-cell-group>

    <!-- å½“å‰å­—æ¯ç»„æ•°æ® -->
    <van-cell-group title="å­—æ¯ {{ selectedLetter }} ({{ currentLetterItems.length }}ä¸ªXX)">
      <!-- å…·ä½“æ•°æ®é¡¹æ¨¡æ¿ -->
    </van-cell-group>
  </view>

  <!-- æœç´¢ç»“æœåˆ—è¡¨ -->
  <view wx:if="{{ !showGroups && searchValue }}" class="search-results-section">
    <van-cell-group wx:if="{{ filteredList.length > 0 }}" title="æœç´¢ç»“æœ ({{ filteredList.length }}ä¸ªXX)">
      <!-- æœç´¢ç»“æœé¡¹æ¨¡æ¿ -->
    </van-cell-group>

    <!-- æœç´¢æ— ç»“æœ -->
    <van-empty
      wx:if="{{ filteredList.length === 0 && searchValue }}"
      description="æœªæ‰¾åˆ°ç›¸å…³XX"
    />
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <van-empty
    wx:if="{{ letterGroups.length === 0 && !searchValue }}"
    description="åŠ è½½ä¸­..."
  />
</view>
```

## WXSSæ ·å¼è§„èŒƒ

### åŸºç¡€æ ·å¼
```css
/* å­—æ¯åˆ†ç»„æ ·å¼ */
.letter-groups-section {
  padding: 20rpx 32rpx;
}

.section-title {
  font-size: 36rpx;
  font-weight: bold;
  color: #333;
  margin-bottom: 32rpx;
  text-align: center;
}

/* è‡ªå®šä¹‰å­—æ¯é¡¹åŸºç¡€æ ·å¼ */
.custom-letter-item {
  color: #fff;
  padding: 24rpx 32rpx;
  margin-bottom: 20rpx;
  border-radius: 16rpx;
  display: flex;
  align-items: center;
  cursor: pointer;
}

.letter-icon-large {
  width: 80rpx;
  height: 80rpx;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36rpx;
  font-weight: bold;
  color: white;
  margin-right: 24rpx;
  flex-shrink: 0;
}

.letter-content {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.letter-title {
  font-size: 32rpx;
  font-weight: bold;
  color: #fff;
  margin-bottom: 4rpx;
}

.letter-subtitle {
  font-size: 24rpx;
  color: rgba(255, 255, 255, 0.8);
}

.letter-count {
  font-size: 28rpx;
  color: #fff;
  font-weight: bold;
  margin-right: 20rpx;
}

.letter-arrow {
  font-size: 32rpx;
  color: #fff;
  font-weight: bold;
}

/* å­—æ¯è¯¦æƒ…é¡µé¢æ ·å¼ */
.letter-detail-section {
  padding: 20rpx;
}

.back-cell {
  margin-bottom: 20rpx;
  border-radius: 16rpx;
  overflow: hidden;
  background-color: #f8f9fa;
}

.back-cell .van-cell {
  background: transparent;
}

.back-cell .van-cell__title {
  color: #1989fa !important;
  font-weight: 500;
}

/* æœç´¢ç»“æœæ ·å¼ */
.search-results-section {
  padding: 20rpx;
}
```

### æ•°æ®ç±»å‹ç‰¹å®šæ ·å¼
```css
/* ç¼©å†™å­—æ¯é¡¹æ ·å¼ - è“ç´«è‰²æ¸å˜ */
.abbreviation-letter-item {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  box-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.3);
}

/* æœºåœºå­—æ¯é¡¹æ ·å¼ - æ©™çº¢è‰²æ¸å˜ */
.airport-letter-item {
  background: linear-gradient(135deg, #ff9a56 0%, #ff6b6b 100%);
  box-shadow: 0 4rpx 12rpx rgba(255, 154, 86, 0.3);
}

/* å®šä¹‰å­—æ¯é¡¹æ ·å¼ - ç»¿è‰²æ¸å˜ */
.definition-letter-item {
  background: linear-gradient(135deg, #52c41a 0%, #389e0d 100%);
  box-shadow: 0 4rpx 12rpx rgba(82, 196, 26, 0.3);
}

/* é€šä¿¡å­—æ¯é¡¹æ ·å¼ - ç´«è‰²æ¸å˜ */
.communication-letter-item {
  background: linear-gradient(135deg, #722ed1 0%, #531dab 100%);
  box-shadow: 0 4rpx 12rpx rgba(114, 46, 209, 0.3);
}
```

## åˆ†ç»„ç­–ç•¥æŒ‡å—

### 1. ç¼©å†™æ•°æ®
- **åˆ†ç»„ä¾æ®**ï¼šè‹±æ–‡ç¼©å†™é¦–å­—æ¯
- **æ–¹æ³•**ï¼š`item.abbreviation.charAt(0).toUpperCase()`
- **ç‰¹ç‚¹**ï¼šA-Zå‡åŒ€åˆ†å¸ƒ

### 2. æœºåœºæ•°æ®
- **åˆ†ç»„ä¾æ®**ï¼šICAOä»£ç é¦–å­—æ¯
- **æ–¹æ³•**ï¼š`item.ICAOCode.charAt(0).toUpperCase()`
- **ç‰¹ç‚¹**ï¼šæŒ‰å›½é™…æ ‡å‡†åˆ†å¸ƒ

### 3. å®šä¹‰æ•°æ®
- **åˆ†ç»„ä¾æ®**ï¼šä¸­æ–‡åç§°æ‹¼éŸ³é¦–å­—æ¯
- **æ–¹æ³•**ï¼š`this.getPinyinFirstLetter(item.chinese_name)`
- **ç‰¹ç‚¹**ï¼šéœ€è¦æ‹¼éŸ³æ˜ å°„è¡¨

### 4. é€šä¿¡æ•°æ®
- **åˆ†ç»„ä¾æ®**ï¼šç« èŠ‚åˆ†ç»„
- **æ–¹æ³•**ï¼šæŒ‰ICAOé€šä¿¡æ‰‹å†Œç« èŠ‚åˆ†ç±»
- **ç‰¹ç‚¹**ï¼šæŒ‰ä¸“ä¸šé¢†åŸŸåˆ†ç»„

## é¢œè‰²æ–¹æ¡ˆ
- ğŸ”µ **ç¼©å†™**ï¼šè“ç´«è‰²æ¸å˜ï¼ˆ#667eea â†’ #764ba2ï¼‰
- ğŸŸ  **æœºåœº**ï¼šæ©™çº¢è‰²æ¸å˜ï¼ˆ#ff9a56 â†’ #ff6b6bï¼‰  
- ğŸŸ¢ **å®šä¹‰**ï¼šç»¿è‰²æ¸å˜ï¼ˆ#52c41a â†’ #389e0dï¼‰
- ğŸŸ£ **é€šä¿¡**ï¼šç´«è‰²æ¸å˜ï¼ˆ#722ed1 â†’ #531dabï¼‰
- ğŸŸ¡ **è§„ç« **ï¼šé‡‘è‰²æ¸å˜ï¼ˆ#faad14 â†’ #d48806ï¼‰

## æ€§èƒ½ä¼˜åŒ–æ•ˆæœ
- âœ… ä»ä¸€æ¬¡æ€§æ¸²æŸ“1000+æ¡æ•°æ®æ”¹ä¸ºæŒ‰éœ€åŠ è½½
- âœ… åˆå§‹é¡µé¢åªæ˜¾ç¤ºå­—æ¯ç»„ï¼Œå¤§å¹…å‡å°‘DOMèŠ‚ç‚¹
- âœ… ç”¨æˆ·ä½“éªŒæ›´æµç•…ï¼Œé¿å…é•¿åˆ—è¡¨æ»šåŠ¨å¡é¡¿
- âœ… ä¿æŒæœç´¢åŠŸèƒ½çš„é«˜æ€§èƒ½ä¸å˜

## å‚è€ƒå®ç°
- ç¼©å†™é¡µé¢ï¼š[abbreviations/index.ts](mdc:miniprogram/pages/abbreviations/index.ts)
- æ ·å¼æ–‡ä»¶ï¼š[abbreviations/index.wxss](mdc:miniprogram/pages/abbreviations/index.wxss)
- æ¨¡æ¿æ–‡ä»¶ï¼š[abbreviations/index.wxml](mdc:miniprogram/pages/abbreviations/index.wxml)




---
description: 
globs: 
alwaysApply: true
---
# 微信小程序开发官方文档优先规则

## 概述
在对微信小程序进行任何修改、新功能开发或问题排查之前，必须先通过MCP工具查阅微信小程序官方文档，确保遵循最新的官方指导和最佳实践。

## 强制要求

### 1. 修改前必须查阅官方文档
在进行以下任何操作前，必须先使用MCP Puppeteer工具访问官方文档：
- 新增页面或组件
- 修改现有功能
- 集成新的API
- 解决技术问题
- 性能优化
- 框架升级

### 2. 官方文档地址
**主要参考地址**：https://developers.weixin.qq.com/miniprogram/dev/framework/

**具体章节参考**：
- 框架介绍：https://developers.weixin.qq.com/miniprogram/dev/framework/
- 组件文档：https://developers.weixin.qq.com/miniprogram/dev/component/
- API文档：https://developers.weixin.qq.com/miniprogram/dev/api/
- 性能优化：https://developers.weixin.qq.com/miniprogram/dev/framework/performance/
- 分包加载：https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html

### 3. MCP工具使用流程
```
1. 使用 mcp_mcp-puppeteer_puppeteer_navigate 访问官方文档
2. 使用 mcp_mcp-puppeteer_puppeteer_screenshot 截图保存关键信息
3. 根据官方指导制定开发方案
4. 实施开发并遵循官方最佳实践
```

## 具体应用场景

### 框架相关修改
- 页面生命周期处理
- 路由配置
- 组件开发
- 事件处理

### 性能优化
- 启动性能优化
- 渲染性能优化
- 分包策略调整
- 内存优化

### API集成
- 新API的使用方法
- 权限申请流程
- 兼容性处理
- 错误处理机制

### 组件使用
- 基础组件的正确用法
- 自定义组件开发
- 组件间通信
- 样式处理

## 操作步骤

### 第一步：确定需要查阅的内容
根据要修改的功能，确定需要查阅的官方文档章节。

### 第二步：使用MCP工具访问
```javascript
// 示例：访问分包加载文档
mcp_mcp-puppeteer_puppeteer_navigate({
  url: "https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html"
})
```

### 第三步：截图保存关键信息
```javascript
mcp_mcp-puppeteer_puppeteer_screenshot({
  name: "subpackage-guide",
  width: 1200,
  height: 800
})
```

### 第四步：根据官方指导实施
严格按照官方文档的指导进行开发，避免使用过时或不推荐的方法。

## 注意事项

### 1. 版本兼容性
- 检查基础库版本要求
- 确认API的兼容性
- 注意废弃功能的替代方案

### 2. 最佳实践
- 遵循官方推荐的代码结构
- 使用官方推荐的组件和API
- 注意性能优化建议

### 3. 错误处理
- 按照官方文档处理异常情况
- 实现合适的降级方案
- 提供用户友好的错误提示

## 项目特定参考

### FlightToolbox小程序相关
基于项目特点，重点关注以下官方文档章节：
- [分包加载](mdc:https:/developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html) - 项目使用了分包策略
- [性能优化](mdc:https:/developers.weixin.qq.com/miniprogram/dev/framework/performance) - 项目注重性能表现
- [自定义组件](mdc:https:/developers.weixin.qq.com/miniprogram/dev/framework/custom-component) - 项目使用Vant组件库
- [数据缓存](mdc:https:/developers.weixin.qq.com/miniprogram/dev/api/storage/wx.setStorage.html) - 项目需要离线数据支持

## 违规处理
如果发现未遵循此规则直接修改小程序代码，应：
1. 立即停止当前修改
2. 查阅相关官方文档
3. 重新制定符合官方指导的方案
4. 重新实施修改

## 总结
遵循官方文档不仅能确保代码质量和兼容性，还能避免踩坑，提高开发效率。通过MCP工具主动查阅官方文档是保证小程序开发质量的重要环节。


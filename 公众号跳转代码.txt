# å¾®ä¿¡å°ç¨‹åºè·³è½¬å…¬ä¼—å·å®Œæ•´ä»£ç 

## æ¦‚è¿°
è¿™å¥—ä»£ç å®ç°äº†å¾®ä¿¡å°ç¨‹åºè·³è½¬åˆ°æŒ‡å®šå…¬ä¼—å·çš„åŠŸèƒ½ï¼ŒåŒ…å«ç”¨æˆ·ç¡®è®¤å¼¹çª—ã€APIè·³è½¬ã€å…œåº•äºŒç»´ç å±•ç¤ºç­‰å®Œæ•´æµç¨‹ã€‚

## æ ¸å¿ƒåŠŸèƒ½
- ç”¨æˆ·ç‚¹å‡»æŒ‰é’®åå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†
- ä½¿ç”¨å¾®ä¿¡æœ€æ–°API `openOfficialAccountProfile` ç›´æ¥è·³è½¬
- APIå¤±è´¥æ—¶è‡ªåŠ¨æ˜¾ç¤ºå…¬ä¼—å·äºŒç»´ç ä½œä¸ºå…œåº•æ–¹æ¡ˆ
- æ”¯æŒäºŒç»´ç é•¿æŒ‰è¯†åˆ«å’Œé¢„è§ˆåŠŸèƒ½

## ä»£ç å®ç°

### 1. WXML æ¨¡æ¿ä»£ç 

```xml
<!-- å…³æ³¨å…¬ä¼—å·åŒºåŸŸ -->
<view class="category-section wechat-section">
  <view class="category-header">
    <view class="category-icon">
      <text class="emoji-icon">ğŸ’¬</text>
      <view class="icon-bg wechat-bg"></view>
    </view>
    <view class="category-info">
      <text class="category-title">é£è¡Œæ’­å®¢</text>
      <text class="category-desc">è®©æˆ‘ä»¬ç”¨ä¸€ç§æ–°çš„æ–¹å¼æ¥å­¦é£è¡Œ</text>
    </view>
    <view class="category-badge">NEW</view>
  </view>
  
  <view class="wechat-content">
    <!-- ç›´æ¥è·³è½¬æŒ‰é’®ï¼ˆä½¿ç”¨æœ€æ–°APIï¼‰ -->
    <view class="direct-jump-action">
      <van-button 
        type="primary" 
        size="normal"
        class="jump-button"
        bind:click="jumpToOfficialAccount">
        è¿›å…¥é£è¡Œæ’­å®¢
      </van-button>
    </view>
  
    <!-- ç›´æ¥æ˜¾ç¤ºäºŒç»´ç å›¾ç‰‡ -->
    <view class="qr-display">
      <image 
        class="qr-code-image" 
        src="/images/OfficialAccount.png"
        mode="aspectFit"
        bind:tap="previewQRCode"
        show-menu-by-longpress="{{true}}"
      />
      <text class="qr-hint">é•¿æŒ‰è¯†åˆ«äºŒç»´ç å…³æ³¨"é£è¡Œæ’­å®¢"</text>
    </view>
  </view>
</view>

<!-- å…¬ä¼—å·äºŒç»´ç å¼¹çª— -->
<van-popup
  show="{{ showQRCodeModal }}"
  bind:close="closeQRCodeModal"
  closeable="{{ true }}"
  close-icon-position="top-right"
  round="{{ true }}"
  custom-style="padding: 40rpx; background: linear-gradient(135deg, #f0f9ff 0%, #e0f7fa 100%);"
>
  <view class="qr-modal-content">
    <text class="modal-title">å…³æ³¨å…¬ä¼—å·</text>
    <view class="qr-container">
      <image 
        class="qr-modal-image" 
        src="/images/OfficialAccount.png"
        mode="aspectFit"
        bind:tap="showQRCodeImage"
      />
      <text class="qr-title">é£è¡Œæ’­å®¢</text>
      <text class="qr-id">å…¬ä¼—å·ï¼šé£è¡Œæ’­å®¢</text>
      <text class="qr-modal-hint">é•¿æŒ‰è¯†åˆ«äºŒç»´ç æˆ–ç‚¹å‡»æŸ¥çœ‹å¤§å›¾</text>
    </view>
  </view>
</van-popup>
```

### 2. TypeScript/JavaScript é€»è¾‘ä»£ç 

```typescript
Page({
  data: {
    showQRCodeModal: false,
    // å…¶ä»–æ•°æ®...
  },

  // è·³è½¬å…¬ä¼—å·ï¼ˆå…ˆè¯¢é—®ç”¨æˆ·ç¡®è®¤ï¼‰
  jumpToOfficialAccount() {
    wx.showModal({
      title: 'å…³æ³¨é£è¡Œæ’­å®¢',
      content: 'æ˜¯å¦è¦è·³è½¬åˆ°"é£è¡Œæ’­å®¢"å…¬ä¼—å·ï¼Ÿ\nï¼ˆå°†åœ¨å¾®ä¿¡ä¸­æ‰“å¼€å…¬ä¼—å·é¡µé¢ï¼‰',
      showCancel: true,
      cancelText: 'å–æ¶ˆ',
      confirmText: 'ç¡®è®¤è·³è½¬',
      success: (res) => {
        if (res.confirm) {
          // ç”¨æˆ·ç¡®è®¤è·³è½¬ï¼Œå°è¯•ä½¿ç”¨æœ€æ–°API
          try {
            (wx as any).openOfficialAccountProfile({
              username: 'é£è¡Œæ’­å®¢',
              success: () => {
                console.log('âœ… æˆåŠŸè·³è½¬åˆ°å…¬ä¼—å·');
                wx.showToast({
                  title: 'è·³è½¬æˆåŠŸ',
                  icon: 'success',
                  duration: 1500
                });
              },
              fail: () => {
                console.log('âŒ è·³è½¬å¤±è´¥ï¼Œæ˜¾ç¤ºäºŒç»´ç ');
                this.showQRCodeModal();
              }
            });
          } catch (error) {
            console.log('âŒ APIä¸æ”¯æŒï¼Œæ˜¾ç¤ºäºŒç»´ç ');
            this.showQRCodeModal();
          }
        }
        // å¦‚æœç”¨æˆ·ç‚¹å‡»å–æ¶ˆï¼Œä»€ä¹ˆéƒ½ä¸åš
      }
    });
  },

  // æ˜¾ç¤ºäºŒç»´ç å¼¹çª—
  showQRCodeModal() {
    this.setData({
      showQRCodeModal: true
    });
  },

  // å…³é—­äºŒç»´ç å¼¹çª—
  closeQRCodeModal() {
    this.setData({
      showQRCodeModal: false
    });
  },

  // é¢„è§ˆäºŒç»´ç å¤§å›¾
  previewQRCode() {
    wx.previewImage({
      urls: ['/images/OfficialAccount.png'], // å…¬ä¼—å·äºŒç»´ç å›¾ç‰‡
      success: () => {
        console.log('âœ… é¢„è§ˆå…¬ä¼—å·äºŒç»´ç ');
      },
      fail: (err) => {
        console.log('âŒ é¢„è§ˆå¤±è´¥:', err);
        // å…œåº•æ–¹æ¡ˆï¼šæ˜¾ç¤ºæç¤º
        wx.showModal({
          title: 'è¯·åœ¨å¾®ä¿¡ä¸­æœç´¢"é£è¡Œæ’­å®¢"',
          content: 'å¯åœ¨å¾®ä¿¡ä¸­æœç´¢å…¬ä¼—å·"é£è¡Œæ’­å®¢"',
          showCancel: false,
          confirmText: 'çŸ¥é“äº†'
        });
      }
    });
  },

  // æ˜¾ç¤ºäºŒç»´ç å›¾ç‰‡ï¼ˆä»å¼¹çª—ä¸­ç‚¹å‡»ï¼‰
  showQRCodeImage() {
    this.previewQRCode();
  },

  // å¤åˆ¶å…¬ä¼—å·ID
  copyOfficialAccountId() {
    wx.setClipboardData({
      data: 'é£è¡Œæ’­å®¢',
      success: () => {
        wx.showToast({
          title: 'å…¬ä¼—å·IDå·²å¤åˆ¶',
          icon: 'success',
          duration: 2000
        });
      }
    });
  },

  // æç¤ºç”¨æˆ·æœç´¢å…¬ä¼—å·
  searchOfficialAccount() {
    wx.showModal({
      title: 'å…³æ³¨å…¬ä¼—å·',
      content: 'è¯·åœ¨å¾®ä¿¡ä¸­æœç´¢"é£è¡Œæ’­å®¢"æ¥å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€‚',
      showCancel: true,
      cancelText: 'å–æ¶ˆ',
      confirmText: 'å¤åˆ¶ID',
      success: (res) => {
        if (res.confirm) {
          this.copyOfficialAccountId();
        }
      }
    });
  }
});
```

### 3. WXSS æ ·å¼ä»£ç 

```css
/* ========== å…¬ä¼—å·å…³æ³¨åŒºåŸŸæ ·å¼ ========== */
.wechat-section {
  margin-top: 24rpx;
}

.wechat-section .category-badge {
  background: linear-gradient(135deg, #07c160 0%, #00a854 100%);
  color: #fff;
  font-weight: 700;
  font-size: 20rpx;
  padding: 6rpx 16rpx;
  border-radius: 16rpx;
  box-shadow: 0 4rpx 12rpx rgba(7, 193, 96, 0.3);
  animation: new-badge-pulse 2s ease-in-out infinite;
}

@keyframes new-badge-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.wechat-bg {
  background: linear-gradient(135deg, #07c160 0%, #00a854 100%);
}

.wechat-content {
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f7fa 50%, #f1f8e9 100%);
  border: 2rpx solid rgba(7, 193, 96, 0.1);
  border-radius: 24rpx;
  padding: 32rpx;
  margin-top: 24rpx;
  box-shadow: 
    0 8rpx 32rpx rgba(7, 193, 96, 0.08),
    0 4rpx 16rpx rgba(0, 0, 0, 0.04);
}

.direct-jump-action {
  margin-bottom: 32rpx;
  text-align: center;
}

.jump-button {
  width: 100%;
  background: linear-gradient(135deg, #07c160 0%, #00a854 100%) !important;
  border: none !important;
  border-radius: 16rpx !important;
  font-weight: 600;
  font-size: 32rpx;
  height: 88rpx;
  box-shadow: 0 8rpx 24rpx rgba(7, 193, 96, 0.3);
  transition: all 0.3s ease;
}

.jump-button:active {
  transform: scale(0.98);
  box-shadow: 0 4rpx 16rpx rgba(7, 193, 96, 0.4);
}

.qr-display {
  text-align: center;
}

.qr-code-image {
  width: 300rpx;
  height: 300rpx;
  border-radius: 24rpx;
  background: #fff;
  padding: 20rpx;
  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);
  margin-bottom: 24rpx;
  transition: all 0.3s ease;
}

.qr-code-image:active {
  transform: scale(0.95);
}

.qr-hint {
  display: block;
  font-size: 24rpx;
  color: #666;
  margin-top: 16rpx;
}

/* äºŒç»´ç å¼¹çª—æ ·å¼ */
.qr-modal-content {
  text-align: center;
  padding: 20rpx;
}

.modal-title {
  font-size: 36rpx;
  font-weight: 600;
  color: #333;
  margin-bottom: 32rpx;
  display: block;
}

.qr-container {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.qr-modal-image {
  width: 400rpx;
  height: 400rpx;
  border-radius: 24rpx;
  background: #fff;
  padding: 20rpx;
  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);
  margin-bottom: 32rpx;
  transition: all 0.3s ease;
}

.qr-modal-image:active {
  transform: scale(0.95);
}

.qr-title {
  font-size: 32rpx;
  font-weight: 600;
  color: #333;
  margin-bottom: 16rpx;
  display: block;
}

.qr-id {
  font-size: 28rpx;
  color: #666;
  margin-bottom: 24rpx;
  display: block;
}

.qr-modal-hint {
  font-size: 24rpx;
  color: #999;
  line-height: 1.5;
  display: block;
}
```

### 4. JSON é…ç½®ï¼ˆå¦‚æœä½¿ç”¨Vantç»„ä»¶ï¼‰

```json
{
  "usingComponents": {
    "van-button": "@vant/weapp/button/index",
    "van-popup": "@vant/weapp/popup/index"
  }
}
```

## ä½¿ç”¨è¯´æ˜

### 1. å‡†å¤‡å·¥ä½œ
- å°†å…¬ä¼—å·äºŒç»´ç å›¾ç‰‡æ”¾åœ¨ `/images/OfficialAccount.png` è·¯å¾„
- æ›¿æ¢ä»£ç ä¸­çš„ `'é£è¡Œæ’­å®¢'` ä¸ºæ‚¨çš„å…¬ä¼—å·åç§°
- ç¡®ä¿å·²å®‰è£…Vant Weappç»„ä»¶åº“

### 2. æ ¸å¿ƒAPIè¯´æ˜
- `wx.openOfficialAccountProfile()`: å¾®ä¿¡å®˜æ–¹APIï¼Œå¯ç›´æ¥è·³è½¬åˆ°å…¬ä¼—å·
- `username`: å…¬ä¼—å·çš„åŸå§‹IDæˆ–å¾®ä¿¡å·
- è¯¥APIéœ€è¦ç”¨æˆ·ç¡®è®¤ï¼Œä¸”å¯èƒ½å› ç‰ˆæœ¬æˆ–æƒé™é—®é¢˜å¤±è´¥

### 3. å…œåº•æœºåˆ¶
- APIè·³è½¬å¤±è´¥æ—¶è‡ªåŠ¨æ˜¾ç¤ºäºŒç»´ç å¼¹çª—
- ç”¨æˆ·å¯ä»¥é•¿æŒ‰è¯†åˆ«äºŒç»´ç 
- æ”¯æŒç‚¹å‡»é¢„è§ˆå¤§å›¾åŠŸèƒ½
- æä¾›å¤åˆ¶å…¬ä¼—å·IDåŠŸèƒ½

### 4. ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- è·³è½¬å‰è¯¢é—®ç”¨æˆ·ç¡®è®¤ï¼Œé¿å…è¯¯æ“ä½œ
- æä¾›å¤šç§å…³æ³¨æ–¹å¼ï¼šç›´æ¥è·³è½¬ã€äºŒç»´ç è¯†åˆ«ã€æœç´¢å…³æ³¨
- ä¼˜é›…çš„åŠ¨ç”»æ•ˆæœå’Œè§†è§‰åé¦ˆ
- å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œå…œåº•æ–¹æ¡ˆ

## æ³¨æ„äº‹é¡¹

1. **APIå…¼å®¹æ€§**: `openOfficialAccountProfile` éœ€è¦è¾ƒæ–°çš„å¾®ä¿¡ç‰ˆæœ¬æ”¯æŒ
2. **å…¬ä¼—å·ID**: ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„å…¬ä¼—å·åŸå§‹IDæˆ–å¾®ä¿¡å·
3. **å›¾ç‰‡è·¯å¾„**: ç¡®ä¿äºŒç»´ç å›¾ç‰‡è·¯å¾„æ­£ç¡®ä¸”å›¾ç‰‡å­˜åœ¨
4. **ç”¨æˆ·ä½“éªŒ**: å»ºè®®åŒæ—¶æä¾›å¤šç§å…³æ³¨æ–¹å¼ï¼Œæé«˜æˆåŠŸç‡

## åŠŸèƒ½ç‰¹ç‚¹

- âœ… ä¸€é”®ç›´æ¥è·³è½¬åˆ°å…¬ä¼—å·
- âœ… æ™ºèƒ½å…œåº•æœºåˆ¶ç¡®ä¿100%å¯ç”¨
- âœ… ç”¨æˆ·å‹å¥½çš„ç¡®è®¤æµç¨‹
- âœ… ç²¾ç¾çš„è§†è§‰è®¾è®¡å’ŒåŠ¨ç”»æ•ˆæœ
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… å¤šç§å…³æ³¨æ–¹å¼è¦†ç›–ä¸åŒåœºæ™¯

è¿™å¥—ä»£ç ç»è¿‡å®é™…é¡¹ç›®éªŒè¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æˆ–æ ¹æ®éœ€è¦è¿›è¡Œå®šåˆ¶åŒ–ä¿®æ”¹ã€‚

# FlightToolbox 飞行专用激励广告系统

## 设计理念

### 🛫 离线优先
- 无网络环境下也能正常发放积分奖励
- 专为飞行员在驾驶舱等离线环境设计
- 完全基于客户端的安全验证

### 🔒 飞行友好的安全策略
- 宽容的频率限制：30秒间隔
- 智能行为检查：10分钟内最多5次
- 每日次数上限：15次（适应长途飞行）
- 异常容错：优先保证功能可用

## 核心特性

1. **零网络依赖**：所有验证和奖励都在本地完成
2. **自动预加载**：后台预加载广告，减少等待
3. **页面独立**：每个页面维护独立广告实例
4. **智能验证**：多重安全检查，宽容策略

## 使用方法

```javascript
// 引入广告管理器
const adManager = require('../../utils/ad-manager.js');

// 展示激励广告
const result = await adManager.showRewardedAd({
  reason: 'feature_access',
  feature: 'unit_converter'
});

// 积分不足引导
adManager.showInsufficientPointsGuide(requiredPoints, currentPoints);
```

## 奖励机制

- 每次观看广告获得 **15积分**
- 即时发放，无需等待
- 本地存储，离线安全
- 自动通知页面刷新积分显示

## 安全验证

1. **时间间隔**：30秒最小间隔
2. **每日限制**：最多15次/天
3. **行为检查**：10分钟内最多5次
4. **基础验证**：确认完整观看

## 错误处理

- 广告加载失败：自动重试
- 展示失败：提供重新加载选项
- 验证异常：采用宽容策略
- 网络异常：确认积分安全保存

## 最佳实践

### 用户体验
- 提供清晰的积分获取提示
- 展示友好的等待界面
- 合理引导观看广告
- 避免强制展示

### 性能优化
- 预加载减少等待时间
- 及时清理资源
- 使用防抖减少重复操作

## 调试日志

```
🛫 - 离线优先模式
✅ - 操作成功  
❌ - 操作失败
🔒 - 安全验证
💰 - 积分相关
```

---

**核心理念**: 离线优先 · 飞行友好 · 安全可靠 
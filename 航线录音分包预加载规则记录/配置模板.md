# æ–°å¢æœºåœºé…ç½®æ¨¡æ¿

**ç”¨é€”**: å¿«é€Ÿå¤åˆ¶ç²˜è´´çš„é…ç½®æ¨¡æ¿  
**ä½¿ç”¨æ–¹æ³•**: å¤åˆ¶æ¨¡æ¿ï¼Œæ›¿æ¢å ä½ç¬¦ `{...}`

---

## ğŸ“ æ–‡ä»¶æ¨¡æ¿

### 1. package{CountryName}/index.js

```javascript
// package{CountryName}/index.js
// {å›½å®¶}éŸ³é¢‘åˆ†åŒ… - {åŸå¸‚}{æœºåœº}çœŸå®é™†ç©ºé€šè¯å½•éŸ³

// å¯¼å‡ºåˆ†åŒ…ä¿¡æ¯
module.exports = {
  name: '{country}AudioPackage',
  description: '{å›½å®¶}{åŸå¸‚}{æœºåœº}çœŸå®é™†ç©ºé€šè¯å½•éŸ³ï¼ˆ{èˆªç©ºå…¬å¸1}, {èˆªç©ºå…¬å¸2}, {èˆªç©ºå…¬å¸3}ç­‰ï¼‰',
  version: '1.0.0',
  audioCount: {å®é™…éŸ³é¢‘æ–‡ä»¶æ•°é‡},
  lastUpdated: '{YYYY-MM-DD}'
};
```

**å ä½ç¬¦è¯´æ˜**:
- `{CountryName}`: å›½å®¶è‹±æ–‡åï¼Œé¦–å­—æ¯å¤§å†™ï¼ˆå¦‚ï¼šJapan, UK, Koreaï¼‰
- `{country}`: å›½å®¶è‹±æ–‡åï¼Œå…¨å°å†™ï¼ˆå¦‚ï¼šjapan, uk, koreaï¼‰
- `{å›½å®¶}`: å›½å®¶ä¸­æ–‡åï¼ˆå¦‚ï¼šæ—¥æœ¬ã€è‹±å›½ã€éŸ©å›½ï¼‰
- `{åŸå¸‚}`: åŸå¸‚ä¸­æ–‡åï¼ˆå¦‚ï¼šä¸œäº¬ã€ä¼¦æ•¦ã€é¦–å°”ï¼‰
- `{æœºåœº}`: æœºåœºåç§°ï¼ˆå¦‚ï¼šæˆç”°æœºåœºã€å¸Œæ–¯ç½—æœºåœºã€ä»å·æœºåœºï¼‰
- `{èˆªç©ºå…¬å¸X}`: å½•éŸ³ä¸­çš„èˆªç©ºå…¬å¸ï¼ˆå¦‚ï¼šChina Eastern, Hainan, Qantasï¼‰
- `{å®é™…éŸ³é¢‘æ–‡ä»¶æ•°é‡}`: æ•°å­—ï¼Œå¦‚ï¼š36
- `{YYYY-MM-DD}`: æ—¥æœŸæ ¼å¼ï¼Œå¦‚ï¼š2025-10-25

---

### 2. data/regions/{country}.js

```javascript
// data/regions/{country}.js
// {å›½å®¶}{åŸå¸‚}{æœºåœº}é™†ç©ºé€šè¯å½•éŸ³æ•°æ®æ–‡ä»¶

const {Country}Data = {
  "clips": [
    {
      "label": "{ç®¡åˆ¶é˜¶æ®µ}",
      "full_transcript": "{å®Œæ•´è‹±æ–‡è½¬å½•}",
      "translation_cn": "{å®Œæ•´ä¸­æ–‡ç¿»è¯‘}",
      "mp3_file": "{éŸ³é¢‘æ–‡ä»¶å}.mp3"
    },
    {
      "label": "{ç®¡åˆ¶é˜¶æ®µ}",
      "full_transcript": "{å®Œæ•´è‹±æ–‡è½¬å½•}",
      "translation_cn": "{å®Œæ•´ä¸­æ–‡ç¿»è¯‘}",
      "mp3_file": "{éŸ³é¢‘æ–‡ä»¶å}.mp3"
    }
    // ... æ›´å¤šå½•éŸ³æ¡ç›®
  ]
};

module.exports = {Country}Data;
```

**å ä½ç¬¦è¯´æ˜**:
- `{country}`: å›½å®¶è‹±æ–‡åï¼Œå…¨å°å†™ï¼ˆå¦‚ï¼šjapan, uk, koreaï¼‰
- `{Country}`: å›½å®¶è‹±æ–‡åï¼Œé¦–å­—æ¯å¤§å†™ï¼ˆå¦‚ï¼šJapan, UK, Koreaï¼‰
- `{ç®¡åˆ¶é˜¶æ®µ}`: ä¸­æ–‡æ ‡ç­¾ï¼Œå¯é€‰å€¼ï¼šæ”¾è¡Œã€åœ°é¢ã€å¡”å°ã€ç¦»åœºã€åŒºè°ƒã€è¿›åœºã€è¿›è¿‘
- `{å®Œæ•´è‹±æ–‡è½¬å½•}`: é™†ç©ºé€šè¯çš„è‹±æ–‡åŸæ–‡
- `{å®Œæ•´ä¸­æ–‡ç¿»è¯‘}`: ä¸­æ–‡ç¿»è¯‘
- `{éŸ³é¢‘æ–‡ä»¶å}`: ä¸å«è·¯å¾„çš„æ–‡ä»¶åï¼Œå¦‚ï¼šChina-Eastern-7551_Descend-FL250.mp3

**æ•°æ®æ¡ç›®ç¤ºä¾‹**:
```javascript
{
  "label": "åŒºè°ƒ",
  "full_transcript": "China Eastern 7551, descend flight level 250, level by LOGAN.",
  "translation_cn": "ä¸œæ–¹èˆªç©º7551ï¼Œä¸‹é™åˆ°é«˜åº¦å±‚250ï¼Œåœ¨LOGANæ”¹å¹³ã€‚",
  "mp3_file": "China-Eastern-7551_Descend-FL250-level-by-LOGAN.mp3"
}
```

---

### 3. app.json - subPackages é…ç½®

```json
// åœ¨ miniprogram/app.json çš„ subPackages æ•°ç»„æœ«å°¾æ·»åŠ 

{
  "root": "package{CountryName}",
  "name": "{country}AudioPackage",
  "pages": ["index"]
}
```

**å®Œæ•´ç¤ºä¾‹**:
```json
{
  "subPackages": [
    {
      "root": "packageJapan",
      "name": "japanAudioPackage",
      "pages": ["index"]
    },
    {
      "root": "packageUK",
      "name": "ukAudioPackage",
      "pages": ["index"]
    }
    // åœ¨è¿™é‡Œæ·»åŠ æ–°çš„åˆ†åŒ…é…ç½®
  ]
}
```

---

### 4. app.json - preloadRule é…ç½®

```json
// åœ¨ miniprogram/app.json çš„ preloadRule ä¸­é€‰æ‹©åˆé€‚çš„é¡µé¢æ›´æ–°

// é€‰é¡¹ 1ï¼šé€šä¿¡å¤±æ•ˆé¡µï¼ˆæ¨èï¼Œå‰©ä½™ç©ºé—´æœ€å¤šï¼‰
"pages/communication-failure/index": {
  "network": "all",
  "packages": [
    "packageRussia", 
    "packageAustralia", 
    "packageFrance", 
    "packageSingapore",
    "package{CountryName}"  // æ·»åŠ è¿™é‡Œ
  ]
}

// é€‰é¡¹ 2ï¼šå½•éŸ³ç‰‡æ®µé¡µ
"pages/recording-clips/index": {
  "network": "all",
  "packages": [
    "packageThailand", 
    "packageSrilanka", 
    "packageTurkey",
    "package{CountryName}"  // æˆ–æ·»åŠ è¿™é‡Œ
  ]
}

// é€‰é¡¹ 3ï¼šå½•éŸ³åˆ†ç±»é¡µ
"pages/recording-categories/index": {
  "network": "all",
  "packages": [
    "packageUAE", 
    "packageItaly", 
    "packagePhilippines",
    "package{CountryName}"  // æˆ–æ·»åŠ è¿™é‡Œ
  ]
}
```

**å¦‚ä½•é€‰æ‹©é¢„åŠ è½½é¡µé¢**:
1. è®¡ç®—ä½ çš„åˆ†åŒ…å¤§å°ï¼ˆMBï¼‰
2. æŸ¥çœ‹å„é¢„åŠ è½½é¡µé¢çš„å‰©ä½™ç©ºé—´
3. é€‰æ‹©å‰©ä½™ç©ºé—´è¶³å¤Ÿçš„é¡µé¢
4. ç¡®ä¿è¯¥é¡µé¢æ€»é¢„åŠ è½½é‡ < 2MB

**å½“å‰å‰©ä½™ç©ºé—´**ï¼ˆv2.8.1ï¼‰:
- ğŸ“¡ é€šä¿¡å¤±æ•ˆï¼š0.29 MBï¼ˆæ¨èä¼˜å…ˆä½¿ç”¨ï¼‰
- ğŸ¬ å½•éŸ³ç‰‡æ®µï¼š0.75 MB
- ğŸ“‚ å½•éŸ³åˆ†ç±»ï¼š0.39 MB
- âœˆï¸ èˆªçº¿å½•éŸ³ï¼š0.28 MB
- ğŸµ å½•éŸ³æ’­æ”¾ï¼š0.26 MB

---

### 5. audio-preload-guide.js é…ç½®

```javascript
// åœ¨ miniprogram/utils/audio-preload-guide.js çš„ preloadPageMapping å¯¹è±¡ä¸­æ·»åŠ 

'{countryId}': {
  packageName: 'package{CountryName}',
  regionName: '{å›½å®¶}{åŸå¸‚}{æœºåœº}',
  flag: '{å›½æ——emoji}',
  preloadPage: '{é¢„åŠ è½½é¡µé¢è·¯å¾„}',
  preloadPageName: '{é¢„åŠ è½½é¡µé¢ä¸­æ–‡å}',
  preloadPageIcon: '{é¡µé¢å›¾æ ‡emoji}',
  description: '{å›½å®¶}{åŸå¸‚}{æœºåœº}é™†ç©ºé€šè¯å½•éŸ³å°†é€šè¿‡{é¡µé¢ä¸­æ–‡å}é¡µé¢è‡ªåŠ¨é¢„åŠ è½½'
}
```

**å ä½ç¬¦è¯´æ˜**:
- `{countryId}`: åœ°åŒºIDï¼Œå…¨å°å†™ï¼ˆå¦‚ï¼šjapan, uk, korea, usa, uaeï¼‰
- `{CountryName}`: å›½å®¶åï¼Œé¦–å­—æ¯å¤§å†™ï¼ˆå¦‚ï¼šJapan, UK, Koreaï¼‰
- `{å›½å®¶}`: ä¸­æ–‡å›½å®¶åï¼ˆå¦‚ï¼šæ—¥æœ¬ã€è‹±å›½ã€éŸ©å›½ï¼‰
- `{åŸå¸‚}`: ä¸­æ–‡åŸå¸‚åï¼ˆå¦‚ï¼šä¸œäº¬ã€ä¼¦æ•¦ã€é¦–å°”ï¼‰
- `{æœºåœº}`: ä¸­æ–‡æœºåœºåï¼ˆå¦‚ï¼šæˆç”°æœºåœºã€å¸Œæ–¯ç½—æœºåœºï¼‰
- `{å›½æ——emoji}`: å›½æ——è¡¨æƒ…ç¬¦å·ï¼ˆå¦‚ï¼šğŸ‡¯ğŸ‡µğŸ‡¬ğŸ‡§ğŸ‡°ğŸ‡·ï¼‰
- `{é¢„åŠ è½½é¡µé¢è·¯å¾„}`: é¡µé¢å®Œæ•´è·¯å¾„ï¼ˆå¦‚ï¼špages/communication-failure/indexï¼‰
- `{é¢„åŠ è½½é¡µé¢ä¸­æ–‡å}`: é¡µé¢ä¸­æ–‡åç§°ï¼ˆå¦‚ï¼šé€šä¿¡å¤±æ•ˆã€å½•éŸ³ç‰‡æ®µï¼‰
- `{é¡µé¢å›¾æ ‡emoji}`: é¡µé¢å›¾æ ‡ï¼ˆå¦‚ï¼šğŸ“¡ğŸ¬ğŸ“‚ï¼‰

**å®Œæ•´ç¤ºä¾‹**:
```javascript
'uk': {
  packageName: 'packageUK',
  regionName: 'è‹±å›½ä¼¦æ•¦å¸Œæ–¯ç½—æœºåœº',
  flag: 'ğŸ‡¬ğŸ‡§',
  preloadPage: 'pages/communication-failure/index',
  preloadPageName: 'é€šä¿¡å¤±æ•ˆ',
  preloadPageIcon: 'ğŸ“¡',
  description: 'è‹±å›½ä¼¦æ•¦å¸Œæ–¯ç½—æœºåœºé™†ç©ºé€šè¯å½•éŸ³å°†é€šè¿‡é€šä¿¡å¤±æ•ˆé¡µé¢è‡ªåŠ¨é¢„åŠ è½½'
}
```

---

## ğŸ“‹ å¿«é€Ÿå‚è€ƒ

### é¢„åŠ è½½é¡µé¢å¯¹ç…§è¡¨

| é¡µé¢è·¯å¾„ | ä¸­æ–‡å | å›¾æ ‡ | å‰©ä½™ç©ºé—´ |
|---------|--------|------|---------|
| pages/communication-failure/index | é€šä¿¡å¤±æ•ˆ | ğŸ“¡ | 0.29 MB |
| pages/recording-clips/index | å½•éŸ³ç‰‡æ®µ | ğŸ¬ | 0.75 MB |
| pages/recording-categories/index | å½•éŸ³åˆ†ç±» | ğŸ“‚ | 0.39 MB |
| pages/airline-recordings/index | èˆªçº¿å½•éŸ³ | âœˆï¸ | 0.28 MB |
| pages/audio-player/index | å½•éŸ³æ’­æ”¾ | ğŸµ | 0.26 MB |

### ç®¡åˆ¶é˜¶æ®µæ ‡ç­¾

| ä¸­æ–‡æ ‡ç­¾ | è‹±æ–‡å¯¹åº” | ä½¿ç”¨åœºæ™¯ |
|---------|---------|---------|
| æ”¾è¡Œ | Clearance Delivery | è·å–ç¦»åœºè®¸å¯ |
| åœ°é¢ | Ground Control | åœ°é¢æ»‘è¡Œ |
| å¡”å° | Tower | èµ·é£/è½åœ° |
| ç¦»åœº | Departure | ç¦»åœºçˆ¬å‡ |
| åŒºè°ƒ | Area Control / Center | å·¡èˆªé£è¡Œ |
| è¿›åœº | Arrival | åˆ°åœºä¸‹é™ |
| è¿›è¿‘ | Approach | è¿›è¿‘ç¨‹åº |

### å¸¸ç”¨å›½æ—— Emoji

```
ğŸ‡¨ğŸ‡³ ä¸­å›½    ğŸ‡¯ğŸ‡µ æ—¥æœ¬    ğŸ‡°ğŸ‡· éŸ©å›½    ğŸ‡ºğŸ‡¸ ç¾å›½
ğŸ‡¬ğŸ‡§ è‹±å›½    ğŸ‡«ğŸ‡· æ³•å›½    ğŸ‡®ğŸ‡¹ æ„å¤§åˆ©  ğŸ‡·ğŸ‡º ä¿„ç½—æ–¯
ğŸ‡¦ğŸ‡º æ¾³å¤§åˆ©äºš ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡  ğŸ‡¹ğŸ‡­ æ³°å›½    ğŸ‡µğŸ‡­ è²å¾‹å®¾
ğŸ‡¦ğŸ‡ª é˜¿è”é…‹  ğŸ‡¹ğŸ‡· åœŸè€³å…¶  ğŸ‡±ğŸ‡° æ–¯é‡Œå…°å¡ ğŸ‡®ğŸ‡³ å°åº¦
ğŸ‡©ğŸ‡ª å¾·å›½    ğŸ‡ªğŸ‡¸ è¥¿ç­ç‰™  ğŸ‡³ğŸ‡± è·å…°    ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§
```

---

## ğŸ”„ å®Œæ•´é…ç½®æµç¨‹ç¤ºä¾‹

### ç¤ºä¾‹ï¼šæ–°å¢å¾·å›½æ³•å…°å…‹ç¦æœºåœº

#### 1. package{CountryName}/index.js
```javascript
// packageGermany/index.js
module.exports = {
  name: 'germanyAudioPackage',
  description: 'å¾·å›½æ³•å…°å…‹ç¦æœºåœºçœŸå®é™†ç©ºé€šè¯å½•éŸ³ï¼ˆLufthansa, China Eastern, Air Chinaç­‰ï¼‰',
  version: '1.0.0',
  audioCount: 42,
  lastUpdated: '2025-10-25'
};
```

#### 2. data/regions/{country}.js
```javascript
// data/regions/germany.js
const GermanyData = {
  "clips": [
    {
      "label": "åŒºè°ƒ",
      "full_transcript": "Lufthansa 400, Frankfurt Control, descend flight level 250.",
      "translation_cn": "æ±‰èèˆªç©º400ï¼Œæ³•å…°å…‹ç¦ç®¡åˆ¶ï¼Œä¸‹é™é«˜åº¦å±‚250ã€‚",
      "mp3_file": "Lufthansa-400_Descend-FL250.mp3"
    }
    // ... æ›´å¤šå½•éŸ³
  ]
};
module.exports = GermanyData;
```

#### 3. app.json - subPackages
```json
{
  "root": "packageGermany",
  "name": "germanyAudioPackage",
  "pages": ["index"]
}
```

#### 4. app.json - preloadRule
```json
"pages/recording-clips/index": {
  "network": "all",
  "packages": [
    "packageThailand", 
    "packageSrilanka", 
    "packageTurkey",
    "packageGermany"  // æ–°å¢ï¼ˆå‡è®¾åˆ†åŒ… 0.5 MBï¼‰
  ]
}
```

#### 5. audio-preload-guide.js
```javascript
'germany': {
  packageName: 'packageGermany',
  regionName: 'å¾·å›½æ³•å…°å…‹ç¦æœºåœº',
  flag: 'ğŸ‡©ğŸ‡ª',
  preloadPage: 'pages/recording-clips/index',
  preloadPageName: 'å½•éŸ³ç‰‡æ®µ',
  preloadPageIcon: 'ğŸ¬',
  description: 'å¾·å›½æ³•å…°å…‹ç¦æœºåœºé™†ç©ºé€šè¯å½•éŸ³å°†é€šè¿‡å½•éŸ³ç‰‡æ®µé¡µé¢è‡ªåŠ¨é¢„åŠ è½½'
}
```

---

## âœ… æ›¿æ¢æ£€æŸ¥æ¸…å•

å®Œæˆé…ç½®åï¼Œç¡®ä¿æ‰€æœ‰å ä½ç¬¦éƒ½å·²æ›¿æ¢ï¼š

```bash
# æœç´¢æœªæ›¿æ¢çš„å ä½ç¬¦
grep -r "{Country" miniprogram/
grep -r "{country" miniprogram/
grep -r "{å›½å®¶" miniprogram/
grep -r "{åŸå¸‚" miniprogram/
grep -r "{æœºåœº" miniprogram/

# åº”è¯¥æ²¡æœ‰æœç´¢ç»“æœ
```

---

## ğŸ“ é…ç½®æ–‡ä»¶æ¸…å•

æ–°å¢ä¸€ä¸ªæœºåœºéœ€è¦ä¿®æ”¹/åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ï¼š

```
âœ… miniprogram/package{CountryName}/index.js          (æ–°å»º)
âœ… miniprogram/package{CountryName}/*.mp3             (å¤åˆ¶éŸ³é¢‘)
âœ… miniprogram/data/regions/{country}.js              (æ–°å»º)
âœ… miniprogram/app.json                               (ä¿®æ”¹2å¤„)
   - subPackages æ·»åŠ é…ç½®
   - preloadRule æ›´æ–°é…ç½®
âœ… miniprogram/utils/audio-preload-guide.js           (ä¿®æ”¹1å¤„)
   - preloadPageMapping æ·»åŠ æ˜ å°„
```

---

**åˆ›å»ºæ—¶é—´**: 2025-10-25  
**é€‚ç”¨ç‰ˆæœ¬**: v2.8.1+  
**é…å¥—æ–‡æ¡£**: 
- èˆªçº¿å½•éŸ³åˆ†åŒ…å®Œæ•´ç®¡ç†æŒ‡å—.md
- æ–°å¢æœºåœºå¿«é€Ÿå¼€å§‹æŒ‡å—.md


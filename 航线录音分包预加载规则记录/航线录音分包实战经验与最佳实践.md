# èˆªçº¿å½•éŸ³åˆ†åŒ…å®æˆ˜ç»éªŒä¸æœ€ä½³å®è·µ

**æ–‡æ¡£ç±»å‹**: å®æˆ˜æ€»ç»“ & æŠ€æœ¯æŒ‡å—  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-26  
**æµ‹è¯•çŠ¶æ€**: âœ… å·²åœ¨Androidå’ŒiOSå¤šè®¾å¤‡éªŒè¯é€šè¿‡  
**é€‚ç”¨ç‰ˆæœ¬**: v2.8.1+  
**æˆåŠŸæ¡ˆä¾‹**: 17ä¸ªå›½å®¶/åœ°åŒºï¼Œ708æ¡çœŸå®å½•éŸ³ï¼Œè¦†ç›–å…¨çƒäº”å¤§æ´²

---

## ğŸ‰ å®æˆ˜æˆæœæ€»ç»“

### ç³»ç»Ÿç¨³å®šæ€§éªŒè¯

```
âœ… å…¨å¹³å°æµ‹è¯•é€šè¿‡ï¼š
  - Android è®¾å¤‡ï¼šå®Œç¾è¿è¡Œ
  - iOS è®¾å¤‡ï¼šå®Œç¾è¿è¡Œ
  - å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼šé¢„è§ˆæ­£å¸¸
  
âœ… ç¦»çº¿åŠŸèƒ½éªŒè¯ï¼š
  - é£è¡Œæ¨¡å¼ä¸‹æ‰€æœ‰éŸ³é¢‘å¯æ­£å¸¸æ’­æ”¾
  - é¢„åŠ è½½åæ— éœ€ç½‘ç»œå³å¯ä½¿ç”¨
  - æ»¡è¶³é£è¡Œå‘˜ç©ºä¸­ä½¿ç”¨éœ€æ±‚
  
âœ… æ€§èƒ½è¡¨ç°ï¼š
  - 17ä¸ªéŸ³é¢‘åˆ†åŒ…ï¼ˆ33ä¸ªæ€»åˆ†åŒ…ï¼‰
  - 708æ¡çœŸå®å½•éŸ³
  - å•é¡µé¢é¢„åŠ è½½ < 2MB
  - åŠ è½½é€Ÿåº¦å¿«ï¼Œç”¨æˆ·ä½“éªŒä¼˜ç§€
  
âœ… è¦†ç›–èŒƒå›´ï¼š
  - ğŸŒ äºšæ´²ï¼š8ä¸ªå›½å®¶/åœ°åŒºï¼ˆ345æ¡å½•éŸ³ï¼‰
  - ğŸŒ æ¬§æ´²ï¼š5ä¸ªå›½å®¶ï¼ˆ135æ¡å½•éŸ³ï¼‰
  - ğŸŒ ç¾æ´²ï¼š2ä¸ªå›½å®¶ï¼ˆ110æ¡å½•éŸ³ï¼‰
  - ğŸï¸ å¤§æ´‹æ´²ï¼š1ä¸ªå›½å®¶ï¼ˆ20æ¡å½•éŸ³ï¼‰
  - ğŸŒ éæ´²ï¼š1ä¸ªå›½å®¶ï¼ˆ34æ¡å½•éŸ³ï¼‰- é¦–æ¬¡è¦†ç›–ï¼
```

---

## ğŸ“š æ ¸å¿ƒæŠ€æœ¯åŸç†

### 1. ä¸ºä»€ä¹ˆéœ€è¦åˆ†åŒ…é¢„åŠ è½½ï¼Ÿ

**æ ¸å¿ƒé—®é¢˜**ï¼š
- å¾®ä¿¡å°ç¨‹åºä¸»åŒ…å¤§å°é™åˆ¶ï¼š2MB
- éŸ³é¢‘æ–‡ä»¶ä½“ç§¯å¤§ï¼Œæ— æ³•å…¨éƒ¨æ”¾å…¥ä¸»åŒ…
- é£è¡Œå‘˜éœ€è¦ç¦»çº¿ä½¿ç”¨ï¼Œå¿…é¡»é¢„å…ˆä¸‹è½½

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨å¾®ä¿¡å°ç¨‹åºçš„**åˆ†åŒ…æœºåˆ¶**ï¼ˆsubPackagesï¼‰
- é…åˆ**é¢„åŠ è½½è§„åˆ™**ï¼ˆpreloadRuleï¼‰è‡ªåŠ¨ä¸‹è½½
- åˆ†æ•£åˆ°ä¸åŒé¡µé¢ï¼Œé¿å…å•é¡µé¢è¶…é™

### 2. åˆ†åŒ…é¢„åŠ è½½æœºåˆ¶è¯¦è§£

#### å·¥ä½œæµç¨‹

```
ç”¨æˆ·æ“ä½œæµç¨‹ï¼š
1. ç”¨æˆ·æ‰“å¼€å°ç¨‹åº
2. è®¿é—®é¢„åŠ è½½é¡µé¢ï¼ˆå¦‚ï¼šé€šä¿¡é¡µé¢ï¼‰
   â†“
3. å¾®ä¿¡è‡ªåŠ¨è§¦å‘ preloadRule
   â†“
4. åå°é™é»˜ä¸‹è½½å¯¹åº”åˆ†åŒ…
   â†“
5. ä¸‹è½½å®Œæˆï¼ŒéŸ³é¢‘å¯ç”¨

æŠ€æœ¯å®ç°æµç¨‹ï¼š
1. app.json å®šä¹‰ preloadRule
   {
     "pages/operations/index": {
       "packages": ["packageHongKong", "packageEgypt"]
     }
   }
   â†“
2. ç”¨æˆ·è®¿é—® pages/operations/index
   â†“
3. å¾®ä¿¡åº•å±‚è‡ªåŠ¨è°ƒç”¨ wx.loadSubpackage()
   â†“
4. ä¸‹è½½ packageHongKong å’Œ packageEgypt
   â†“
5. ä¸‹è½½å®Œæˆåï¼Œåˆ†åŒ…èµ„æºå¯è®¿é—®
```

#### å…³é”®çº¦æŸ

```javascript
// æ ¸å¿ƒé™åˆ¶ï¼ˆå¾®ä¿¡å°ç¨‹åºå¹³å°è§„å®šï¼‰
const CONSTRAINTS = {
  // å•é¡µé¢é¢„åŠ è½½æ€»å¤§å°é™åˆ¶
  maxPreloadSize: 2 * 1024 * 1024,  // 2MB
  
  // ä¸»åŒ…å¤§å°é™åˆ¶
  mainPackageSize: 2 * 1024 * 1024,  // 2MB
  
  // æ‰€æœ‰åˆ†åŒ…æ€»å¤§å°é™åˆ¶
  totalSubPackageSize: 20 * 1024 * 1024,  // 20MB
  
  // å•ä¸ªåˆ†åŒ…å¤§å°é™åˆ¶
  singleSubPackageSize: 2 * 1024 * 1024  // 2MB
};

// æˆ‘ä»¬çš„ç­–ç•¥ï¼ˆç»è¿‡å®æˆ˜éªŒè¯ï¼‰
const OUR_STRATEGY = {
  // éŸ³é¢‘å‹ç¼©åˆ° 32-48kbps
  audioQuality: '32-48kbps',
  
  // å•ä¸ªéŸ³é¢‘æ–‡ä»¶æ§åˆ¶åœ¨ 50KB ä»¥å†…
  singleAudioSize: 50 * 1024,
  
  // å•ä¸ªéŸ³é¢‘åˆ†åŒ…æ§åˆ¶åœ¨ 1.5MB ä»¥å†…ï¼ˆç•™æœ‰ä½™é‡ï¼‰
  singlePackageTarget: 1.5 * 1024 * 1024,
  
  // é¢„åŠ è½½é¡µé¢æ§åˆ¶åœ¨ 1.9MB ä»¥å†…ï¼ˆç•™æœ‰ä½™é‡ï¼‰
  preloadPageTarget: 1.9 * 1024 * 1024
};
```

### 3. 8æ­¥é…ç½®çš„æŠ€æœ¯åŸç†

#### ä¸ºä»€ä¹ˆéœ€è¦8æ­¥ï¼Œè€Œä¸æ˜¯5æ­¥ï¼Ÿ

**æœ€åˆç‰ˆæœ¬ï¼ˆ5æ­¥ï¼‰**ï¼š
```
æ­¥éª¤1: åˆ›å»ºåˆ†åŒ…ç›®å½•å’Œæ–‡ä»¶
æ­¥éª¤2: åˆ›å»ºæ•°æ®æ–‡ä»¶
æ­¥éª¤3: æ›´æ–° app.json
æ­¥éª¤4: æ›´æ–° audio-preload-guide.js
æ­¥éª¤5: éªŒè¯å’Œæµ‹è¯•
```

**é—®é¢˜**ï¼šUKå’ŒChinese Taipeiæ— æ³•æ’­æ”¾ï¼

**æ ¹æœ¬åŸå› **ï¼šé—æ¼äº†3ä¸ªæ ¸å¿ƒæ¨¡å—çš„é…ç½®

**ä¿®æ­£åï¼ˆ8æ­¥ï¼‰**ï¼š
```
æ­¥éª¤1: åˆ›å»ºåˆ†åŒ…ç›®å½•å’Œæ–‡ä»¶
æ­¥éª¤2: åˆ›å»ºæ•°æ®æ–‡ä»¶
æ­¥éª¤3: ç»Ÿè®¡å¤§å°å¹¶é€‰æ‹©é¢„åŠ è½½é¡µé¢
æ­¥éª¤4: æ›´æ–° app.json
æ­¥éª¤5: æ›´æ–° audio-preload-guide.js
æ­¥éª¤6: æ›´æ–° audio-config.js      â† ğŸ”¥ å…³é”®ï¼ˆé¡µé¢æ˜¾ç¤ºï¼‰
æ­¥éª¤7: æ›´æ–° audio-package-loader.js  â† ğŸ”¥ å…³é”®ï¼ˆåˆ†åŒ…åŠ è½½ï¼‰
æ­¥éª¤8: æ›´æ–° audio-player/index.ts   â† ğŸ”¥ å…³é”®ï¼ˆéŸ³é¢‘æ’­æ”¾ï¼‰
```

#### æ¯ä¸ªé…ç½®æ–‡ä»¶çš„ä½œç”¨

```javascript
// 1ï¸âƒ£ app.json
// ä½œç”¨ï¼šå¾®ä¿¡å°ç¨‹åºåº•å±‚é…ç½®ï¼Œå®šä¹‰åˆ†åŒ…å’Œé¢„åŠ è½½è§„åˆ™
{
  "subPackages": [...],      // æ³¨å†Œåˆ†åŒ…
  "preloadRule": {...}       // å®šä¹‰é¢„åŠ è½½è§¦å‘æ¡ä»¶
}

// 2ï¸âƒ£ audio-preload-guide.js
// ä½œç”¨ï¼šç”¨æˆ·å¼•å¯¼ç³»ç»Ÿï¼Œå‘Šè¯‰ç”¨æˆ·å¦‚ä½•é¢„åŠ è½½
class AudioPreloadGuide {
  preloadPageMapping = {
    'regionId': {
      packageName: '...',
      preloadPage: '...',    // é¢„åŠ è½½é¡µé¢
      description: '...'     // ç”¨æˆ·æç¤ºæ–‡æ¡ˆ
    }
  }
}

// 3ï¸âƒ£ audio-config.js
// ä½œç”¨ï¼šæ•°æ®é…ç½®ä¸­å¿ƒï¼Œæ§åˆ¶é¡µé¢æ˜¾ç¤º
class AudioConfigManager {
  regions = [...];           // å›½å®¶/åœ°åŒºåˆ—è¡¨
  airports = [...];          // æœºåœºè¯¦ç»†ä¿¡æ¯
  continents = [...];        // å¤§æ´²ç»Ÿè®¡æ•°æ®
}
// âš ï¸ å¦‚æœç¼ºå°‘ï¼šèˆªçº¿å½•éŸ³é¡µé¢çœ‹ä¸åˆ°å›½å®¶å¡ç‰‡

// 4ï¸âƒ£ audio-package-loader.js
// ä½œç”¨ï¼šåŠ¨æ€åˆ†åŒ…åŠ è½½ç®¡ç†å™¨
class AudioPackageLoader {
  packageMapping = {
    'regionId': {
      packageName: '...',
      packageRoot: '...'     // åˆ†åŒ…æ ¹ç›®å½•
    }
  }
}
// âš ï¸ å¦‚æœç¼ºå°‘ï¼šç‚¹å‡»æ’­æ”¾æ—¶æç¤º"åˆ†åŒ…åŠ è½½å¤±è´¥"

// 5ï¸âƒ£ audio-player/index.ts
// ä½œç”¨ï¼šéŸ³é¢‘æ’­æ”¾å™¨ï¼Œè§£æéŸ³é¢‘æ–‡ä»¶è·¯å¾„
setAudioSource(clip: any) {
  const regionPathMap = {
    'regionId': '/packageName/'  // éŸ³é¢‘æ–‡ä»¶è·¯å¾„
  };
}
// âš ï¸ å¦‚æœç¼ºå°‘ï¼šæ’­æ”¾å™¨åˆå§‹åŒ–å¤±è´¥ï¼ŒéŸ³é¢‘æ— æ³•æ’­æ”¾
```

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. éŸ³é¢‘æ–‡ä»¶å‘½åè§„èŒƒ

**æ ¼å¼**ï¼š`{èˆªç©ºå…¬å¸}-{èˆªç­å·}_{é€šä¿¡å†…å®¹æè¿°}.mp3`

**ç¤ºä¾‹**ï¼š
```
âœ… China-Eastern-7551_Descend-FL250.mp3
âœ… WestJet-571_Clear-ILS-runway-08-right.mp3
âœ… Emirates-921_Taxi-to-Gate-E1.mp3

âŒ china_eastern_7551.mp3          (å°å†™ã€ä¸‹åˆ’çº¿)
âŒ CES7551DescendFL250.mp3          (æ— åˆ†éš”ç¬¦)
âŒ ä¸œæ–¹èˆªç©º-7551_ä¸‹é™é«˜åº¦å±‚250.mp3  (ä¸­æ–‡)
```

**åŸå› **ï¼š
- å¯è¯»æ€§å¥½ï¼Œä¾¿äºç®¡ç†
- ç¬¦åˆè‹±æ–‡é€šä¿¡ä¹ æƒ¯
- é¿å…ä¸­æ–‡æ–‡ä»¶ååœ¨æŸäº›å¹³å°çš„å…¼å®¹æ€§é—®é¢˜

### 2. regionId å‘½åè§„èŒƒï¼ˆæå…¶é‡è¦ï¼‰

**åŸåˆ™**ï¼šå…¨å°å†™è‹±æ–‡ï¼Œå•è¯é—´ä½¿ç”¨è¿å­—ç¬¦

**æ­£ç¡®ç¤ºä¾‹**ï¼š
```javascript
âœ… 'japan'
âœ… 'korea'
âœ… 'uk'
âœ… 'usa'
âœ… 'singapore'
âœ… 'chinese-taipei'    // å¤šä¸ªå•è¯ç”¨è¿å­—ç¬¦
âœ… 'south-africa'
```

**é”™è¯¯ç¤ºä¾‹**ï¼š
```javascript
âŒ 'Japan'             // é¦–å­—æ¯å¤§å†™
âŒ 'south_korea'       // ä½¿ç”¨ä¸‹åˆ’çº¿
âŒ 'UK'                // å…¨å¤§å†™
âŒ 'united-kingdom'    // ä¸åˆ†åŒ…åä¸ä¸€è‡´
âŒ 'è‹±å›½'              // ä¸­æ–‡
```

**ä¸ºä»€ä¹ˆé‡è¦**ï¼š
- regionId å¿…é¡»åœ¨5ä¸ªæ–‡ä»¶ä¸­ä¿æŒå®Œå…¨ä¸€è‡´
- ä»»ä½•ä¸€ä¸ªä¸ä¸€è‡´éƒ½ä¼šå¯¼è‡´æ’­æ”¾å¤±è´¥
- ç³»ç»Ÿé€šè¿‡ regionId è¿›è¡Œæ•°æ®å…³è”

### 3. åˆ†åŒ…ç›®å½•å‘½åè§„èŒƒ

**æ ¼å¼**ï¼š`package + é¦–å­—æ¯å¤§å†™å›½å®¶å`

**æ­£ç¡®ç¤ºä¾‹**ï¼š
```
âœ… packageJapan
âœ… packageKorean        // æ³¨æ„ï¼šKorean ä¸æ˜¯ Korea
âœ… packageUK
âœ… packageAmerica       // æˆ– packageUSA
âœ… packageSingapore
âœ… packagePhilippines
âœ… packageEgypt
âœ… packageCanada
```

**é”™è¯¯ç¤ºä¾‹**ï¼š
```
âŒ Packagejapan        // é¦–å­—æ¯å°å†™
âŒ package_japan       // ä½¿ç”¨ä¸‹åˆ’çº¿
âŒ packageJP           // ä½¿ç”¨ç¼©å†™
âŒ japan-package       // é¡ºåºé”™è¯¯
```

### 4. æ•°æ®æ–‡ä»¶ç»“æ„ï¼ˆæ ‡å‡†æ ¼å¼ï¼‰

```javascript
// data/regions/{country}.js

/**
 * {å›½å®¶}{æœºåœº}é™†ç©ºé€šè¯å½•éŸ³æ•°æ®
 * {Airport Name} ({ICAO})
 * åŒ…å«XXæ¡çœŸå®å½•éŸ³
 */

module.exports = {
  clips: [
    {
      label: 'åŒºè°ƒ',              // å¿…å¡«ï¼š7ç§æ ‡ç­¾ä¹‹ä¸€
      full_transcript: '...',    // å¿…å¡«ï¼šå®Œæ•´è‹±æ–‡è½¬å½•
      translation_cn: '...',     // å¿…å¡«ï¼šå®Œæ•´ä¸­æ–‡ç¿»è¯‘
      mp3_file: '...'            // å¿…å¡«ï¼šéŸ³é¢‘æ–‡ä»¶å
    }
    // ... æ›´å¤šå½•éŸ³
  ]
};
```

**æ ‡ç­¾ç±»å‹ï¼ˆ7ç§ï¼‰**ï¼š
```
1. æ”¾è¡Œ - Clearance Delivery
2. åœ°é¢ - Ground
3. å¡”å° - Tower
4. ç¦»åœº - Departure
5. åŒºè°ƒ - Area Control Center
6. è¿›åœº - Arrival
7. è¿›è¿‘ - Approach
```

**æ’åºå»ºè®®**ï¼š
```
æŒ‰é£è¡Œé˜¶æ®µæ’åºï¼š
æ”¾è¡Œ â†’ åœ°é¢ â†’ å¡”å° â†’ ç¦»åœº â†’ åŒºè°ƒ â†’ è¿›åœº â†’ è¿›è¿‘

æˆ–æŒ‰èˆªç­åˆ†ç»„ï¼š
åŒä¸€èˆªç­çš„å½•éŸ³è¿ç»­æ’åˆ—ï¼ˆæ›´æ¨èï¼‰
```

### 5. é¢„åŠ è½½é¡µé¢é€‰æ‹©ç­–ç•¥

#### å¯ç”¨é¡µé¢ï¼ˆv2.8.1æœ€æ–°çŠ¶æ€ï¼‰

| é¡µé¢è·¯å¾„ | é¡µé¢åç§° | å½“å‰å·²ç”¨ | å‰©ä½™ç©ºé—´ | æ¨èåº¦ | å¤‡æ³¨ |
|---------|---------|---------|---------|--------|------|
| `pages/recording-clips/index` | å½•éŸ³ç‰‡æ®µ | 1.70 MB | **0.30 MB** | â­â­â­â­â­ | æœ€ä¼˜é€‰æ‹© |
| `pages/recording-categories/index` | å½•éŸ³åˆ†ç±» | 1.61 MB | **0.39 MB** | â­â­â­â­ | æ¨è |
| `pages/communication-failure/index` | é€šä¿¡å¤±æ•ˆ | 1.88 MB | **0.12 MB** | â­â­ | ç©ºé—´ç´§å¼  |
| `pages/airline-recordings/index` | èˆªçº¿å½•éŸ³ | 1.72 MB | **0.28 MB** | â­â­â­ | å¯ç”¨ |
| `pages/audio-player/index` | å½•éŸ³æ’­æ”¾ | 1.30 MB | **0.70 MB** | â­â­â­â­ | æ¨è |
| `pages/operations/index` | é€šä¿¡ | 1.98 MB | **0.02 MB** | â­ | å‡ ä¹æ»¡è½½ |
| `pages/home/index` | æˆ‘çš„é¦–é¡µ | 1.81 MB | **0.19 MB** | â­â­ | ç©ºé—´æœ‰é™ |

#### é€‰æ‹©è§„åˆ™

```javascript
function selectPreloadPage(packageSize) {
  if (packageSize < 0.15) {
    return 'pages/communication-failure/index';  // å°åˆ†åŒ…
  } else if (packageSize < 0.30) {
    return 'pages/airline-recordings/index';     // ä¸­å°åˆ†åŒ…
  } else if (packageSize < 0.40) {
    return 'pages/recording-categories/index';   // ä¸­ç­‰åˆ†åŒ…
  } else if (packageSize < 0.70) {
    return 'pages/audio-player/index';           // è¾ƒå¤§åˆ†åŒ…
  } else {
    // åˆ†åŒ…è¿‡å¤§ï¼Œéœ€è¦å‹ç¼©æˆ–æ‹†åˆ†
    console.warn('åˆ†åŒ…è¿‡å¤§ï¼Œå»ºè®®å‹ç¼©éŸ³é¢‘');
    return null;
  }
}
```

**é‡è¦æé†’**ï¼š
- âš ï¸ ç¦æ­¢ä½¿ç”¨ TabBar ä¸»é¡µé¢é¢„åŠ è½½éŸ³é¢‘
- âš ï¸ æ¯æ¬¡æ·»åŠ åå¿…é¡»éªŒè¯æ€»å¤§å° < 2MB
- âš ï¸ å»ºè®®ç•™æœ‰ 0.1MB ä½™é‡ï¼Œé˜²æ­¢åç»­è°ƒæ•´å›°éš¾

### 6. éŸ³é¢‘å‹ç¼©æœ€ä½³å®è·µ

#### å‹ç¼©å‚æ•°ï¼ˆå·²éªŒè¯æœ‰æ•ˆï¼‰

```bash
# ä½¿ç”¨ FFmpeg å‹ç¼©éŸ³é¢‘
ffmpeg -i input.mp3 -b:a 32k -ar 22050 output.mp3

å‚æ•°è¯´æ˜ï¼š
-b:a 32k      # æ¯”ç‰¹ç‡ 32kbpsï¼ˆäººå£°æ¸…æ™°çš„æœ€ä½æ ‡å‡†ï¼‰
-ar 22050     # é‡‡æ ·ç‡ 22.05kHzï¼ˆè¶³å¤Ÿäººå£°é€šä¿¡ï¼‰
```

#### å‹ç¼©å‰åå¯¹æ¯”ï¼ˆå®é™…æµ‹è¯•æ•°æ®ï¼‰

```
åŸå§‹éŸ³é¢‘ï¼š
- æ¯”ç‰¹ç‡ï¼š128kbps
- é‡‡æ ·ç‡ï¼š44.1kHz
- æ–‡ä»¶å¤§å°ï¼š150-300KB/æ¡
- æ€»å¤§å°ï¼ˆ40æ¡ï¼‰ï¼š8-10 MB

å‹ç¼©åéŸ³é¢‘ï¼š
- æ¯”ç‰¹ç‡ï¼š32-48kbps
- é‡‡æ ·ç‡ï¼š22.05kHz
- æ–‡ä»¶å¤§å°ï¼š15-50KB/æ¡
- æ€»å¤§å°ï¼ˆ40æ¡ï¼‰ï¼š0.8-1.2 MB
- å‹ç¼©æ¯”ï¼šçº¦ 8:1
- è¯­éŸ³è´¨é‡ï¼šâœ… å®Œå…¨æ¸…æ™°
```

#### éŸ³è´¨éªŒè¯æ ‡å‡†

```
âœ… é€šè¿‡æ ‡å‡†ï¼š
- ç®¡åˆ¶å‘˜è¯­éŸ³æ¸…æ™°
- èˆªç­å·å¯å‡†ç¡®è¯†åˆ«
- é«˜åº¦ã€èˆªå‘ç­‰æ•°å­—æ¸…æ™°
- æ— æ˜æ˜¾å™ªéŸ³æˆ–å¤±çœŸ

âŒ ä¸åˆæ ¼ï¼š
- èˆªç­å·æ¨¡ç³Š
- æ•°å­—æ— æ³•è¾¨è¯†
- è¯­éŸ³æ–­ç»­
- ä¸¥é‡å¤±çœŸ
```

---

## ğŸ¯ è·¨å¹³å°å…¼å®¹æ€§å®æˆ˜

### 1. Android å¹³å°æµ‹è¯•ç»“æœ

```
æµ‹è¯•è®¾å¤‡ï¼š
- åä¸º Mate 40 Proï¼ˆAndroid 12ï¼‰
- å°ç±³ 12ï¼ˆAndroid 13ï¼‰
- OPPO Find X5ï¼ˆAndroid 13ï¼‰
- vivo X90ï¼ˆAndroid 13ï¼‰

æµ‹è¯•ç»“æœï¼š
âœ… æ‰€æœ‰éŸ³é¢‘æ­£å¸¸æ’­æ”¾
âœ… é¢„åŠ è½½åŠŸèƒ½æ­£å¸¸
âœ… ç¦»çº¿æ¨¡å¼å·¥ä½œæ­£å¸¸
âœ… æ— å´©æºƒæˆ–å¡é¡¿
âœ… åŠ è½½é€Ÿåº¦å¿«ï¼ˆ2-5ç§’ï¼‰

ç‰¹æ®Šæƒ…å†µï¼š
- ä½ç«¯è®¾å¤‡ï¼ˆAndroid 10ä»¥ä¸‹ï¼‰ï¼šç•¥æœ‰å»¶è¿Ÿï¼Œä½†åŠŸèƒ½æ­£å¸¸
- å†…å­˜ä¸è¶³æ—¶ï¼šå¾®ä¿¡å¯èƒ½è‡ªåŠ¨æ¸…ç†åˆ†åŒ…ï¼Œé‡æ–°è®¿é—®é¢„åŠ è½½é¡µé¢å³å¯
```

### 2. iOS å¹³å°æµ‹è¯•ç»“æœ

```
æµ‹è¯•è®¾å¤‡ï¼š
- iPhone 14 Proï¼ˆiOS 17ï¼‰
- iPhone 13ï¼ˆiOS 16ï¼‰
- iPhone 12ï¼ˆiOS 15ï¼‰
- iPhone 11ï¼ˆiOS 14ï¼‰

æµ‹è¯•ç»“æœï¼š
âœ… æ‰€æœ‰éŸ³é¢‘æ­£å¸¸æ’­æ”¾
âœ… é¢„åŠ è½½åŠŸèƒ½æ­£å¸¸
âœ… ç¦»çº¿æ¨¡å¼å·¥ä½œæ­£å¸¸
âœ… æ— å´©æºƒæˆ–å¡é¡¿
âœ… åŠ è½½é€Ÿåº¦å¿«ï¼ˆ2-4ç§’ï¼Œç•¥å¿«äºAndroidï¼‰

iOS ç‰¹æ®Šä¼˜åŒ–ï¼š
- ä½¿ç”¨ wx.createInnerAudioContext()
- é…ç½® ios-audio-compatibility.js å…¼å®¹å±‚
- æ”¯æŒåå°æ’­æ”¾ï¼ˆéœ€ç”¨æˆ·ä¸»åŠ¨å¼€å¯ï¼‰
```

### 3. å…¼å®¹æ€§æœ€ä½³å®è·µ

```javascript
// éŸ³é¢‘ä¸Šä¸‹æ–‡åˆ›å»ºï¼ˆè·¨å¹³å°å…¼å®¹ï¼‰
function createAudioContext() {
  const audioContext = wx.createInnerAudioContext();
  
  // é€šç”¨é…ç½®
  audioContext.autoplay = false;
  audioContext.loop = false;
  audioContext.volume = 1.0;
  
  // iOS ç‰¹æ®Šå¤„ç†
  if (wx.getSystemInfoSync().platform === 'ios') {
    audioContext.obeyMuteSwitch = false;  // å¿½ç•¥é™éŸ³å¼€å…³
  }
  
  return audioContext;
}
```

---

## ğŸš¨ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆï¼ˆå®æˆ˜æ€»ç»“ï¼‰

### é—®é¢˜1: éŸ³é¢‘æ— æ³•æ’­æ”¾ï¼ˆæœ€å¸¸è§ï¼‰

**ç—‡çŠ¶**ï¼š
```
âœ… é¡µé¢æ˜¾ç¤ºæ­£å¸¸
âœ… å½•éŸ³åˆ—è¡¨æ˜¾ç¤ºæ­£å¸¸
âŒ ç‚¹å‡»æ’­æ”¾æ— ååº”
âŒ æ§åˆ¶å°ï¼šæœªæ‰¾åˆ°åœ°åŒºIDçš„è·¯å¾„æ˜ å°„
```

**åŸå› **ï¼šç¼ºå°‘ audio-player/index.ts çš„è·¯å¾„æ˜ å°„

**è§£å†³**ï¼š
```typescript
// pages/audio-player/index.ts
const regionPathMap: { [key: string]: string } = {
  'your-region': '/packageYourRegion/'  // æ·»åŠ è¿™ä¸€è¡Œ
};
```

**éªŒè¯æ–¹æ³•**ï¼š
```powershell
# å¿«é€Ÿæ£€æŸ¥
Select-String -Path "pages\audio-player\index.ts" -Pattern "'your-region':"
# æœ‰è¾“å‡º = å·²é…ç½®ï¼Œæ— è¾“å‡º = æœªé…ç½®
```

### é—®é¢˜2: é¡µé¢çœ‹ä¸åˆ°å›½å®¶å¡ç‰‡

**ç—‡çŠ¶**ï¼š
```
âœ… å…¶ä»–å›½å®¶æ˜¾ç¤ºæ­£å¸¸
âŒ æ–°å¢çš„å›½å®¶ä¸æ˜¾ç¤º
âŒ æ§åˆ¶å°æ— é”™è¯¯
```

**åŸå› **ï¼šç¼ºå°‘ audio-config.js é…ç½®

**è§£å†³**ï¼š
```javascript
// utils/audio-config.js
// 1. é¡¶éƒ¨å¯¼å…¥æ•°æ®
let yourCountryData = require('../data/regions/your-country.js');

// 2. regions æ•°ç»„æ·»åŠ é…ç½®
this.regions = [
  {
    id: 'your-region',
    continentId: 'asia',
    name: 'å›½å®¶å',
    count: XX,
    hasRealRecordings: true
  }
];

// 3. airports æ•°ç»„æ·»åŠ é…ç½®
this.airports = [
  {
    id: 'your-region',
    regionId: 'your-region',
    clips: yourCountryData.clips || []
  }
];
```

### é—®é¢˜3: é¢„åŠ è½½è¶…é™ï¼ˆError 80058ï¼‰

**ç—‡çŠ¶**ï¼š
```
âŒ çœŸæœºè°ƒè¯•æŠ¥é”™ï¼špreloadRule [pages/xxx/index] source size exceed max limit 2MB
```

**åŸå› **ï¼šé¢„åŠ è½½é¡µé¢æ€»å¤§å° > 2MB

**è§£å†³æ–¹æ¡ˆ**ï¼š

```javascript
// æ–¹æ¡ˆ1ï¼šå‹ç¼©éŸ³é¢‘ï¼ˆæ¨èï¼‰
// ä½¿ç”¨ FFmpeg å°†æ¯”ç‰¹ç‡é™åˆ° 32kbps
ffmpeg -i input.mp3 -b:a 32k output.mp3

// æ–¹æ¡ˆ2ï¼šæ›´æ¢é¢„åŠ è½½é¡µé¢
// é€‰æ‹©å‰©ä½™ç©ºé—´æ›´å¤§çš„é¡µé¢

// æ–¹æ¡ˆ3ï¼šæ‹†åˆ†åˆ†åŒ…
// å¦‚æœå•ä¸ªåˆ†åŒ…è¿‡å¤§ï¼ˆ>1.5MBï¼‰ï¼Œè€ƒè™‘æ‹†åˆ†ä¸ºä¸¤ä¸ª
```

**éªŒè¯è„šæœ¬**ï¼š
```powershell
# è®¡ç®—é¢„åŠ è½½é¡µé¢æ€»å¤§å°
$packages = @('package1', 'package2', 'package3')
$total = 0
foreach ($pkg in $packages) {
  $size = (Get-ChildItem "$pkg\*.mp3" -File | 
           Measure-Object -Property Length -Sum).Sum / 1MB
  Write-Output "$pkg : $([math]::Round($size, 2)) MB"
  $total += $size
}
Write-Output "æ€»è®¡: $([math]::Round($total, 2)) MB"
if ($total -gt 2.0) {
  Write-Output "âŒ è¶…é™ï¼"
} else {
  Write-Output "âœ… åˆæ ¼"
}
```

### é—®é¢˜4: æ•°é‡ä¸ä¸€è‡´

**ç—‡çŠ¶**ï¼š
```
âœ… éŸ³é¢‘æ–‡ä»¶ï¼š50ä¸ª
âŒ æ•°æ®è®°å½•ï¼š48ä¸ª
âŒ é¡µé¢æ˜¾ç¤ºï¼š48ä¸ªå½•éŸ³
```

**åŸå› **ï¼šæ•°æ®æ–‡ä»¶ç¼ºå°‘éƒ¨åˆ†å½•éŸ³è®°å½•

**è§£å†³**ï¼š
```powershell
# 1. ç»Ÿè®¡éŸ³é¢‘æ–‡ä»¶
$audioFiles = Get-ChildItem "package{Country}\*.mp3" -File | 
              Select-Object -ExpandProperty Name

# 2. ç»Ÿè®¡æ•°æ®è®°å½•
$dataFiles = Select-String -Path "data\regions\{country}.js" `
             -Pattern '"mp3_file": "(.*?)"' | 
             ForEach-Object { $_.Matches.Groups[1].Value }

# 3. æ‰¾å‡ºç¼ºå¤±çš„æ–‡ä»¶
$missing = $audioFiles | Where-Object { $dataFiles -notcontains $_ }
if ($missing) {
  Write-Output "âŒ æ•°æ®æ–‡ä»¶ä¸­ç¼ºå°‘ä»¥ä¸‹å½•éŸ³:"
  $missing | ForEach-Object { Write-Output "  - $_" }
}
```

### é—®é¢˜5: ç¦»çº¿æ¨¡å¼æ— æ³•æ’­æ”¾

**ç—‡çŠ¶**ï¼š
```
âœ… åœ¨çº¿æ¨¡å¼ï¼šæ­£å¸¸æ’­æ”¾
âŒ é£è¡Œæ¨¡å¼ï¼šæ— æ³•æ’­æ”¾
```

**åŸå› **ï¼šåˆ†åŒ…æœªé¢„åŠ è½½æˆ–è¢«ç³»ç»Ÿæ¸…ç†

**è§£å†³**ï¼š
```javascript
// 1. ç¡®ä¿ç”¨æˆ·å·²è®¿é—®é¢„åŠ è½½é¡µé¢
// 2. æ£€æŸ¥ app.json çš„ preloadRule é…ç½®
// 3. éªŒè¯åˆ†åŒ…æ˜¯å¦ä¸‹è½½æˆåŠŸ

// éªŒè¯æ–¹æ³•ï¼š
// åœ¨çº¿æ¨¡å¼ä¸‹è®¿é—®é¢„åŠ è½½é¡µé¢ â†’ ç­‰å¾…3-5ç§’ â†’ 
// å¼€å¯é£è¡Œæ¨¡å¼ â†’ æµ‹è¯•æ’­æ”¾
```

### é—®é¢˜6: regionId ä¸ä¸€è‡´å¯¼è‡´çš„è¿é”é”™è¯¯

**ç—‡çŠ¶**ï¼š
```
âŒ ç‚¹å‡»å›½å®¶å¡ç‰‡æ— ååº”
âŒ æ§åˆ¶å°å¤šä¸ªé”™è¯¯ä¿¡æ¯
âŒ æ’­æ”¾å™¨æ— æ³•åˆå§‹åŒ–
```

**åŸå› **ï¼šå„é…ç½®æ–‡ä»¶ä¸­ regionId ä¸ä¸€è‡´

**è§£å†³**ï¼šç¡®ä¿ä»¥ä¸‹5ä¸ªæ–‡ä»¶ä½¿ç”¨å®Œå…¨ç›¸åŒçš„ regionId

```javascript
// 1. audio-config.js
regions: [{ id: 'uk', ... }]
airports: [{ regionId: 'uk', ... }]

// 2. audio-preload-guide.js
'uk': { packageName: 'packageUK', ... }

// 3. audio-package-loader.js
'uk': { packageRoot: 'packageUK', ... }

// 4. audio-player/index.ts
'uk': '/packageUK/'

// 5. pages/airline-recordings/index.ts
// é€šè¿‡ audio-config è‡ªåŠ¨è·å–ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
```

**å¿«é€ŸéªŒè¯è„šæœ¬**ï¼š
```powershell
$regionId = "uk"
$files = @(
  "utils\audio-config.js",
  "utils\audio-preload-guide.js",
  "utils\audio-package-loader.js",
  "pages\audio-player\index.ts"
)

foreach ($file in $files) {
  $found = Select-String -Path $file -Pattern "'$regionId'" -Quiet
  if ($found) {
    Write-Output "âœ… $file"
  } else {
    Write-Output "âŒ $file - ç¼ºå°‘é…ç½®ï¼"
  }
}
```

---

## ğŸ“‹ å®Œæ•´é…ç½®æ£€æŸ¥æ¸…å•ï¼ˆå®æˆ˜ç‰ˆï¼‰

### æ–°å¢æœºåœºé…ç½®å®Œæ•´æ¸…å•ï¼ˆ11é¡¹ï¼‰

```bash
æ–‡ä»¶åˆ›å»ºï¼ˆ3é¡¹ï¼‰ï¼š
âœ… 1. package{Country}/index.js - åˆ†åŒ…å…¥å£æ–‡ä»¶
âœ… 2. package{Country}/index.wxml - å ä½æ–‡ä»¶
âœ… 3. package{Country}/index.json - å ä½æ–‡ä»¶
âœ… 4. package{Country}/index.wxss - å ä½æ–‡ä»¶
âœ… 5. data/regions/{country}.js - éŸ³é¢‘æ•°æ®æ–‡ä»¶

app.json é…ç½®ï¼ˆ2é¡¹ï¼‰ï¼š
âœ… 6. subPackages - æ·»åŠ åˆ†åŒ…æ³¨å†Œ
âœ… 7. preloadRule - æ·»åŠ é¢„åŠ è½½è§„åˆ™

æ ¸å¿ƒæ¨¡å—é…ç½®ï¼ˆ5é¡¹ï¼Œæå…¶é‡è¦ï¼‰ï¼š
âœ… 8. utils/audio-preload-guide.js - é¢„åŠ è½½å¼•å¯¼é…ç½®
âœ… 9. utils/audio-config.js - æ•°æ®é…ç½®ï¼ˆ3ä¸ªä½ç½®ï¼‰
    âœ… 9.1 é¡¶éƒ¨æ•°æ®å¯¼å…¥
    âœ… 9.2 regions æ•°ç»„é…ç½®
    âœ… 9.3 airports æ•°ç»„é…ç½®
    âœ… 9.4 continents å¤§æ´²æ€»æ•°æ›´æ–°
âœ… 10. utils/audio-package-loader.js - åˆ†åŒ…åŠ è½½é…ç½®
âœ… 11. pages/audio-player/index.ts - è·¯å¾„æ˜ å°„é…ç½®

æ•°æ®éªŒè¯ï¼ˆ5é¡¹ï¼‰ï¼š
âœ… 12. éŸ³é¢‘æ–‡ä»¶æ•° = æ•°æ®è®°å½•æ•°
âœ… 13. æ— é‡å¤è®°å½•
âœ… 14. æ— ç¼ºå¤±æ–‡ä»¶
âœ… 15. è¯­æ³•æ£€æŸ¥é€šè¿‡ï¼ˆæ‰€æœ‰JSæ–‡ä»¶ï¼‰
âœ… 16. é¢„åŠ è½½é¡µé¢æ€»å¤§å° < 2MB

çœŸæœºæµ‹è¯•ï¼ˆ5é¡¹ï¼‰ï¼š
âœ… 17. Android è®¾å¤‡æµ‹è¯•é€šè¿‡
âœ… 18. iOS è®¾å¤‡æµ‹è¯•é€šè¿‡
âœ… 19. åœ¨çº¿æ¨¡å¼æ’­æ”¾æ­£å¸¸
âœ… 20. ç¦»çº¿æ¨¡å¼æ’­æ”¾æ­£å¸¸
âœ… 21. é¢„åŠ è½½å¼•å¯¼æ­£å¸¸å·¥ä½œ
```

### è‡ªåŠ¨åŒ–éªŒè¯è„šæœ¬ï¼ˆå®Œæ•´ç‰ˆï¼‰

```powershell
# å®Œæ•´éªŒè¯è„šæœ¬ - åœ¨ miniprogram ç›®å½•è¿è¡Œ
# ä½¿ç”¨æ–¹æ³•ï¼šæ›¿æ¢ {Country} å’Œ {country} ä¸ºå®é™…å€¼

param(
  [string]$CountryName = "UK",       # åˆ†åŒ…ç›®å½•åï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰
  [string]$countryFile = "uk",       # æ•°æ®æ–‡ä»¶åï¼ˆå…¨å°å†™ï¼‰
  [string]$regionId = "uk"           # regionIdï¼ˆå…¨å°å†™ï¼‰
)

Write-Output "=========================================="
Write-Output "èˆªçº¿å½•éŸ³åˆ†åŒ…é…ç½®éªŒè¯è„šæœ¬"
Write-Output "=========================================="
Write-Output ""

# 1. æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§
Write-Output "1ï¸âƒ£ æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§..."
$requiredFiles = @(
  "package$CountryName\index.js",
  "package$CountryName\index.wxml",
  "package$CountryName\index.json",
  "package$CountryName\index.wxss",
  "data\regions\$countryFile.js"
)

$allFilesExist = $true
foreach ($file in $requiredFiles) {
  if (Test-Path $file) {
    Write-Output "  âœ… $file"
  } else {
    Write-Output "  âŒ $file - æ–‡ä»¶ä¸å­˜åœ¨ï¼"
    $allFilesExist = $false
  }
}

if (-not $allFilesExist) {
  Write-Output ""
  Write-Output "âŒ ç¼ºå°‘å¿…è¦æ–‡ä»¶ï¼Œè¯·å…ˆåˆ›å»ºï¼"
  exit 1
}

# 2. æ£€æŸ¥éŸ³é¢‘æ•°é‡ä¸€è‡´æ€§
Write-Output ""
Write-Output "2ï¸âƒ£ æ£€æŸ¥éŸ³é¢‘æ•°é‡..."
$audioCount = (Get-ChildItem "package$CountryName\*.mp3" -File).Count
$dataCount = (Select-String -Path "data\regions\$countryFile.js" -Pattern '"mp3_file":').Matches.Count

Write-Output "  éŸ³é¢‘æ–‡ä»¶: $audioCount ä¸ª"
Write-Output "  æ•°æ®è®°å½•: $dataCount ä¸ª"

if ($audioCount -eq $dataCount) {
  Write-Output "  âœ… æ•°é‡ä¸€è‡´"
} else {
  Write-Output "  âŒ æ•°é‡ä¸ä¸€è‡´ï¼"
}

# 3. æ£€æŸ¥é‡å¤è®°å½•
Write-Output ""
Write-Output "3ï¸âƒ£ æ£€æŸ¥é‡å¤è®°å½•..."
$files = Select-String -Path "data\regions\$countryFile.js" -Pattern '"mp3_file": "(.*?)"' | 
         ForEach-Object { $_.Matches.Groups[1].Value }
$duplicates = $files | Group-Object | Where-Object { $_.Count -gt 1 }

if ($duplicates) {
  Write-Output "  âŒ å‘ç°é‡å¤è®°å½•:"
  $duplicates | ForEach-Object { Write-Output "    - $($_.Name)" }
} else {
  Write-Output "  âœ… æ— é‡å¤è®°å½•"
}

# 4. æ£€æŸ¥è¯­æ³•
Write-Output ""
Write-Output "4ï¸âƒ£ æ£€æŸ¥è¯­æ³•..."
try {
  node -c "package$CountryName\index.js" 2>&1 | Out-Null
  Write-Output "  âœ… package$CountryName\index.js"
} catch {
  Write-Output "  âŒ package$CountryName\index.js è¯­æ³•é”™è¯¯"
}

try {
  node -c "data\regions\$countryFile.js" 2>&1 | Out-Null
  Write-Output "  âœ… data\regions\$countryFile.js"
} catch {
  Write-Output "  âŒ data\regions\$countryFile.js è¯­æ³•é”™è¯¯"
}

# 5. æ£€æŸ¥æ ¸å¿ƒé…ç½®æ–‡ä»¶
Write-Output ""
Write-Output "5ï¸âƒ£ æ£€æŸ¥æ ¸å¿ƒé…ç½®ï¼ˆ8æ­¥é›†æˆï¼‰..."

$configFiles = @{
  "utils\audio-preload-guide.js" = "'$regionId':"
  "utils\audio-config.js" = "id: '$regionId'"
  "utils\audio-package-loader.js" = "'$regionId':"
  "pages\audio-player\index.ts" = "'$regionId':"
}

$allConfigsExist = $true
foreach ($file in $configFiles.Keys) {
  $pattern = $configFiles[$file]
  $found = Select-String -Path $file -Pattern $pattern -Quiet
  if ($found) {
    Write-Output "  âœ… $file"
  } else {
    Write-Output "  âŒ $file - ç¼ºå°‘ regionId '$regionId' çš„é…ç½®ï¼"
    $allConfigsExist = $false
  }
}

# 6. æ£€æŸ¥åˆ†åŒ…å¤§å°
Write-Output ""
Write-Output "6ï¸âƒ£ æ£€æŸ¥åˆ†åŒ…å¤§å°..."
$size = (Get-ChildItem "package$CountryName\*.mp3" -File | 
         Measure-Object -Property Length -Sum).Sum / 1MB
$sizeMB = [math]::Round($size, 2)
Write-Output "  åˆ†åŒ…å¤§å°: $sizeMB MB"

if ($sizeMB -lt 1.5) {
  Write-Output "  âœ… å¤§å°åˆç†"
} elseif ($sizeMB -lt 2.0) {
  Write-Output "  âš ï¸ ç•¥å¤§ï¼Œå»ºè®®å‹ç¼©"
} else {
  Write-Output "  âŒ è¿‡å¤§ï¼å¿…é¡»å‹ç¼©æˆ–æ‹†åˆ†"
}

# 7. æ€»ç»“
Write-Output ""
Write-Output "=========================================="
Write-Output "éªŒè¯æ€»ç»“"
Write-Output "=========================================="

if ($allFilesExist -and $audioCount -eq $dataCount -and -not $duplicates -and $allConfigsExist) {
  Write-Output "âœ… æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼å¯ä»¥è¿›è¡ŒçœŸæœºæµ‹è¯•"
} else {
  Write-Output "âŒ å­˜åœ¨é—®é¢˜ï¼Œè¯·æŒ‰ç…§ä¸Šè¿°æç¤ºä¿®å¤"
}

Write-Output ""
Write-Output "ä¸‹ä¸€æ­¥ï¼š"
Write-Output "1. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ç¼–è¯‘"
Write-Output "2. çœŸæœºé¢„è§ˆæµ‹è¯•ï¼ˆAndroid + iOSï¼‰"
Write-Output "3. æµ‹è¯•ç¦»çº¿æ¨¡å¼"
Write-Output ""
```

---

## ğŸ“ æœ€ä½³å®è·µæ€»ç»“

### 1. å¼€å‘æµç¨‹æœ€ä½³å®è·µ

```
æ¨èçš„å¼€å‘æµç¨‹ï¼š
1. æ”¶é›†éŸ³é¢‘ â†’ å‹ç¼©ä¼˜åŒ– â†’ å‘½åè§„èŒƒåŒ–
2. åˆ›å»ºæ•°æ®æ–‡ä»¶ â†’ éªŒè¯æ•°é‡ä¸€è‡´æ€§
3. é€‰æ‹©é¢„åŠ è½½é¡µé¢ â†’ éªŒè¯æ€»å¤§å°
4. å®Œæˆ8æ­¥é…ç½® â†’ è‡ªåŠ¨åŒ–éªŒè¯è„šæœ¬
5. å¾®ä¿¡å¼€å‘è€…å·¥å…·ç¼–è¯‘ â†’ é¢„è§ˆæµ‹è¯•
6. çœŸæœºæµ‹è¯•ï¼ˆAndroid + iOSï¼‰
7. ç¦»çº¿æ¨¡å¼æµ‹è¯• â†’ ç¡®è®¤å®Œå…¨å¯ç”¨
8. åˆ›å»ºæ›´æ–°æ–‡æ¡£ â†’ æäº¤ä»£ç 
```

### 2. å‘½åè§„èŒƒæœ€ä½³å®è·µ

```javascript
// âœ… æ¨èçš„å‘½åè§„èŒƒ
const NAMING_CONVENTION = {
  // åˆ†åŒ…ç›®å½•
  packageDirectory: 'packageJapan',  // package + é¦–å­—æ¯å¤§å†™
  
  // regionIdï¼ˆæ ¸å¿ƒæ ‡è¯†ï¼Œå¿…é¡»ç»Ÿä¸€ï¼‰
  regionId: 'japan',                 // å…¨å°å†™è‹±æ–‡
  
  // æ•°æ®æ–‡ä»¶
  dataFile: 'japan.js',              // å…¨å°å†™ + .js
  
  // éŸ³é¢‘æ–‡ä»¶
  audioFile: 'China-Eastern-7551_Descend-FL250.mp3',
  // æ ¼å¼ï¼šèˆªç©ºå…¬å¸-èˆªç­å·_å†…å®¹æè¿°.mp3
  
  // packageName
  packageName: 'japanAudioPackage',  // å°å†™ + AudioPackage
  
  // å›½æ—— emoji
  flag: 'ğŸ‡¯ğŸ‡µ',
  
  // æœºåœºå›¾æ ‡ emoji
  icon: 'ğŸ”ï¸'  // æ ¹æ®åŸå¸‚ç‰¹è‰²é€‰æ‹©
};
```

### 3. éŸ³é¢‘è´¨é‡æœ€ä½³å®è·µ

```javascript
const AUDIO_QUALITY_STANDARDS = {
  // å‹ç¼©å‚æ•°
  bitrate: '32-48kbps',      // äººå£°é€šä¿¡æœ€ä½³
  sampleRate: '22050Hz',     // è¶³å¤Ÿæ¸…æ™°
  
  // æ–‡ä»¶å¤§å°
  targetSize: '< 50KB',      // å•ä¸ªæ–‡ä»¶ç›®æ ‡
  maxSize: '< 100KB',        // å•ä¸ªæ–‡ä»¶ä¸Šé™
  
  // åˆ†åŒ…å¤§å°
  packageTarget: '< 1.2MB',  // åˆ†åŒ…ç›®æ ‡å¤§å°
  packageMax: '< 1.5MB',     // åˆ†åŒ…ä¸Šé™
  
  // è´¨é‡éªŒè¯
  testCriteria: [
    'èˆªç­å·æ¸…æ™°å¯è¾¨',
    'é«˜åº¦æ•°å­—æ¸…æ™°',
    'èˆªå‘æ•°å­—æ¸…æ™°',
    'æ— æ˜æ˜¾å¤±çœŸ',
    'æ— ä¸¥é‡å™ªéŸ³'
  ]
};
```

### 4. é…ç½®ä¸€è‡´æ€§æœ€ä½³å®è·µ

**å…³é”®åŸåˆ™**ï¼šæ‰€æœ‰ regionId å¿…é¡»å®Œå…¨ä¸€è‡´

```javascript
// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šæ‰€æœ‰æ–‡ä»¶ä½¿ç”¨ç›¸åŒçš„ regionId
// audio-config.js
{ id: 'uk', ... }

// audio-preload-guide.js
'uk': { ... }

// audio-package-loader.js
'uk': { ... }

// audio-player/index.ts
'uk': '/packageUK/'

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šregionId ä¸ä¸€è‡´
// audio-config.js
{ id: 'uk', ... }

// audio-preload-guide.js
'UK': { ... }  // âŒ å¤§å†™

// audio-package-loader.js
'united-kingdom': { ... }  // âŒ åç§°ä¸åŒ

// audio-player/index.ts
'uk': '/packageUK/'  // âœ… è¿™ä¸ªæ˜¯å¯¹çš„
```

**éªŒè¯æ–¹æ³•**ï¼šä½¿ç”¨å¿«é€Ÿè‡ªæ£€è„šæœ¬

### 5. æµ‹è¯•æµç¨‹æœ€ä½³å®è·µ

```
å®Œæ•´æµ‹è¯•æµç¨‹ï¼š
1. æœ¬åœ°éªŒè¯
   âœ… è¿è¡Œè‡ªåŠ¨åŒ–éªŒè¯è„šæœ¬
   âœ… å¾®ä¿¡å¼€å‘è€…å·¥å…·æ— ç¼–è¯‘é”™è¯¯
   âœ… é¢„è§ˆæ¨¡å¼åŠŸèƒ½æ­£å¸¸

2. Android çœŸæœºæµ‹è¯•
   âœ… æ‰«ç å®‰è£…åˆ°çœŸæœº
   âœ… è®¿é—®é¢„åŠ è½½é¡µé¢ï¼ˆç­‰å¾…3-5ç§’ï¼‰
   âœ… æµ‹è¯•æ‰€æœ‰éŸ³é¢‘æ’­æ”¾
   âœ… å¼€å¯é£è¡Œæ¨¡å¼æµ‹è¯•ç¦»çº¿åŠŸèƒ½
   
3. iOS çœŸæœºæµ‹è¯•
   âœ… æ‰«ç å®‰è£…åˆ°çœŸæœº
   âœ… è®¿é—®é¢„åŠ è½½é¡µé¢ï¼ˆç­‰å¾…3-5ç§’ï¼‰
   âœ… æµ‹è¯•æ‰€æœ‰éŸ³é¢‘æ’­æ”¾
   âœ… å¼€å¯é£è¡Œæ¨¡å¼æµ‹è¯•ç¦»çº¿åŠŸèƒ½
   âœ… æµ‹è¯•åå°æ’­æ”¾ï¼ˆå¯é€‰ï¼‰

4. è¾¹ç•Œæƒ…å†µæµ‹è¯•
   âœ… ç½‘ç»œæ…¢é€Ÿä¸‹çš„é¢„åŠ è½½
   âœ… ä½å†…å­˜è®¾å¤‡çš„è¡¨ç°
   âœ… å¿«é€Ÿåˆ‡æ¢é¡µé¢æ—¶çš„ç¨³å®šæ€§
   âœ… é•¿æ—¶é—´ä½¿ç”¨åçš„å†…å­˜å ç”¨
```

---

## ğŸ“ ç»éªŒæ•™è®­ä¸é¿å‘æŒ‡å—

### 1. æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯ï¼ˆTOP 5ï¼‰

```javascript
// ğŸ”¥ é”™è¯¯1: å¿˜è®°æ›´æ–° audio-player/index.ts
// å‘ç”Ÿé¢‘ç‡ï¼šâ­â­â­â­â­
// åæœï¼šéŸ³é¢‘å®Œå…¨æ— æ³•æ’­æ”¾
// é¢„é˜²ï¼šä½¿ç”¨å¿«é€Ÿè‡ªæ£€è„šæœ¬éªŒè¯

// ğŸ”¥ é”™è¯¯2: regionId åœ¨å„æ–‡ä»¶ä¸­ä¸ä¸€è‡´
// å‘ç”Ÿé¢‘ç‡ï¼šâ­â­â­â­
// åæœï¼šå„ç§å¥‡æ€ªçš„é”™è¯¯
// é¢„é˜²ï¼šç¡®å®š regionId åï¼Œåœ¨æ‰€æœ‰æ–‡ä»¶ä¸­ç»Ÿä¸€ä½¿ç”¨

// ğŸ”¥ é”™è¯¯3: é¢„åŠ è½½é¡µé¢è¶…é™
// å‘ç”Ÿé¢‘ç‡ï¼šâ­â­â­
// åæœï¼šçœŸæœºæŠ¥é”™ Error 80058
// é¢„é˜²ï¼šä½¿ç”¨éªŒè¯è„šæœ¬æå‰è®¡ç®—æ€»å¤§å°

// ğŸ”¥ é”™è¯¯4: æ•°æ®æ–‡ä»¶è®°å½•ç¼ºå¤±
// å‘ç”Ÿé¢‘ç‡ï¼šâ­â­â­
// åæœï¼šéƒ¨åˆ†éŸ³é¢‘æ— æ³•æ’­æ”¾
// é¢„é˜²ï¼šä½¿ç”¨è„šæœ¬å¯¹æ¯”éŸ³é¢‘æ–‡ä»¶å’Œæ•°æ®è®°å½•

// ğŸ”¥ é”™è¯¯5: å¿˜è®°æ›´æ–° audio-config.js
// å‘ç”Ÿé¢‘ç‡ï¼šâ­â­â­
// åæœï¼šé¡µé¢çœ‹ä¸åˆ°å›½å®¶å¡ç‰‡
// é¢„é˜²ï¼šè®°ä½ audio-config.js æœ‰3ä¸ªé…ç½®ç‚¹
```

### 2. è°ƒè¯•æŠ€å·§

```javascript
// æŠ€å·§1: ä½¿ç”¨æ§åˆ¶å°æœç´¢åŠŸèƒ½å¿«é€Ÿå®šä½é”™è¯¯
// åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ§åˆ¶å°è¾“å…¥ï¼š
// æœç´¢ "âŒ" æˆ– "æœªæ‰¾åˆ°" å¿«é€Ÿå®šä½é—®é¢˜

// æŠ€å·§2: ä½¿ç”¨ PowerShell å¿«é€ŸéªŒè¯é…ç½®
$regionId = "your-region"
Get-Content utils\audio-config.js | Select-String $regionId
Get-Content utils\audio-package-loader.js | Select-String $regionId
Get-Content pages\audio-player\index.ts | Select-String $regionId

// æŠ€å·§3: åˆ†æ­¥æµ‹è¯•ï¼Œé€æ­¥æ’æŸ¥
// æ­¥éª¤1: å…ˆæµ‹è¯•é¡µé¢æ˜¾ç¤ºï¼ˆaudio-config.jsï¼‰
// æ­¥éª¤2: å†æµ‹è¯•åˆ†åŒ…åŠ è½½ï¼ˆaudio-package-loader.jsï¼‰
// æ­¥éª¤3: æœ€åæµ‹è¯•æ’­æ”¾ï¼ˆaudio-player/index.tsï¼‰

// æŠ€å·§4: å¯¹æ¯”å·²æœ‰é…ç½®
// æ‰¾ä¸€ä¸ªå·²ç»æˆåŠŸçš„æœºåœºï¼ˆå¦‚ Japanï¼‰ï¼Œå¯¹æ¯”é…ç½®
// ç¡®ä¿æ–°æœºåœºçš„é…ç½®æ ¼å¼ä¸æˆåŠŸæ¡ˆä¾‹å®Œå…¨ä¸€è‡´
```

### 3. æ€§èƒ½ä¼˜åŒ–ç»éªŒ

```javascript
// ä¼˜åŒ–1: éŸ³é¢‘å‹ç¼©å‚æ•°è°ƒä¼˜
// ç»è¿‡æµ‹è¯•ï¼Œ32kbps æ˜¯äººå£°é€šä¿¡çš„æœ€ä½³å¹³è¡¡ç‚¹
// - æ›´ä½ï¼ˆ16kbpsï¼‰ï¼šè¯­éŸ³è´¨é‡ä¸‹é™æ˜æ˜¾
// - æ›´é«˜ï¼ˆ64kbpsï¼‰ï¼šæ–‡ä»¶å¤§å°ç¿»å€ï¼Œè´¨é‡æå‡ä¸æ˜æ˜¾

// ä¼˜åŒ–2: é¢„åŠ è½½é¡µé¢åˆ†å¸ƒä¼˜åŒ–
// å°†åˆ†åŒ…å‡åŒ€åˆ†å¸ƒåˆ°ä¸åŒé¡µé¢
// é¿å…æŸä¸ªé¡µé¢æ¥è¿‘ 2MB é™åˆ¶ï¼Œå…¶ä»–é¡µé¢ç©ºé—²

// ä¼˜åŒ–3: éŸ³é¢‘æ–‡ä»¶å‘½åä¼˜åŒ–
// ä½¿ç”¨æ¸…æ™°çš„å‘½åï¼Œä¾¿äºç®¡ç†å’Œæ’æŸ¥é—®é¢˜
// æ ¼å¼ï¼šèˆªç©ºå…¬å¸-èˆªç­å·_å†…å®¹æè¿°.mp3

// ä¼˜åŒ–4: æ•°æ®æ–‡ä»¶æ’åºä¼˜åŒ–
// æŒ‰èˆªç­æˆ–é£è¡Œé˜¶æ®µæ’åºï¼Œä¾¿äºæŸ¥æ‰¾å’Œç»´æŠ¤
```

---

## ğŸŒŸ æˆåŠŸæ¡ˆä¾‹å±•ç¤º

### æ¡ˆä¾‹1: åŸƒåŠå¼€ç½—æœºåœºï¼ˆéæ´²é¦–ä¸ªï¼‰

```
é¡¹ç›®èƒŒæ™¯ï¼š
- éæ´²å¤§é™†é¦–ä¸ªçœŸå®å½•éŸ³æœºåœº
- åŒ…å«é˜¿æ‹‰ä¼¯è¯­é—®å€™è¯­ï¼Œæ–‡åŒ–ç‰¹è‰²æ˜æ˜¾
- 34æ¡å½•éŸ³ï¼Œæ¶µç›–å®Œæ•´é£è¡Œé˜¶æ®µ

æŠ€æœ¯å®ç°ï¼š
- éŸ³é¢‘å‹ç¼©ï¼š8:1å‹ç¼©æ¯”
- åˆ†åŒ…å¤§å°ï¼š0.55 MB
- é¢„åŠ è½½é¡µé¢ï¼špages/operations/index
- é…ç½®æ–‡ä»¶ï¼šå®Œæˆå…¨éƒ¨8æ­¥

æµ‹è¯•ç»“æœï¼š
âœ… Android å’Œ iOS å…¨å¹³å°é€šè¿‡
âœ… ç¦»çº¿æ¨¡å¼å®Œç¾è¿è¡Œ
âœ… ç”¨æˆ·åé¦ˆï¼šé˜¿æ‹‰ä¼¯è¯­é—®å€™è¯­å¾ˆæœ‰ç‰¹è‰²

å…³é”®ç»éªŒï¼š
- ç‰¹æ®Šå­—ç¬¦ï¼ˆé˜¿æ‹‰ä¼¯è¯­ï¼‰åœ¨ç¿»è¯‘ä¸­æ­£å¸¸æ˜¾ç¤º
- ä¸­ä¸œåœ°åŒºèˆªç©ºæ–‡åŒ–å¾—åˆ°è‰¯å¥½å±•ç°
- æˆåŠŸå¼€æ‹“éæ´²å¸‚åœº
```

### æ¡ˆä¾‹2: åŠ æ‹¿å¤§æ¸©å“¥åæœºåœº

```
é¡¹ç›®èƒŒæ™¯ï¼š
- ç¾æ´²åœ°åŒºç¬¬äºŒä¸ªå›½å®¶
- 58æ¡å½•éŸ³ï¼Œè¦†ç›–11å®¶èˆªç©ºå…¬å¸
- åŒ…å«å¤æ‚æ»‘è¡Œé“ç©¿è¶ŠæŒ‡ä»¤

æŠ€æœ¯å®ç°ï¼š
- éŸ³é¢‘å‹ç¼©ï¼š1.01 MB
- é¢„åŠ è½½é¡µé¢ï¼špages/home/index
- ä¸æ–°åŠ å¡ã€æ‰§å‹¤æœŸè®¡ç®—å™¨å…±äº«é¡µé¢
- æ€»å¤§å°ï¼š1.81 MBï¼ˆå®‰å…¨èŒƒå›´å†…ï¼‰

æµ‹è¯•ç»“æœï¼š
âœ… æ‰€æœ‰è®¾å¤‡æµ‹è¯•é€šè¿‡
âœ… å¤šè¯­è¨€é€šä¿¡ï¼ˆè‹±è¯­ã€ä¸­æ–‡ï¼‰æ­£å¸¸
âœ… å¤æ‚æŒ‡ä»¤æè¿°æ¸…æ™°

å…³é”®ç»éªŒï¼š
- åˆç†åˆ†é…é¢„åŠ è½½é¡µé¢å¾ˆé‡è¦
- é¢„ç•™å®‰å…¨ä½™é‡ï¼ˆ0.19 MBï¼‰
- å¤šåˆ†åŒ…å…±äº«é¡µé¢çš„æˆåŠŸæ¡ˆä¾‹
```

### æ¡ˆä¾‹3: è‹±å›½å’Œä¸­å›½å°åŒ—ï¼ˆä¿®å¤æ¡ˆä¾‹ï¼‰

```
é—®é¢˜èƒŒæ™¯ï¼š
- åˆæ¬¡é›†æˆæ—¶åªå®Œæˆ5æ­¥é…ç½®
- é¡µé¢æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†æ— æ³•æ’­æ”¾
- æ§åˆ¶å°æŠ¥é”™ï¼šæœªæ‰¾åˆ°è·¯å¾„æ˜ å°„

é—®é¢˜è¯Šæ–­ï¼š
- ç¼ºå°‘ audio-config.js é…ç½® â†’ é¡µé¢æ˜¾ç¤º
- ç¼ºå°‘ audio-package-loader.js é…ç½® â†’ åˆ†åŒ…åŠ è½½
- ç¼ºå°‘ audio-player/index.ts é…ç½® â†’ éŸ³é¢‘æ’­æ”¾

è§£å†³è¿‡ç¨‹ï¼š
1. è¡¥å……ç¼ºå¤±çš„3ä¸ªé…ç½®æ–‡ä»¶
2. è¿è¡Œå¿«é€Ÿè‡ªæ£€è„šæœ¬éªŒè¯
3. çœŸæœºæµ‹è¯•ç¡®è®¤ä¿®å¤

æ•™è®­æ€»ç»“ï¼š
âš ï¸ æ–°å¢æœºåœºå¿…é¡»å®Œæˆå…¨éƒ¨8æ­¥ï¼Œç¼ºä¸€ä¸å¯
âš ï¸ ä½¿ç”¨è‡ªæ£€è„šæœ¬å¯å¿«é€Ÿå‘ç°é—æ¼é…ç½®
âš ï¸ åˆ›å»ºå®Œæ•´æ–‡æ¡£é¿å…åç»­é”™è¯¯

æœ€ç»ˆç»“æœï¼š
âœ… ä¿®å¤åæ‰€æœ‰åŠŸèƒ½æ­£å¸¸
âœ… æ›´æ–°å¿«é€Ÿå¼€å§‹æŒ‡å—ä¸º8æ­¥æµç¨‹
âœ… åˆ›å»ºæ•…éšœæ’æŸ¥æ–‡æ¡£
âœ… é˜²æ­¢ç±»ä¼¼é”™è¯¯å†æ¬¡å‘ç”Ÿ
```

---

## ğŸ“š æŠ€æœ¯æ¶æ„æ€»ç»“

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FlightToolbox                        â”‚
â”‚                   (å¾®ä¿¡å°ç¨‹åºä¸»åŒ…)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚          åˆ†åŒ…é¢„åŠ è½½ç³»ç»Ÿ                 â”‚
        â”‚      (Subpackage Preload System)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚é…ç½®ä¸­å¿ƒ  â”‚      â”‚ é¢„åŠ è½½å¼•å¯¼  â”‚    â”‚ æ’­æ”¾å™¨æ ¸å¿ƒ â”‚
    â”‚Config   â”‚      â”‚ Preload    â”‚    â”‚ Player     â”‚
    â”‚Manager  â”‚      â”‚ Guide      â”‚    â”‚ Core       â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚                  â”‚
         â”‚                  â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚              éŸ³é¢‘åˆ†åŒ…å±‚                       â”‚
    â”‚          (Audio Subpackages)                 â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ packageJapan â”‚ packageKorea â”‚ packageUK â”‚... â”‚
    â”‚ 67æ¡å½•éŸ³     â”‚ 85æ¡å½•éŸ³     â”‚ 36æ¡å½•éŸ³  â”‚... â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå‘

```
ç”¨æˆ·ç‚¹å‡»"æ’­æ”¾" â†’ æ£€æŸ¥åˆ†åŒ…æ˜¯å¦åŠ è½½ â†’ æœªåŠ è½½ï¼šæ˜¾ç¤ºå¼•å¯¼å¼¹çª—
                                    â†“
                            ç”¨æˆ·ç‚¹å‡»"å‰å¾€" â†’ è·³è½¬é¢„åŠ è½½é¡µé¢
                                    â†“
                            è§¦å‘ preloadRule â†’ å¾®ä¿¡è‡ªåŠ¨ä¸‹è½½åˆ†åŒ…
                                    â†“
                            ä¸‹è½½å®Œæˆ â†’ è¿”å›æ’­æ”¾é¡µé¢
                                    â†“
                            å·²åŠ è½½ï¼šè§£æéŸ³é¢‘è·¯å¾„ â†’ åˆ›å»ºéŸ³é¢‘ä¸Šä¸‹æ–‡
                                    â†“
                            åŠ è½½éŸ³é¢‘æ–‡ä»¶ â†’ å¼€å§‹æ’­æ”¾
```

### å…³é”®æŠ€æœ¯ç‚¹

```javascript
// 1. å¾®ä¿¡å°ç¨‹åºåˆ†åŒ…æœºåˆ¶
wx.loadSubpackage({
  name: 'packageName',
  success: function(res) { /* åˆ†åŒ…åŠ è½½æˆåŠŸ */ },
  fail: function(err) { /* åˆ†åŒ…åŠ è½½å¤±è´¥ */ }
});

// 2. é¢„åŠ è½½è§„åˆ™ï¼ˆè‡ªåŠ¨è§¦å‘ï¼‰
// app.json
{
  "preloadRule": {
    "pages/xxx/index": {
      "network": "all",  // ä»»ä½•ç½‘ç»œçŠ¶æ€ä¸‹éƒ½é¢„åŠ è½½
      "packages": ["package1", "package2"]
    }
  }
}

// 3. éŸ³é¢‘æ’­æ”¾ï¼ˆè·¨å¹³å°å…¼å®¹ï¼‰
const audioContext = wx.createInnerAudioContext();
audioContext.src = '/packageName/audio.mp3';
audioContext.play();

// 4. ç¦»çº¿å­˜å‚¨ï¼ˆé¢„åŠ è½½åè‡ªåŠ¨ç¼“å­˜ï¼‰
// å¾®ä¿¡å°ç¨‹åºä¼šè‡ªåŠ¨ç¼“å­˜å·²ä¸‹è½½çš„åˆ†åŒ…
// æ— éœ€æ‰‹åŠ¨å®ç°ç¦»çº¿å­˜å‚¨é€»è¾‘
```

---

## ğŸ¯ æœªæ¥ä¼˜åŒ–æ–¹å‘

### çŸ­æœŸä¼˜åŒ–ï¼ˆ0-3ä¸ªæœˆï¼‰

```
1. è‡ªåŠ¨åŒ–å·¥å…·å¼€å‘
   - å¼€å‘è‡ªåŠ¨åŒ–é…ç½®ç”Ÿæˆè„šæœ¬
   - è‡ªåŠ¨éªŒè¯è„šæœ¬é›†æˆåˆ° CI/CD
   - éŸ³é¢‘æ‰¹é‡å‹ç¼©å·¥å…·

2. æ–‡æ¡£å®Œå–„
   - è§†é¢‘æ•™ç¨‹å½•åˆ¶
   - å¸¸è§é—®é¢˜ FAQ å®Œå–„
   - å¤šè¯­è¨€ç‰ˆæœ¬æ–‡æ¡£

3. æ€§èƒ½ä¼˜åŒ–
   - éŸ³é¢‘åŠ è½½é€Ÿåº¦ä¼˜åŒ–
   - å†…å­˜å ç”¨ä¼˜åŒ–
   - å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–
```

### ä¸­æœŸä¼˜åŒ–ï¼ˆ3-6ä¸ªæœˆï¼‰

```
1. åŠŸèƒ½æ‰©å±•
   - æ”¯æŒéŸ³é¢‘æœç´¢
   - æ”¯æŒè‡ªå®šä¹‰æ’­æ”¾åˆ—è¡¨
   - æ”¯æŒéŸ³é¢‘æ ‡æ³¨åŠŸèƒ½

2. æ•°æ®æ‰©å±•
   - æ–°å¢æ›´å¤šå›½å®¶æœºåœº
   - å¢åŠ ç‰¹æƒ…æ¡ˆä¾‹å½•éŸ³
   - å®Œå–„å½•éŸ³åˆ†ç±»ç³»ç»Ÿ

3. ç”¨æˆ·ä½“éªŒ
   - ä¼˜åŒ–é¢„åŠ è½½å¼•å¯¼æµç¨‹
   - å¢åŠ éŸ³é¢‘å­¦ä¹ ç»Ÿè®¡
   - æ”¯æŒç¬”è®°åŠŸèƒ½
```

### é•¿æœŸè§„åˆ’ï¼ˆ6-12ä¸ªæœˆï¼‰

```
1. æŠ€æœ¯å‡çº§
   - ç ”ç©¶æ›´é«˜æ•ˆçš„å‹ç¼©ç®—æ³•
   - æ¢ç´¢æ™ºèƒ½é¢„åŠ è½½ç­–ç•¥
   - å®ç°æ¸è¿›å¼åŠ è½½

2. å¹³å°æ‰©å±•
   - æ”¯æŒæ›´å¤šå°ç¨‹åºå¹³å°
   - å¼€å‘Webç‰ˆæœ¬
   - å¼€å‘Appç‰ˆæœ¬

3. å†…å®¹ç”Ÿæ€
   - ç”¨æˆ·ä¸Šä¼ å½•éŸ³åŠŸèƒ½
   - ç¤¾åŒºå…±äº«æœºåˆ¶
   - ä¸“å®¶å®¡æ ¸ç³»ç»Ÿ
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒä¸åé¦ˆ

### é‡åˆ°é—®é¢˜ï¼Ÿ

```
1. æŸ¥é˜…æ–‡æ¡£
   - å¿«é€Ÿå¼€å§‹æŒ‡å—
   - æ•…éšœæ’æŸ¥æ–‡æ¡£
   - æœ¬å®æˆ˜ç»éªŒæ–‡æ¡£

2. ä½¿ç”¨å·¥å…·
   - è¿è¡Œè‡ªåŠ¨åŒ–éªŒè¯è„šæœ¬
   - ä½¿ç”¨å¿«é€Ÿè‡ªæ£€å‘½ä»¤
   - æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

3. å‚è€ƒæ¡ˆä¾‹
   - æŸ¥çœ‹æˆåŠŸæ¡ˆä¾‹
   - å¯¹æ¯”ç°æœ‰é…ç½®
   - å­¦ä¹ æœ€ä½³å®è·µ
```

### è´¡çŒ®åé¦ˆ

```
æ¬¢è¿è´¡çŒ®ï¼š
- åˆ†äº«æ–°çš„æˆåŠŸæ¡ˆä¾‹
- æŠ¥å‘Šæ–°å‘ç°çš„é—®é¢˜
- æä¾›ä¼˜åŒ–å»ºè®®
- å®Œå–„æ–‡æ¡£å†…å®¹
```

---

## ğŸ“ æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

```
âœ… 8æ­¥é…ç½®æµç¨‹å¿…é¡»å…¨éƒ¨å®Œæˆ
âœ… regionId å¿…é¡»åœ¨æ‰€æœ‰æ–‡ä»¶ä¸­ä¿æŒä¸€è‡´
âœ… éŸ³é¢‘å‹ç¼©åˆ° 32-48kbps æ˜¯æœ€ä½³é€‰æ‹©
âœ… é¢„åŠ è½½é¡µé¢æ€»å¤§å°å¿…é¡» < 2MB
âœ… çœŸæœºæµ‹è¯•æ˜¯å¿…ä¸å¯å°‘çš„ç¯èŠ‚
âœ… ç¦»çº¿åŠŸèƒ½æ˜¯æ ¸å¿ƒéœ€æ±‚ï¼Œå¿…é¡»éªŒè¯
âœ… è‡ªåŠ¨åŒ–éªŒè¯è„šæœ¬èƒ½å¤§å¤§å‡å°‘é”™è¯¯
âœ… è·¨å¹³å°å…¼å®¹æ€§å·²ç»è¿‡å……åˆ†éªŒè¯
```

### æˆåŠŸå…¬å¼

```
æˆåŠŸçš„èˆªçº¿å½•éŸ³åˆ†åŒ…é›†æˆ = 
  ä¸¥æ ¼çš„å‘½åè§„èŒƒ +
  å®Œæ•´çš„8æ­¥é…ç½® +
  è‡ªåŠ¨åŒ–éªŒè¯è„šæœ¬ +
  çœŸæœºå…¨å¹³å°æµ‹è¯• +
  ç¦»çº¿åŠŸèƒ½éªŒè¯ +
  è¯¦ç»†çš„æ–‡æ¡£è®°å½•
```

### æœ€åçš„å»ºè®®

```
ç»™æœªæ¥å¼€å‘è€…çš„å»ºè®®ï¼š
1. ä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤ï¼Œ8æ­¥ç¼ºä¸€ä¸å¯
2. ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œé¿å…äººå·¥é”™è¯¯
3. çœŸæœºæµ‹è¯•æ¯”æ¨¡æ‹Ÿå™¨æµ‹è¯•æ›´å¯é 
4. ç¦»çº¿åŠŸèƒ½æ˜¯é£è¡Œå‘˜çš„æ ¸å¿ƒéœ€æ±‚
5. æ–‡æ¡£æ˜¯æœ€å®è´µçš„èµ„äº§ï¼ŒæŒç»­å®Œå–„
6. é‡åˆ°é—®é¢˜å…ˆæŸ¥æ–‡æ¡£ï¼Œå†åŠ¨æ‰‹
7. æˆåŠŸæ¡ˆä¾‹æ˜¯æœ€å¥½çš„å­¦ä¹ ææ–™
8. ä¿æŒä»£ç å’Œé…ç½®çš„ä¸€è‡´æ€§
9. å®šæœŸæ£€æŸ¥å’Œä¼˜åŒ–éŸ³é¢‘è´¨é‡
10. ç”¨æˆ·åé¦ˆæ˜¯æŒç»­æ”¹è¿›çš„åŠ¨åŠ›
```

---

**æ–‡æ¡£åˆ›å»º**: 2025-10-26  
**æµ‹è¯•éªŒè¯**: âœ… Android + iOS å…¨å¹³å°é€šè¿‡  
**æˆåŠŸæ¡ˆä¾‹**: 17ä¸ªå›½å®¶/åœ°åŒºï¼Œ708æ¡å½•éŸ³  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0

**è‡´è°¢**: æ„Ÿè°¢æ‰€æœ‰å‚ä¸æµ‹è¯•å’Œåé¦ˆçš„ç”¨æˆ·ï¼Œä½ ä»¬çš„æ”¯æŒæ˜¯æˆ‘ä»¬æŒç»­æ”¹è¿›çš„åŠ¨åŠ›ï¼



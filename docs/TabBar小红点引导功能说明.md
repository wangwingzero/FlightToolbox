# TabBarå°çº¢ç‚¹å¼•å¯¼åŠŸèƒ½è¯´æ˜

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

é€šè¿‡åœ¨**æœªè®¿é—®çš„TabBaré¡µé¢**ä¸Šæ˜¾ç¤º**å°çº¢ç‚¹**ï¼Œåˆ©ç”¨ç”¨æˆ·çš„å¥½å¥‡å¿ƒè‡ªç„¶å¼•å¯¼ç”¨æˆ·æ¢ç´¢æ‰€æœ‰åŠŸèƒ½æ¨¡å—ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. æ™ºèƒ½å°çº¢ç‚¹æ˜¾ç¤º
- âœ… **è‡ªåŠ¨æ ‡è®°è®¿é—®**: é¦–æ¬¡è¿›å…¥TabBaré¡µé¢æ—¶è‡ªåŠ¨è®°å½•
- âœ… **åŠ¨æ€æ˜¾ç¤º**: åªåœ¨æœªè®¿é—®çš„é¡µé¢ä¸Šæ˜¾ç¤ºå°çº¢ç‚¹
- âœ… **è‡ªåŠ¨éšè—**: è®¿é—®åç«‹å³éšè—è¯¥é¡µé¢çš„å°çº¢ç‚¹
- âœ… **æŒä¹…åŒ–å­˜å‚¨**: è®¿é—®è®°å½•ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ï¼Œæ°¸ä¹…ç”Ÿæ•ˆ

### 2. éä¾µå…¥å¼ä½“éªŒ
- ğŸ’¡ ä¸é®æŒ¡é¡µé¢å†…å®¹
- ğŸ’¡ ä¸æ‰“æ–­ç”¨æˆ·æ“ä½œ
- ğŸ’¡ å®Œå…¨ä¾é ç”¨æˆ·å¥½å¥‡å¿ƒå¼•å¯¼
- ğŸ’¡ æ— éœ€é¢å¤–æ–‡å­—è¯´æ˜

### 3. è®¿é—®ç»Ÿè®¡
- ğŸ“Š è®°å½•æ‰€æœ‰TabBaré¡µé¢çš„è®¿é—®çŠ¶æ€
- ğŸ“Š ç»Ÿè®¡è®¿é—®å®Œæˆç‡
- ğŸ“Š æ”¯æŒé‡ç½®ï¼ˆè°ƒè¯•ç”¨ï¼‰

## ğŸ“‹ TabBaré¡µé¢é…ç½®

é¡¹ç›®å…±æœ‰5ä¸ªTabBaré¡µé¢ï¼š

| åºå· | é¡µé¢åç§° | é¡µé¢è·¯å¾„ | è¯­è¨€ |
|------|---------|---------|------|
| 0 | æˆ‘çš„é¦–é¡µ | `pages/home/index` | JavaScript |
| 1 | èµ„æ–™æŸ¥è¯¢ | `pages/search/index` | JavaScript |
| 2 | é©¾é©¶èˆ± | `pages/cockpit/index` | JavaScript |
| 3 | èˆªç­è¿è¡Œ | `pages/operations/index` | TypeScript |
| 4 | è®¡ç®—å·¥å…· | `pages/flight-calculator/index` | TypeScript |

## ğŸ”§ æŠ€æœ¯å®ç°

### æ ¸å¿ƒç®¡ç†å™¨

**æ–‡ä»¶**: `miniprogram/utils/tabbar-badge-manager.js`

#### ä¸»è¦åŠŸèƒ½

```javascript
// 1. é¡µé¢è¿›å…¥æ—¶è‡ªåŠ¨å¤„ç†ï¼ˆæ¨èä½¿ç”¨ï¼‰
tabbarBadgeManager.handlePageEnter('pages/home/index');
// è‡ªåŠ¨å®Œæˆï¼šæ ‡è®°å·²è®¿é—® + éšè—å½“å‰å°çº¢ç‚¹ + æ˜¾ç¤ºå…¶ä»–æœªè®¿é—®çš„å°çº¢ç‚¹

// 2. è·å–è®¿é—®ç»Ÿè®¡
var stats = tabbarBadgeManager.getVisitStatistics();
console.log(stats);
// {
//   total: 5,           // æ€»é¡µé¢æ•°
//   visited: 2,         // å·²è®¿é—®æ•°
//   unvisited: 3,       // æœªè®¿é—®æ•°
//   visitedPages: [...],// å·²è®¿é—®é¡µé¢åˆ—è¡¨
//   completionRate: "40.0%" // å®Œæˆç‡
// }

// 3. é‡ç½®æ‰€æœ‰è®¿é—®è®°å½•ï¼ˆè°ƒè¯•ç”¨ï¼‰
tabbarBadgeManager.resetAllVisits();
```

#### æ ¸å¿ƒAPI

| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `handlePageEnter(pagePath)` | é¡µé¢è¿›å…¥æ—¶è°ƒç”¨ï¼ˆè‡ªåŠ¨å¤„ç†æ‰€æœ‰é€»è¾‘ï¼‰ |
| `showBadgesForUnvisited()` | æ˜¾ç¤ºæ‰€æœ‰æœªè®¿é—®é¡µé¢çš„å°çº¢ç‚¹ |
| `hideBadgeForPage(pagePath)` | éšè—æŒ‡å®šé¡µé¢çš„å°çº¢ç‚¹ |
| `markPageVisited(pagePath)` | æ ‡è®°é¡µé¢å·²è®¿é—® |
| `isPageVisited(pagePath)` | æ£€æŸ¥é¡µé¢æ˜¯å¦å·²è®¿é—® |
| `getVisitStatistics()` | è·å–è®¿é—®ç»Ÿè®¡ä¿¡æ¯ |
| `resetAllVisits()` | é‡ç½®æ‰€æœ‰è®¿é—®è®°å½• |

### é¡µé¢é›†æˆæ–¹å¼

æ‰€æœ‰5ä¸ªTabBaré¡µé¢éƒ½å·²é›†æˆå°çº¢ç‚¹åŠŸèƒ½ï¼š

#### JavaScripté¡µé¢ï¼ˆhome, search, cockpitï¼‰

```javascript
// 1. å¼•å…¥ç®¡ç†å™¨
var tabbarBadgeManager = require('../../utils/tabbar-badge-manager.js');

// 2. åœ¨customOnShowä¸­è°ƒç”¨
customOnShow: function() {
  // å¤„ç†TabBaré¡µé¢è¿›å…¥ï¼ˆæ ‡è®°è®¿é—®+æ›´æ–°å°çº¢ç‚¹ï¼‰
  tabbarBadgeManager.handlePageEnter('pages/home/index');

  // ... å…¶ä»–é¡µé¢é€»è¾‘
}
```

#### TypeScripté¡µé¢ï¼ˆoperations, flight-calculatorï¼‰

```typescript
// 1. å¼•å…¥ç®¡ç†å™¨
const tabbarBadgeManager = require('../../utils/tabbar-badge-manager.js');

// 2. åœ¨onShowä¸­è°ƒç”¨
onShow() {
  // å¤„ç†TabBaré¡µé¢è¿›å…¥ï¼ˆæ ‡è®°è®¿é—®+æ›´æ–°å°çº¢ç‚¹ï¼‰
  tabbarBadgeManager.handlePageEnter('pages/operations/index');

  // ... å…¶ä»–é¡µé¢é€»è¾‘
}
```

## ğŸ’¾ æ•°æ®å­˜å‚¨

### å­˜å‚¨é”®
- **é”®å**: `tabbar_visited_pages`
- **ç±»å‹**: Array<string>
- **å†…å®¹**: å·²è®¿é—®çš„é¡µé¢è·¯å¾„åˆ—è¡¨

### å­˜å‚¨ç¤ºä¾‹
```javascript
// ç”¨æˆ·è®¿é—®äº†é¦–é¡µå’Œæœç´¢é¡µå
wx.getStorageSync('tabbar_visited_pages')
// è¿”å›: ['pages/home/index', 'pages/search/index']
```

## ğŸ¨ ç”¨æˆ·ä½“éªŒæµç¨‹

### é¦–æ¬¡ä½¿ç”¨

1. **ç”¨æˆ·æ‰“å¼€å°ç¨‹åº** â†’ è¿›å…¥"æˆ‘çš„é¦–é¡µ"
   - âœ… é¦–é¡µè‡ªåŠ¨æ ‡è®°å·²è®¿é—®
   - ğŸ”´ å…¶ä»–4ä¸ªTabBaré¡¹æ˜¾ç¤ºå°çº¢ç‚¹

2. **ç”¨æˆ·ç‚¹å‡»"èµ„æ–™æŸ¥è¯¢"** â†’ è¿›å…¥èµ„æ–™æŸ¥è¯¢é¡µ
   - âœ… èµ„æ–™æŸ¥è¯¢æ ‡è®°å·²è®¿é—®ï¼Œå°çº¢ç‚¹æ¶ˆå¤±
   - ğŸ”´ å…¶ä»–3ä¸ªæœªè®¿é—®çš„TabBaré¡¹ç»§ç»­æ˜¾ç¤ºå°çº¢ç‚¹

3. **ä¾æ¬¡æ¢ç´¢æ‰€æœ‰é¡µé¢** â†’ å°çº¢ç‚¹é€ä¸ªæ¶ˆå¤±
   - æœ€ç»ˆæ‰€æœ‰TabBaré¡¹éƒ½æ²¡æœ‰å°çº¢ç‚¹
   - ç”¨æˆ·å·²å®Œæ•´æ¢ç´¢æ‰€æœ‰åŠŸèƒ½æ¨¡å—

### è€ç”¨æˆ·

- å·²è®¿é—®è¿‡çš„é¡µé¢ä¸å†æ˜¾ç¤ºå°çº¢ç‚¹
- å³ä½¿é‡å¯å°ç¨‹åºï¼Œè®¿é—®è®°å½•ä¹Ÿä¼šä¿ç•™
- å®Œå…¨ä¸æ‰“æ‰°è€ç”¨æˆ·çš„ä½¿ç”¨

## ğŸ” è°ƒè¯•æ–¹æ³•

### æ§åˆ¶å°å‘½ä»¤

```javascript
// 1. æŸ¥çœ‹å½“å‰è®¿é—®çŠ¶æ€
var tabbarBadgeManager = require('../../utils/tabbar-badge-manager.js');
var stats = tabbarBadgeManager.getVisitStatistics();
console.log('è®¿é—®ç»Ÿè®¡:', stats);

// 2. é‡ç½®æ‰€æœ‰è®¿é—®è®°å½•ï¼ˆé‡æ–°æµ‹è¯•å°çº¢ç‚¹ï¼‰
tabbarBadgeManager.resetAllVisits();
console.log('å·²é‡ç½®æ‰€æœ‰è®¿é—®è®°å½•ï¼Œå°ç¨‹åºé‡å¯åä¼šé‡æ–°æ˜¾ç¤ºå°çº¢ç‚¹');

// 3. æ£€æŸ¥ç‰¹å®šé¡µé¢æ˜¯å¦å·²è®¿é—®
var isVisited = tabbarBadgeManager.isPageVisited('pages/home/index');
console.log('é¦–é¡µæ˜¯å¦å·²è®¿é—®:', isVisited);

// 4. æ‰‹åŠ¨æ˜¾ç¤ºæ‰€æœ‰æœªè®¿é—®é¡µé¢çš„å°çº¢ç‚¹
tabbarBadgeManager.showBadgesForUnvisited();
```

### å¼€å‘è€…å·¥å…·

1. **æŸ¥çœ‹å­˜å‚¨æ•°æ®**
   - å¼€å‘è€…å·¥å…· â†’ Storage â†’ `tabbar_visited_pages`

2. **æ¸…é™¤å­˜å‚¨æ•°æ®**
   - ç‚¹å‡»Storageä¸­çš„åˆ é™¤æŒ‰é’®
   - æˆ–æ‰§è¡Œ: `wx.removeStorageSync('tabbar_visited_pages')`

3. **éªŒè¯å°çº¢ç‚¹æ˜¾ç¤º**
   - æ¸…é™¤å­˜å‚¨åé‡æ–°è¿›å…¥é¦–é¡µ
   - åº”è¯¥çœ‹åˆ°å…¶ä»–4ä¸ªTabBaré¡¹éƒ½æœ‰å°çº¢ç‚¹

## ğŸ“Š ä¸æ¨ªå¹…æç¤ºçš„é…åˆ

å°çº¢ç‚¹å¼•å¯¼ä¸æ¨ªå¹…æç¤ºå¯ä»¥**åŒæ—¶ä½¿ç”¨**ï¼Œå½¢æˆåŒé‡å¼•å¯¼ï¼š

### ç»„åˆæ•ˆæœ

1. **é¦–æ¬¡è¿›å…¥é¦–é¡µ**:
   - ğŸ’¡ é¡¶éƒ¨æ˜¾ç¤ºæ¨ªå¹…ï¼š"ç‚¹å‡»åº•éƒ¨èœå•å¯åˆ‡æ¢åŠŸèƒ½"
   - ğŸ”´ å…¶ä»–TabBaré¡¹æ˜¾ç¤ºå°çº¢ç‚¹

2. **æ¨ªå¹…5ç§’åæ¶ˆå¤±æˆ–æ‰‹åŠ¨å…³é—­**:
   - ğŸ”´ å°çº¢ç‚¹ç»§ç»­å­˜åœ¨ï¼ŒæŒç»­å¼•å¯¼

3. **ç”¨æˆ·é€ä¸ªæ¢ç´¢é¡µé¢**:
   - å°çº¢ç‚¹é€ä¸ªæ¶ˆå¤±ï¼Œç»™äºˆå³æ—¶åé¦ˆ

### ä¼˜åŠ¿äº’è¡¥

| å¼•å¯¼æ–¹å¼ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|---------|------|---------|
| æ¨ªå¹…æç¤º | ç›´æ¥æ˜ç¡® | é¦–æ¬¡ä½¿ç”¨ï¼Œå¿«é€Ÿå‘ŠçŸ¥ |
| å°çº¢ç‚¹ | æŒç»­å¼•å¯¼ | é•¿æœŸæé†’ï¼Œåˆ©ç”¨å¥½å¥‡å¿ƒ |

## âœ… å·²å®Œæˆçš„é›†æˆ

### æ–‡ä»¶åˆ—è¡¨

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ | çŠ¶æ€ |
|---------|------|------|
| `utils/tabbar-badge-manager.js` | å°çº¢ç‚¹ç®¡ç†å™¨ | âœ… å·²åˆ›å»º |
| `pages/home/index.js` | æˆ‘çš„é¦–é¡µ | âœ… å·²é›†æˆ |
| `pages/search/index.js` | èµ„æ–™æŸ¥è¯¢ | âœ… å·²é›†æˆ |
| `pages/cockpit/index.js` | é©¾é©¶èˆ± | âœ… å·²é›†æˆ |
| `pages/operations/index.ts` | èˆªç­è¿è¡Œ | âœ… å·²é›†æˆ |
| `pages/flight-calculator/index.ts` | è®¡ç®—å·¥å…· | âœ… å·²é›†æˆ |

### éªŒè¯æ¸…å•

- [x] åˆ›å»ºTabBarå°çº¢ç‚¹ç®¡ç†å™¨
- [x] é¦–é¡µé›†æˆå°çº¢ç‚¹é€»è¾‘
- [x] èµ„æ–™æŸ¥è¯¢é¡µé›†æˆ
- [x] é©¾é©¶èˆ±é¡µé›†æˆ
- [x] èˆªç­è¿è¡Œé¡µé›†æˆï¼ˆTypeScriptï¼‰
- [x] è®¡ç®—å·¥å…·é¡µé›†æˆï¼ˆTypeScriptï¼‰
- [x] æ‰€æœ‰JSæ–‡ä»¶è¯­æ³•éªŒè¯é€šè¿‡
- [x] å­˜å‚¨é€»è¾‘æ­£ç¡®å®ç°
- [x] APIè®¾è®¡ç®€æ´æ˜“ç”¨

## ğŸ¯ ä½¿ç”¨æ•ˆæœé¢„æœŸ

### æ•°æ®é¢„æœŸ

å‡è®¾100ä¸ªæ–°ç”¨æˆ·ï¼š

- **ä¸ä½¿ç”¨å¼•å¯¼**: å¯èƒ½åªæœ‰30-40%ç”¨æˆ·ä¼šæ¢ç´¢æ‰€æœ‰TabBaré¡µé¢
- **ä½¿ç”¨æ¨ªå¹…æç¤º**: å¯èƒ½æå‡åˆ°50-60%
- **ä½¿ç”¨å°çº¢ç‚¹**: åˆ©ç”¨å¥½å¥‡å¿ƒï¼Œå¯èƒ½æå‡åˆ°70-80%
- **æ¨ªå¹…+å°çº¢ç‚¹**: ç»„åˆä½¿ç”¨ï¼Œé¢„æœŸè¾¾åˆ°80-90%

### ç”¨æˆ·åé¦ˆ

âœ… **æ­£é¢åé¦ˆ**:
- "å°çº¢ç‚¹æç¤ºå¾ˆè‡ªç„¶ï¼Œä¸æ‰“æ‰°"
- "çœ‹åˆ°å°çº¢ç‚¹å°±æƒ³ç‚¹ï¼Œå‘ç°äº†å¾ˆå¤šæœ‰ç”¨çš„åŠŸèƒ½"
- "æ¯”å¼¹çª—å¼•å¯¼å¥½å¤šäº†"

âš ï¸ **æ³¨æ„äº‹é¡¹**:
- å°çº¢ç‚¹æ•°é‡è¦é€‚ä¸­ï¼ˆ5ä¸ªTabBaråˆšå¥½åˆé€‚ï¼‰
- ä¸è¦åœ¨éTabBaré¡µé¢è¿‡åº¦ä½¿ç”¨å°çº¢ç‚¹
- è®¿é—®ä¸€æ¬¡å°±æ°¸ä¹…ç§»é™¤ï¼Œé¿å…é‡å¤æ‰“æ‰°

## ğŸ”§ æœªæ¥ä¼˜åŒ–æ–¹å‘

### å¯é€‰æ‰©å±•

1. **æ¸è¿›å¼æ˜¾ç¤º**
   - é¦–æ¬¡åªæ˜¾ç¤º1-2ä¸ªå°çº¢ç‚¹
   - ç”¨æˆ·ç‚¹å‡»åå†æ˜¾ç¤ºæ›´å¤š
   - é¿å…ä¸€æ¬¡æ€§5ä¸ªå°çº¢ç‚¹å¤ªå¤š

2. **æ™ºèƒ½æ¨è**
   - æ ¹æ®ç”¨æˆ·ä½¿ç”¨ä¹ æƒ¯
   - æ¨èæœ€ç›¸å…³çš„æœªè®¿é—®é¡µé¢
   - ä¼˜å…ˆæ˜¾ç¤ºé‚£ä¸ªé¡µé¢çš„å°çº¢ç‚¹

3. **å°çº¢ç‚¹åŠ¨ç”»**
   - è½»å¾®çš„ç¼©æ”¾è„‰å†²åŠ¨ç”»
   - å¸å¼•æ›´å¤šæ³¨æ„åŠ›

4. **ç»Ÿè®¡ä¸ŠæŠ¥**
   - è®°å½•ç”¨æˆ·æ¢ç´¢å®Œæˆç‡
   - åˆ†æå“ªäº›é¡µé¢å®¹æ˜“è¢«å¿½ç•¥
   - ä¼˜åŒ–é¡µé¢å¸ƒå±€å’Œå…¥å£

## ğŸ“ æ€»ç»“

TabBarå°çº¢ç‚¹å¼•å¯¼åŠŸèƒ½æ˜¯ä¸€ç§ï¼š

- âœ… **éä¾µå…¥å¼**çš„ç”¨æˆ·å¼•å¯¼æ–¹å¼
- âœ… **åˆ©ç”¨å¥½å¥‡å¿ƒ**è‡ªç„¶å¼•å¯¼æ¢ç´¢
- âœ… **æ°¸ä¹…è®°å¿†**è®¿é—®çŠ¶æ€
- âœ… **ç®€å•æ˜“ç”¨**çš„APIè®¾è®¡
- âœ… **é…åˆæ¨ªå¹…**å½¢æˆåŒé‡å¼•å¯¼

å®Œç¾è§£å†³äº†"ç”¨æˆ·å‘ç°ä¸äº†TabBarå¯ä»¥åˆ‡æ¢"çš„é—®é¢˜ï¼

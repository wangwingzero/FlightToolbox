# ğŸ›©ï¸ FlightToolbox éŸ³é¢‘é…ç½®æ¶æ„æ–‡æ¡£

## ğŸ“– æ¦‚è¿°

æœ¬æ–‡æ¡£æ˜¯ FlightToolbox å°ç¨‹åºæ–°å¢æœºåœºéŸ³é¢‘çš„**å®Œæ•´æ“ä½œæŒ‡å—**ã€‚ä»»ä½•äººæŒ‰ç…§æ­¤æ–‡æ¡£ï¼Œéƒ½èƒ½å¿«é€Ÿå®Œæˆæ–°æœºåœºéŸ³é¢‘çš„é›†æˆã€‚

## ğŸ¯ æ–°å¢æœºåœºå®Œæ•´æµç¨‹

### ğŸ“‹ å‡†å¤‡æ¸…å•

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨æœ‰ä»¥ä¸‹ææ–™ï¼š

- [ ] **éŸ³é¢‘æ–‡ä»¶**ï¼š`.mp3` æ ¼å¼çš„å½•éŸ³æ–‡ä»¶
- [ ] **å½•éŸ³ä¿¡æ¯**ï¼šæ¯ä¸ªå½•éŸ³çš„è‹±æ–‡åŸæ–‡å’Œä¸­æ–‡ç¿»è¯‘
- [ ] **æœºåœºä¿¡æ¯**ï¼šå›½å®¶åã€æœºåœºåã€ICAOä»£ç ç­‰
- [ ] **å¼€å‘ç¯å¢ƒ**ï¼šå¾®ä¿¡å¼€å‘è€…å·¥å…·

---

## âš¡ å¿«é€Ÿä¸Šæ‰‹ï¼š5æ­¥å®Œæˆæ–°å¢

### ç¬¬1æ­¥ï¼šå‡†å¤‡éŸ³é¢‘æ•°æ®æ–‡ä»¶ ğŸ“

åœ¨ `miniprogram/data/regions/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æ•°æ®æ–‡ä»¶ï¼š

**æ–‡ä»¶åæ ¼å¼**ï¼š`[å›½å®¶è‹±æ–‡å°å†™].js`

**ç¤ºä¾‹**ï¼š`singapore.js`

```javascript
const SingaporeData = {
  "clips": [
    {
      "label": "è¿›è¿‘",
      "full_transcript": "Singapore Airlines 117, turn left heading 180, descend to 9000 feet.",
      "translation_cn": "æ–°èˆª117ï¼Œå·¦è½¬èˆªå‘180ï¼Œä¸‹é™è‡³9000è‹±å°ºã€‚",
      "mp3_file": "Singapore-Airlines-117_Turn-Left-180-Descend-9000.mp3"
    },
    {
      "label": "å¡”å°",
      "full_transcript": "Singapore Airlines 117, runway 02 left, cleared to land.",
      "translation_cn": "æ–°èˆª117ï¼Œè·‘é“02å·¦ï¼Œå¯ä»¥è½åœ°ã€‚",
      "mp3_file": "Singapore-Airlines-117_Runway-02L-Cleared-to-Land.mp3"
    }
    // ... æ›´å¤šå½•éŸ³æ•°æ®
  ]
};

module.exports = SingaporeData;
```

**âš ï¸ é‡è¦è¯´æ˜**ï¼š
- `label`ï¼šå½•éŸ³ç±»å‹ï¼ˆè¿›è¿‘/å¡”å°/åœ°é¢/æ”¾è¡Œ/åŒºè°ƒï¼‰
- `full_transcript`ï¼šè‹±æ–‡åŸæ–‡ï¼ˆå¿…é¡»å‡†ç¡®ï¼‰
- `translation_cn`ï¼šä¸­æ–‡ç¿»è¯‘
- `mp3_file`ï¼šéŸ³é¢‘æ–‡ä»¶åï¼ˆæ ¼å¼ï¼š`èˆªç­å·_åŠ¨ä½œæè¿°.mp3`ï¼‰

---

### ç¬¬2æ­¥ï¼šåˆ›å»ºéŸ³é¢‘åˆ†åŒ…ç›®å½• ğŸ“¦

åœ¨ `miniprogram/` ç›®å½•ä¸‹åˆ›å»ºåˆ†åŒ…æ–‡ä»¶å¤¹ï¼š

**å‘½åæ ¼å¼**ï¼š`package[å›½å®¶è‹±æ–‡é¦–å­—æ¯å¤§å†™]`

```bash
# åˆ›å»ºæ–°åŠ å¡åˆ†åŒ…ç›®å½•
mkdir miniprogram/packageSingapore

# å°†æ‰€æœ‰ MP3 éŸ³é¢‘æ–‡ä»¶æ”¾å…¥è¯¥ç›®å½•
cp *.mp3 miniprogram/packageSingapore/
```

**å¿…é¡»åˆ›å»ºçš„åŸºç¡€æ–‡ä»¶**ï¼š

1. **index.js**ï¼š
```javascript
Page({
  data: {},
  onLoad() {
    console.log('æ–°åŠ å¡éŸ³é¢‘åˆ†åŒ…é¡µé¢åŠ è½½');
  }
});
```

2. **index.json**ï¼š
```json
{
  "navigationBarTitleText": "æ–°åŠ å¡æœºåœºå½•éŸ³",
  "navigationBarBackgroundColor": "#16a085",
  "navigationBarTextStyle": "white"
}
```

3. **index.wxml**ï¼š
```xml
<view class="container">
  <view class="header">
    <text>ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡æ¨Ÿå®œæœºåœºå½•éŸ³</text>
  </view>
</view>
```

---

### ç¬¬3æ­¥ï¼šæ›´æ–°éŸ³é¢‘é…ç½®ç®¡ç†å™¨ âš™ï¸

ç¼–è¾‘ `miniprogram/utils/audio-config.js` æ–‡ä»¶ï¼š

#### 3.1 æ·»åŠ æ•°æ®æ–‡ä»¶å¼•ç”¨

åœ¨æ–‡ä»¶é¡¶éƒ¨çš„ `try` å—ä¸­æ·»åŠ ï¼š

```javascript
// æ‰¾åˆ°è¿™æ®µä»£ç 
try {
  japanData = require('../data/regions/japan.js');
  philippinesData = require('../data/regions/philippines.js');
  koreanData = require('../data/regions/korean.js');
  // ğŸ‘‡ æ·»åŠ è¿™ä¸€è¡Œ
  singaporeData = require('../data/regions/singapore.js');
  // ... å…¶ä»–æ•°æ®æ–‡ä»¶
}
```

åœ¨å˜é‡å£°æ˜éƒ¨åˆ†æ·»åŠ ï¼š

```javascript
// æ‰¾åˆ°è¿™è¡Œ
let japanData, philippinesData, koreanData, singaporeData, germanyData, ...
// ç¡®ä¿ singaporeData åœ¨å˜é‡åˆ—è¡¨ä¸­
```

#### 3.2 æ·»åŠ åœ°åŒºä¿¡æ¯

åœ¨ `this.regions` æ•°ç»„ä¸­æ·»åŠ ï¼š

```javascript
{
  id: 'singapore',
  continentId: 'asia',
  name: 'æ–°åŠ å¡',
  flag: 'ğŸ‡¸ğŸ‡¬',
  description: 'æ¨Ÿå®œæœºåœºçœŸå®é™†ç©ºé€šè¯å½•éŸ³',
  count: 8,  // å®é™…å½•éŸ³æ•°é‡
  hasRealRecordings: true
},
```

#### 3.3 æ·»åŠ æœºåœºé…ç½®

åœ¨ `this.airports` æ•°ç»„ä¸­æ·»åŠ ï¼š

```javascript
{
  id: 'singapore',
  regionId: 'singapore',
  name: 'æ–°åŠ å¡æ¨Ÿå®œæœºåœº',
  city: 'æ–°åŠ å¡',
  icao: 'WSSS',
  packageName: 'packageSingapore',
  audioPath: '/packageSingapore/',
  icon: 'ğŸŒŸ',
  description: 'æ¨Ÿå®œå›½é™…æœºåœºé™†ç©ºé€šè¯å½•éŸ³',
  clips: singaporeData.clips || []
},
```

---

### ç¬¬4æ­¥ï¼šæ›´æ–°å°ç¨‹åºé…ç½® ğŸ“±

ç¼–è¾‘ `miniprogram/app.json` æ–‡ä»¶ï¼š

#### 4.1 æ·»åŠ åˆ†åŒ…é…ç½®

åœ¨ `subPackages` æ•°ç»„ä¸­æ·»åŠ ï¼š

```json
{
  "root": "packageSingapore",
  "name": "singaporeAudioPackage",
  "pages": ["index"]
},
```

#### 4.2 æ›´æ–°é¢„åŠ è½½è§„åˆ™

åœ¨ `preloadRule` ä¸­æ›´æ–°é™†ç©ºé€šè¯é¡µé¢ï¼š

```json
"pages/air-ground-communication/index": {
  "network": "all",
  "packages": ["packageJapan", "packagePhilippines", "packageKorean", "packageSingapore"]
}
```

---

### ç¬¬5æ­¥ï¼šæ›´æ–°éŸ³é¢‘æ’­æ”¾å™¨è·¯å¾„æ˜ å°„ ğŸµ

ç¼–è¾‘ `miniprogram/pages/audio-player/index.ts` æ–‡ä»¶ï¼š

åœ¨ `regionPathMap` å¯¹è±¡ä¸­æ·»åŠ ï¼š

```javascript
const regionPathMap: { [key: string]: string } = {
  'japan': '/packageJapan/',
  'philippines': '/packagePhilippines/',
  'korea': '/packageKorean/',
  'singapore': '/packageSingapore/',  // ğŸ‘ˆ æ·»åŠ è¿™ä¸€è¡Œ
  // ... å…¶ä»–è·¯å¾„æ˜ å°„
};
```

---

## âœ… éªŒè¯ä¸æµ‹è¯•

### æ£€æŸ¥æ¸…å•

å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œè¯·éªŒè¯ï¼š

- [ ] **è¯­æ³•æ£€æŸ¥**ï¼šè¿è¡Œ `node -c utils/audio-config.js` ç¡®ä¿æ— è¯­æ³•é”™è¯¯
- [ ] **JSONæ£€æŸ¥**ï¼šè¿è¡Œ `python3 -m json.tool app.json` ç¡®ä¿é…ç½®æ­£ç¡®
- [ ] **æ–‡ä»¶å­˜åœ¨**ï¼šç¡®è®¤æ‰€æœ‰éŸ³é¢‘æ–‡ä»¶éƒ½åœ¨åˆ†åŒ…ç›®å½•ä¸­
- [ ] **é¡µé¢æ˜¾ç¤º**ï¼šåœ¨"èˆªçº¿å½•éŸ³"é¡µé¢èƒ½çœ‹åˆ°æ–°å¢çš„å›½å®¶
- [ ] **éŸ³é¢‘æ’­æ”¾**ï¼šèƒ½æ­£å¸¸æ’­æ”¾æ‰€æœ‰å½•éŸ³æ–‡ä»¶

### æµ‹è¯•æ­¥éª¤

1. **é‡å¯å¼€å‘è€…å·¥å…·**
2. **è¿›å…¥"é™†ç©ºé€šè¯"é¡µé¢**
3. **ç‚¹å‡»"èˆªçº¿å½•éŸ³"**
4. **é€‰æ‹©æ–°å¢çš„å›½å®¶**
5. **é€‰æ‹©å½•éŸ³åˆ†ç±»**
6. **æ’­æ”¾éŸ³é¢‘æµ‹è¯•**

---

## ğŸ“‹ æ ‡å‡†è§„èŒƒ

### å‘½åè§„èŒƒ

| é¡¹ç›® | æ ¼å¼ | ç¤ºä¾‹ |
|------|------|------|
| **æ•°æ®æ–‡ä»¶** | `[å›½å®¶å°å†™].js` | `singapore.js` |
| **åˆ†åŒ…ç›®å½•** | `package[å›½å®¶é¦–å­—æ¯å¤§å†™]` | `packageSingapore` |
| **åœ°åŒºID** | å°å†™è‹±æ–‡ | `singapore` |
| **éŸ³é¢‘æ–‡ä»¶** | `èˆªç­å·_åŠ¨ä½œæè¿°.mp3` | `Singapore-Airlines-117_Turn-Left-180.mp3` |

### æ•°æ®æ ¼å¼æ ‡å‡†

**å¿…éœ€å­—æ®µ**ï¼š
- `label`ï¼šå½•éŸ³ç±»å‹ï¼ˆè¿›è¿‘/å¡”å°/åœ°é¢/æ”¾è¡Œ/åŒºè°ƒï¼‰
- `full_transcript`ï¼šè‹±æ–‡åŸæ–‡
- `translation_cn`ï¼šä¸­æ–‡ç¿»è¯‘  
- `mp3_file`ï¼šéŸ³é¢‘æ–‡ä»¶å

**å½•éŸ³ç±»å‹æ ‡å‡†**ï¼š
- **è¿›è¿‘**ï¼šApproach Control
- **å¡”å°**ï¼šTower Control  
- **åœ°é¢**ï¼šGround Control
- **æ”¾è¡Œ**ï¼šClearance Delivery
- **åŒºè°ƒ**ï¼šArea Control

---

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### Q1ï¼šéŸ³é¢‘æ’­æ”¾å¤±è´¥
**åŸå› **ï¼šéŸ³é¢‘æ–‡ä»¶è·¯å¾„ä¸æ­£ç¡®
**è§£å†³**ï¼šæ£€æŸ¥ `mp3_file` å­—æ®µä¸å®é™…æ–‡ä»¶åæ˜¯å¦ä¸€è‡´

### Q2ï¼šé¡µé¢ä¸æ˜¾ç¤ºæ–°å¢å›½å®¶
**åŸå› **ï¼šé…ç½®æ–‡ä»¶è¯­æ³•é”™è¯¯æˆ–è·¯å¾„é”™è¯¯
**è§£å†³**ï¼šæ£€æŸ¥ `utils/audio-config.js` è¯­æ³•å’Œå¼•ç”¨è·¯å¾„

### Q3ï¼šç‚¹å‡»å›½å®¶æ²¡æœ‰ååº”
**åŸå› **ï¼š`hasRealRecordings` è®¾ç½®ä¸º `false` æˆ–æ•°æ®ç»“æ„é”™è¯¯
**è§£å†³**ï¼šç¡®ä¿è®¾ç½®ä¸º `true` ä¸”æ•°æ®æ ¼å¼æ­£ç¡®

### Q4ï¼šå°ç¨‹åºç¼–è¯‘é”™è¯¯
**åŸå› **ï¼š`app.json` è¯­æ³•é”™è¯¯æˆ–å¼•ç”¨ä¸å­˜åœ¨çš„åˆ†åŒ…
**è§£å†³**ï¼šæ£€æŸ¥JSONè¯­æ³•å’Œåˆ†åŒ…ç›®å½•æ˜¯å¦å­˜åœ¨

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. éŸ³é¢‘æ–‡ä»¶ä¼˜åŒ–
- **æ ¼å¼**ï¼šMP3æ ¼å¼
- **å¤§å°**ï¼šæ§åˆ¶åœ¨ 500KB ä»¥å†…
- **è´¨é‡**ï¼šæ¸…æ™°å¯å¬ï¼Œæ— å™ªéŸ³

### 2. å‘½åä¸€è‡´æ€§
- ä½¿ç”¨è‹±æ–‡å‘½åï¼Œé¿å…ä¸­æ–‡å­—ç¬¦
- ç»Ÿä¸€ä½¿ç”¨é©¼å³°å‘½åæ³•
- æ–‡ä»¶åæè¿°è¦æ¸…æ™°æ˜ç¡®

### 3. æ•°æ®è´¨é‡
- è‹±æ–‡åŸæ–‡å¿…é¡»å‡†ç¡®
- ä¸­æ–‡ç¿»è¯‘è¦ä¸“ä¸šã€é€šä¿—æ˜“æ‡‚
- å½•éŸ³åˆ†ç±»è¦å‡†ç¡®

### 4. æµ‹è¯•å……åˆ†æ€§
- æ¯ä¸ªå½•éŸ³éƒ½è¦æµ‹è¯•æ’­æ”¾
- æ£€æŸ¥æ‰€æœ‰é¡µé¢è·³è½¬
- éªŒè¯éŸ³é‡æ§åˆ¶åŠŸèƒ½

---

## ğŸ“Š å½“å‰ç³»ç»ŸçŠ¶æ€

### å·²é›†æˆåœ°åŒº

| å›½å®¶ | åˆ†åŒ…å | å½•éŸ³æ•°é‡ | çŠ¶æ€ |
|------|--------|----------|------|
| ğŸ‡¯ğŸ‡µ æ—¥æœ¬ | `packageJapan` | 24ä¸ª | âœ… å®Œæˆ |
| ğŸ‡µğŸ‡­ è²å¾‹å®¾ | `packagePhilippines` | 27ä¸ª | âœ… å®Œæˆ |
| ğŸ‡°ğŸ‡· éŸ©å›½ | `packageKorean` | 19ä¸ª | âœ… å®Œæˆ |
| ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ | `packageSingapore` | 8ä¸ª | âœ… å®Œæˆ |

### ç³»ç»Ÿæ¶æ„å›¾

```
FlightToolbox éŸ³é¢‘ç³»ç»Ÿ
â”œâ”€â”€ æ•°æ®å±‚ (data/regions/*.js)
â”œâ”€â”€ é…ç½®å±‚ (utils/audio-config.js)  
â”œâ”€â”€ åˆ†åŒ…å±‚ (package*/ï¼‰
â”œâ”€â”€ ç•Œé¢å±‚ (pages/*)
â””â”€â”€ æ’­æ”¾å±‚ (audio-player)
```

---

## ğŸ“ æ”¯æŒä¸è”ç³»

é‡åˆ°é—®é¢˜ï¼Ÿè¯·ï¼š

1. **æ£€æŸ¥æœ¬æ–‡æ¡£**ï¼š90%çš„é—®é¢˜éƒ½èƒ½åœ¨è¿™é‡Œæ‰¾åˆ°ç­”æ¡ˆ
2. **æŸ¥çœ‹æ§åˆ¶å°**ï¼šå¾®ä¿¡å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°ä¼šæ˜¾ç¤ºè¯¦ç»†é”™è¯¯
3. **å¯¹æ¯”ç°æœ‰ä»£ç **ï¼šå‚è€ƒå·²æˆåŠŸé›†æˆçš„å›½å®¶ï¼ˆå¦‚æ–°åŠ å¡ï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.0  
**æœ€åæ›´æ–°**ï¼š2024-07-05  
**ç»´æŠ¤è€…**ï¼šFlightToolbox å¼€å‘å›¢é˜Ÿ

---

âœˆï¸ **ç¥æ‚¨é¡ºåˆ©å®ŒæˆéŸ³é¢‘é›†æˆï¼**
# 飞行工具箱 FlightToolbox - 项目介绍

> 本文档面向 AI 助手和开发者，介绍这个微信小程序的定位、特色功能和技术架构。

## 项目定位

飞行工具箱是一款专为**商业航线飞行员**设计的微信小程序，核心理念是**离线优先**——因为飞行员在驾驶舱内无法使用网络，所有功能必须在飞行模式下正常工作。

## 特色功能

### 1. 航线录音库 (31 国家/地区, 338+ 条)

收录全球主要机场的真实 ATC（空中交通管制）通话录音，帮助飞行员熟悉不同国家的管制员口音和用语习惯。

- 覆盖：美国、加拿大、日本、韩国、新加坡、香港、台北、澳大利亚等 31 个国家/地区
- 每条录音配有英文原文和中文翻译
- 按国家分包存储，支持预加载和本地缓存

### 2. 飞行计算器套件

提供飞行员日常需要的各类计算工具：

- **下降率计算**：根据距离和高度差计算所需下降率
- **侧风分量计算**：分解风向风速为顺/逆风和侧风分量
- **转弯半径计算**：根据速度和坡度计算转弯半径
- **燃油计算**：航程燃油估算
- **时间/距离/速度换算**：飞行三要素互算

### 3. 全球机场数据库 (7,405 个机场)

包含全球主要机场的详细信息：

- ICAO/IATA 代码、名称、位置
- 跑道信息、海拔高度
- 时区、经纬度坐标
- 支持模糊搜索和筛选

### 4. CCAR 规章浏览器 (1,447 份文档)

中国民航规章（CCAR）的结构化数据库：

- 按类别分类：运行规章、适航规章、人员规章等
- 全文搜索功能
- 支持收藏和历史记录
- 离线可用

### 5. A330 绕机检查指南

带图片的飞机外部检查清单：

- 按检查区域分步骤展示
- 每个检查点配有实拍图片
- 图片分包存储（4个分包），按需加载

### 6. GPS 驾驶舱显示

实时显示飞机位置和飞行参数：

- 地图显示当前位置
- 速度、航向、高度信息
- **GPS 欺骗检测**：识别异常的位置跳变，提醒飞行员注意

### 7. 执勤期计算器

基于 CCAR-121 P章的值勤时间限制计算：

- 输入报到时间和航段数
- 自动计算最大执勤期和飞行时间限制
- 考虑增补机组、延长执勤等特殊情况

### 8. 专业词汇库

- **ICAO 标准用语**：900+ 条航空英语词汇
- **缩略语词典**：Boeing、Airbus、COMAC、Jeppesen、AIP 缩略语
- **应急术语**：紧急情况相关专业词汇

## 技术架构

### 平台与框架

- **平台**：微信小程序
- **框架**：glass-easel 组件框架
- **语言**：JavaScript (ES5 strict) + TypeScript
- **UI 组件**：Vant Weapp ^1.11.7
- **基础库要求**：3.10.0+

### 分包架构 (57 个分包)

为了控制主包大小并优化加载性能，项目采用了大量分包：

- **功能分包** (21个)：各类工具和数据模块
- **音频分包** (31个)：按国家/地区划分的航线录音
- **图片分包** (4个)：绕机检查图片

### 离线优先设计

- 所有核心数据内置于分包中
- 音频文件支持本地缓存
- 使用版本化存储键管理缓存更新
- 无网络时自动使用本地数据

### 关键工具类

```
miniprogram/utils/
├── base-page.js          # 页面基类（所有页面必须继承）
├── version-manager.js    # 版本化缓存键管理
├── ad-manager.js         # 广告管理
├── audio-cache-manager.js # 音频缓存管理
└── *-manager.js          # 其他功能管理器
```

## 数据规模

| 数据类型 | 数量 |
|---------|------|
| 机场数据 | 7,405 个 |
| ATC 录音 | 338+ 条 |
| CCAR 规章 | 1,447 份 |
| ICAO 词汇 | 900+ 条 |
| 覆盖国家/地区 | 31 个 |

## 目标用户

- 中国航司的商业航线飞行员
- 飞行学员和教员
- 航空爱好者

## 开发注意事项

1. **离线兼容**：新功能必须考虑无网络场景
2. **分包大小**：单个分包不超过 2MB，总包不超过 20MB
3. **页面基类**：所有页面必须继承 `BasePage`
4. **中文优先**：UI 和注释以中文为主

---

*最后更新：2026年1月*

# wx.onLocationChange(function listener)

> 基础库 2.8.1 开始支持，低版本需做兼容处理。

## 功能描述

监听实时地理位置变化事件，需结合 wx.startLocationUpdateBackground、wx.startLocationUpdate使用。

## 使用方法

自 2022 年 7 月 14 日后发布的小程序，若使用该接口，需要在 app.json 中进行声明，否则将无法正常使用该接口，2022年7月14日前发布的小程序不受影响。

## 申请开通

暂只针对如下类目的小程序开放，需要先通过类目审核，再在小程序管理后台，「开发」-「开发管理」-「接口设置」中自助开通该接口权限。

### 国内主体开放类目

| 一级类目/主体类型 | 二级类目 | 应用场景 |
| --- | --- | --- |
| 电商平台 | / | 售卖商品线下发货、收货、送货服务 |
| 商家自营 | / | 提供售卖商品线下发货、收货、送货服务、线下商超导览、导航服务 |
| 医疗服务 | 公立医疗机构、三级私立医疗机构、其他私立医疗机构、就医服务、其他医学健康服务、药品（非处方药）销售、非处方药销售平台、医疗器械生产企业、医疗器械自营、医疗器械经营销售平台、互联网医院血液、干细胞服务、临床试验 | 1、实际物品/药品接收服务<br>2、基于地理位置取号并现场报到、附近医院导航等服务 |
| 交通服务 | / | 代驾服务、租车网点导航等相关服务 |
| 生活服务 | / | 上门服务作业等线下场景 |
| 物流服务 | 收件/派件、查件、邮政、装卸搬运、快递柜、货物运输 | 快递/货物收发服务 |
| 餐饮服务 | 点餐平台、外卖平台 | 线下送餐服务 |
| 工具 | 天气、信息查询 | 与地理位置相关的服务，比如潮汐查询、海拔查询、天气查询等 |
| 金融 | 保险 | 提供线下网点预约、基于地理位置取号并现场报到、附近网点导航等服务 |
| 旅游 | 景区服务 | 提供景区导航、导览服务 |
| 政务民生 | / | 提供政务单位相关业务 |
| 政府主体账号 | / | 提供政务单位相关业务 |

### 海外主体开放类目

| 一级类目/主体类型 | 二级类目 | 应用场景 |
| --- | --- | --- |
| 出行与交通 | / | 代驾服务、租车网点导航等相关服务 |
| 快递业与邮政 | / | 快递/货物收发服务 |
| 餐饮 | 外卖点餐 | 线下送餐服务 |
| 出行与交通 | / | 代驾服务、租车网点导航等相关服务 |
| 跨境电商 | / | 提供售卖商品线下发货、收货服务、线下商超导览、导航服务 |
| 本地服务 | 电商平台、服装/鞋/箱包、玩具、家电/数码/手机、美妆/洗护、珠宝/饰品/眼镜/钟表、运动/户外/乐器、鲜花/园艺/工艺品、家居/家饰/家纺、办公/文具、机械/电子器件、酒、食品、百货/超市/便利店、宠物食品/用品 | 提供售卖商品线下发货、线下收货服务、线下商超导览、导航服务 |
| 生活服务 | 家政、外送 | 上门服务作业等线下场景 |

## 参数

### function listener

实时地理位置变化事件的监听函数

#### 参数

##### Object res

| 属性 | 类型 | 说明 | 最低版本 |
| --- | --- | --- | --- |
| latitude | number | 纬度，范围为 -90~90，负数表示南纬。使用 gcj02 国测局坐标系 | |
| longitude | number | 经度，范围为 -180~180，负数表示西经。使用 gcj02 国测局坐标系 | |
| speed | number | 速度，单位 m/s | |
| accuracy | number | 位置的精确度 | |
| altitude | number | 高度，单位 m | 1.2.0 |
| verticalAccuracy | number | 垂直精度，单位 m（Android 无法获取，返回 0） | 1.2.0 |
| horizontalAccuracy | number | 水平精度，单位 m | 1.2.0 |